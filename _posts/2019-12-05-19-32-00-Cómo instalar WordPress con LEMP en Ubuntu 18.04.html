---
layout: post
title: Cómo instalar WordPress con LEMP en Ubuntu 18.04
network: digitalocean
date: December 05, 2019 at 07:32PM
url: https://www.digitalocean.com/community/tutorials/como-instalar-wordpress-con-lemp-en-ubuntu-18-04-es
image: https://assets.digitalocean.com/articles/wordpress_lemp_1604/language_selection.png
tags: docker
feedtitle: DigitalOcean Community Tutorials
feedurl: https://www.digitalocean.com/community/tutorials
author: DigitalOcean
---
<h3 id="introducción">Introducción</h3>

<p>WordPress es el sistema de gestión de contenido (CMS) más popular de Internet. Le permite configurar de forma sencilla blogs y sitios web flexibles sobre un backend de MySQL con procesamiento PHP. WordPress ha recibido una increíble acogida y es una excelente opción para dejar listo un sitio web de forma rápida. Después de la configuración, casi toda la administración puede hacerse a través del cliente web.</p>

<p>En esta guía, nos centraremos en crear una instancia de WordPress configurada en una pila LEMP (Linux, Nginx, MySQL y PHP) en un servidor de Ubuntu 18.04.</p>

<h2 id="requisitos-previos">Requisitos previos</h2>

<p>Para completar este tutorial, necesitará acceso a un servidor de Ubuntu 18.04.</p>

<p>Deberá realizar las siguientes tareas para poder comenzar con esta guía:</p>

<ul>
<li><strong>Cree un usuario <code>sudo</code> en su servidor</strong>: completaremos los pasos de esta guía usando un usuario no root con privilegios <code>sudo</code>. Puede crear un usuario con privilegios <code>sudo</code> siguiendo nuestra <a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-18-04">guía de configuración inicial para servidores de Ubuntu 18.04</a>.</li>
<li><strong>Instale una pila LEMP</strong>: WordPress necesitará un servidor web, una base de datos y PHP para que funcione correctamente. La configuración de una pila LEMP (Linux, Nginx, MySQL y PHP) cumple con todos estos requisitos. Siga <a href="https://www.digitalocean.com/community/tutorials/how-to-install-linux-nginx-mysql-php-lemp-stack-ubuntu-18-04">esta guía</a> para instalar y configurar este software.</li>
<li><strong>Proteja su sitio con SSL</strong>: WordPress proporciona contenido dinámico y se ocupa de la autenticación y la autorización del usuario. TLS/SSL es la tecnología que le permite cifrar el tráfico de su sitio para que su conexión sea segura. La forma en que configure SSL dependerá de que disponga o no de un nombre de dominio para su sitio.

<ul>
<li>*<em>Si tiene un nombre de dominio, la alternativa *</em>más sencilla para proteger su sitio es Let&rsquo;s Encrypt, que proporciona certificados de confianza gratuitos. Para la configuración, siga nuestra <a href="https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-18-04">guía de Let&rsquo;s Encrypt para Nginx</a>.</li>
<li><strong>Si no cuenta con un dominio</strong> y solo utiliza esta configuración para pruebas o cuestiones personales, puede emplear en su lugar un certificado autofirmado. Le proporciona el mismo tipo de cifrado, aunque sin la validación del dominio. Para la configuración, siga nuestra <a href="https://www.digitalocean.com/community/tutorials/how-to-create-a-self-signed-ssl-certificate-for-nginx-in-ubuntu-18-04">guía de SSL autofirmados para Nginx</a>.</li>
</ul></li>
</ul>

<p>Cuando complete los pasos de configuración, inicie sesión en su servidor como usuario <code>sudo</code> y continúe.</p>

<h2 id="paso-1-crear-una-base-de-datos-y-un-usuario-de-mysql-para-wordpress">Paso 1: Crear una base de datos y un usuario de MySQL para WordPress</h2>

<p>El primer paso que daremos es preparatorio. WordPress utiliza MySQL para administrar y almacenar información sobre el sitio y el usuario. Ya instalamos MySQL, pero debemos crear una base de datos y un usuario para que WordPress los utilice.</p>

<p>Para comenzar, inicie sesión en la cuenta root (administrativa) de MySQL. Si MySQL está configurado para usar el complemento de autenticación <code>auth_socket</code> (el predeterminado), puede iniciar sesión en la cuenta administrativa de MySQL usando <code>sudo</code>:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo mysql
</li></ul></code></pre>
<p>Si cambió el método de autenticación para usar una contraseña para la cuenta root de MySQL, utilice el siguiente formato:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">mysql -u root -p
</li></ul></code></pre>
<p>Se le solicitará la contraseña que estableció para la cuenta root de MySQL.</p>

<p>Primero, podemos crear una base de datos separada que WordPress pueda controlar. Puede darle el nombre que desee, pero en esta guía usaremos <code>wordpress</code> por cuestiones de simplicidad. Puede crear la base de datos para WordPress escribiendo lo siguiente:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="mysql&gt;">CREATE DATABASE <span class="highlight">wordpress</span> DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci;
</li></ul></code></pre>
<p><span class='note'><strong>Nota:</strong> Cada instrucción de MySQL debe terminar en punto y coma (;). Asegúrese de que esto no falte si experimenta problemas.<br></span></p>

<p>A continuación, crearemos una cuenta de usuario separada de MySQL que usaremos exclusivamente para realizar operaciones en nuestra nueva base de datos. Desde el punto de vista de la administración y la seguridad, crear bases de datos y cuentas de una función es una idea recomendable. En esta guía, usaremos el nombre <code>wordpressuser</code>. Puede cambiarlo si lo desea.</p>

<p>Crearemos esta cuenta, estableceremos una contraseña y concederemos acceso a la base de datos que creamos. Podemos hacerlo escribiendo el comando que se muestra a continuación. Recuerde elegir una contraseña segura para el usuario de su base de datos:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="mysql&gt;">GRANT ALL ON <span class="highlight">wordpress</span>.* TO '<span class="highlight">wordpressuser</span>'@'localhost' IDENTIFIED BY '<span class="highlight">password</span>';
</li></ul></code></pre>
<p>Ahora tiene una base de datos y una cuenta de usuario, creadas específicamente para WordPress. Debemos eliminar los privilegios de modo que la instancia actual de MySQL registre los cambios recientes que realizamos:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="mysql&gt;">FLUSH PRIVILEGES;
</li></ul></code></pre>
<p>Cierre MySQL escribiendo lo siguiente:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="mysql&gt;">EXIT;
</li></ul></code></pre>
<p>La sesión de MySQL terminará y volverá al shell normal de Linux.</p>

<h2 id="paso-2-instalar-extensiones-de-php-adicionales">Paso 2: Instalar extensiones de PHP adicionales</h2>

<p>Cuando configuramos nuestra pila LEMP, solo necesitamos un conjunto de extensiones muy reducido para que PHP se comunicara con MySQL. WordPress y muchos de sus complementos aprovechan las extensiones de PHP adicionales.</p>

<p>Podemos descargar e instalar algunas de las extensiones de PHP más populares para usarlas con WordPress escribiendo lo siguiente:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt update
</li><li class="line" prefix="$">sudo apt install php-curl php-gd php-intl php-mbstring php-soap php-xml php-xmlrpc php-zip
</li></ul></code></pre>
<p><span class='note'><strong>Nota:</strong> Cada complemento de WordPress tiene su propio conjunto de requisitos. Para algunos, posiblemente sea necesario instalar paquetes de PHP adicionales. Compruebe la documentación de sus complementos para ver sus requisitos de PHP. Si están disponibles, pueden instalarse con <code>apt</code> como ya se ha mostrado.<br></span></p>

<p>Cuando termine de instalar las extensiones, reinicie el proceso PHP-FPM de modo que el procesador PHP en funcionamiento pueda aprovechar las características recién instaladas:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl restart php7.2-fpm
</li></ul></code></pre>
<p>Ahora tenemos instaladas todas las extensiones de PHP necesarias en el servidor.</p>

<h2 id="paso-3-configurar-nginx">Paso 3: Configurar Nginx</h2>

<p>A continuación, realizaremos algunos ajustes de menor importancia en nuestros archivos de bloque del servidor  de Nginx. Conforme a los tutoriales de requisitos previos, debe tener un archivo de configuración para su sitio en el directorio <code>/etc/nginx/sites-available/</code> configurado para responder al nombre de dominio o a la dirección IP de su servidor y protegido por un certificado TLS/SSL. Como ejemplo, utilizaremos <code>/etc/apache2/sites-available/wordpress</code>, pero debe sustituir la ruta a su archivo de configuración cuando proceda.</p>

<p>Además, emplearemos <code>/var/www/wordpress</code> como el directorio root de nuestra instalación de WordPress. Debería usar el root web especificada en su propia configuración.</p>

<p><span class='note'><strong>Nota:</strong> Es posible que utilice la configuración predeterminada <code>/etc/nginx/sites-available/default</code> (con <code>/var/www/html</code> como su root web). Se puede usar si solo piensa alojar un sitio web en este servidor. Si no piensa hacerlo, resulta mejor dividir la configuración necesaria en fragmentos lógicos, de un archivo por sitio.<br></span></p>

<p>Abra el archivo de bloque del servidor de su sitio con privilegios <code>sudo</code> para comenzar:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo nano /etc/nginx/sites-available/<span class="highlight">wordpress</span>
</li></ul></code></pre>
<p>Dentro del bloque principal <code>server</code>, debemos añadir algunos bloques <code>location</code>.</p>

<p>Comience creando bloques location con coincidencia exacta para solicitudes a <code>/favicon.ico</code> y <code>/robots.txt</code>, para los que no queremos solicitudes de registro.</p>

<p>Usaremos una ubicación de expresión regular para que coincida con cualquier solicitud de archivos estáticos. Una vez más, desactivaremos el registro para estas solicitudes y las marcaremos como caché, ya que suelen ser recursos exigentes. Puede ajustar esta lista de archivos estáticos para que contenga cualquier otra extensión de archivo que pueda usar su sitio:</p>
<div class="code-label " title="/etc/nginx/sites-available/wordpress">/etc/nginx/sites-available/wordpress</div><pre class="code-pre "><code langs="">server {
    . . .

    <span class="highlight">location = /favicon.ico { log_not_found off; access_log off; }</span>
    <span class="highlight">location = /robots.txt { log_not_found off; access_log off; allow all; }</span>
    <span class="highlight">location ~* \.(css|gif|ico|jpeg|jpg|js|png)$ {</span>
        <span class="highlight">expires max;</span>
        <span class="highlight">log_not_found off;</span>
    <span class="highlight">}</span>
    . . .
}
</code></pre>
<p>Dentro del bloque <code>location/</code> existente, debemos ajustar la lista de <code>try_files</code> de modo que en vez de mostrar un error 404 como la opción predeterminada, el control pase al archivo <code>index.php</code> con los argumentos de solicitud.</p>

<p>Debería tener un aspecto parecido al siguiente:</p>
<div class="code-label " title="/etc/nginx/sites-available/wordpress">/etc/nginx/sites-available/wordpress</div><pre class="code-pre "><code langs="">server {
    . . .
    location / {
        <span class="highlight">#</span>try_files $uri $uri/ =404;
        <span class="highlight">try_files $uri $uri/ /index.php$is_args$args;</span>
    }
    . . .
}
</code></pre>
<p>Cuando termine, guarde y cierre el archivo.</p>

<p>Ahora podemos verificar que en nuestra configuración no haya errores de sintaxis escribiendo lo siguiente:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo nginx -t
</li></ul></code></pre>
<p>Si no se notificaron errores, vuelva a cargar Nginx escribiendo lo siguiente:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl reload nginx
</li></ul></code></pre>
<p>A continuación, descargaremos y configuraremos el propio WordPress.</p>

<h2 id="paso-4-descargar-wordpress">Paso 4: Descargar WordPress</h2>

<p>Ahora que el software de nuestro servidor está configurado, podemos descargar y configurar WordPress. Preferentemente por motivos de seguridad, siempre se recomienda obtener la versión más reciente de WordPress del sitio del producto.</p>

<p>Posiciónese en un directorio editable y luego descargue la versión comprimida escribiendo lo siguiente:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">cd /tmp
</li><li class="line" prefix="$">curl -LO https://wordpress.org/latest.tar.gz
</li></ul></code></pre>
<p>Extraiga el archivo comprimido para crear la estructura de directorios de WordPress:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">tar xzvf latest.tar.gz
</li></ul></code></pre>
<p>Moveremos estos archivos a nuestro root de documentos por ahora. Antes de hacerlo, podemos copiar el archivo de configuración de muestra al nombre del archivo que WordPress lee realmente:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">cp /tmp/wordpress/wp-config-sample.php /tmp/wordpress/wp-config.php
</li></ul></code></pre>
<p>Ahora podemos copiar todo el contenido del directorio en nuestro root de documentos. Usaremos el indicador <code>-a</code> para comprobar que se conserven nuestros permisos. Utilizaremos un punto al final de nuestro directorio de origen para indicar que todo lo que esté dentro del directorio debe copiarse, incluidos los archivos ocultos:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo cp -a /tmp/wordpress/. /var/www/<span class="highlight">wordpress</span>
</li></ul></code></pre>
<p>Ahora que nuestros archivos están preparados, les asignaremos propiedad al usuario y al grupo <code>www-data</code>. Este es el usuario cuyo funcionamiento Nginx simula y este último deberá poder leer y escribir archivos de WordPress para representar el sitio web y realizar actualizaciones automáticas.</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo chown -R www-data:www-data /var/www/<span class="highlight">wordpress</span>
</li></ul></code></pre>
<p>Ahora nuestros archivos están en el root de documentos de nuestro servidor y su propiedad es correcta, pero aún debemos completar otras configuraciones.</p>

<h2 id="paso-5-aplicar-ajustes-al-archivo-de-configuración-de-wordpress">Paso 5: Aplicar ajustes al archivo de configuración de WordPress</h2>

<p>A continuación, debemos realizar algunos cambios en el archivo de configuración principal de WordPress.</p>

<p>Cuando abramos el archivo, nuestra primera tarea será ajustar algunas claves secretas para proporcionar seguridad a nuestra instalación. WordPress proporciona un generador seguro para estos valores, de modo que no tenga que crear valores buenos por su cuenta. Solo se utilizan de forma interna, de modo que tener valores complejos y seguros aquí no afectará de manera negativa la utilidad.</p>

<p>Para obtener valores seguros del generador de claves secretas de WordPress, escriba lo siguiente:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">curl -s https://api.wordpress.org/secret-key/1.1/salt/
</li></ul></code></pre>
<p>Obtendrá valores únicos como estos:</p>

<p><span class='warning'><strong>Advertencia:</strong> Debe solicitar valores únicos en cada ocasión. <strong>NO</strong> copie los valores que se muestran a continuación.<br></span></p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>define('AUTH_KEY',         '1jl/vqfs&lt;XhdXoAPz9 <span class="highlight">DO NOT COPY THESE VALUES</span> c_j{iwqD^&lt;+c9.k&lt;J@4H');
define('SECURE_AUTH_KEY',  'E2N-h2]Dcvp+aS/p7X <span class="highlight">DO NOT COPY THESE VALUES</span> {Ka(f;rv?Pxf})CgLi-3');
define('LOGGED_IN_KEY',    'W(50,{W^,OPB%PB&lt;JF <span class="highlight">DO NOT COPY THESE VALUES</span> 2;y&amp;,2m%3]R6DUth[;88');
define('NONCE_KEY',        'll,4UC)7ua+8&lt;!4VM+ <span class="highlight">DO NOT COPY THESE VALUES</span> #`DXF+[$atzM7 o^-C7g');
define('AUTH_SALT',        'koMrurzOA+|L_lG}kf <span class="highlight">DO NOT COPY THESE VALUES</span>  07VC*Lj*lD&amp;?3w!BT#-');
define('SECURE_AUTH_SALT', 'p32*p,]z%LZ+pAu:VY <span class="highlight">DO NOT COPY THESE VALUES</span> C-?y+K0DK_+F|0h{!_xY');
define('LOGGED_IN_SALT',   'i^/G2W7!-1H2OQ+t$3 <span class="highlight">DO NOT COPY THESE VALUES</span> t6**bRVFSD[Hi])-qS`|');
define('NONCE_SALT',       'Q6]U:K?j4L%Z]}h^q7 <span class="highlight">DO NOT COPY THESE VALUES</span> 1% ^qUswWgn+6&amp;xqHN&amp;%');
</code></pre>
<p>Son líneas de configuración que podemos pegar directamente en nuestro archivo de configuración para establecer claves seguras. Copie el resultado que obtuvo ahora.</p>

<p>A continuación, abra el archivo de configuración de WordPress:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo nano /var/www/<span class="highlight">wordpress</span>/wp-config.php
</li></ul></code></pre>
<p>Busque la sección que contiene los valores ficticios para esos ajustes. Se parecerá a esto:</p>
<div class="code-label " title="/var/www/wordpress/wp-config.php">/var/www/wordpress/wp-config.php</div><pre class="code-pre "><code langs="">. . .

define('AUTH_KEY',         'put your unique phrase here');
define('SECURE_AUTH_KEY',  'put your unique phrase here');
define('LOGGED_IN_KEY',    'put your unique phrase here');
define('NONCE_KEY',        'put your unique phrase here');
define('AUTH_SALT',        'put your unique phrase here');
define('SECURE_AUTH_SALT', 'put your unique phrase here');
define('LOGGED_IN_SALT',   'put your unique phrase here');
define('NONCE_SALT',       'put your unique phrase here');

. . .
</code></pre>
<p>Elimine esas líneas y pegue los valores que copió de la línea de comandos:</p>
<div class="code-label " title="/var/www/wordpress/wp-config.php">/var/www/wordpress/wp-config.php</div><pre class="code-pre "><code langs="">. . .

define('AUTH_KEY',         '<span class="highlight">VALUES COPIED FROM THE COMMAND LINE</span>');
define('SECURE_AUTH_KEY',  '<span class="highlight">VALUES COPIED FROM THE COMMAND LINE</span>');
define('LOGGED_IN_KEY',    '<span class="highlight">VALUES COPIED FROM THE COMMAND LINE</span>');
define('NONCE_KEY',        '<span class="highlight">VALUES COPIED FROM THE COMMAND LINE</span>');
define('AUTH_SALT',        '<span class="highlight">VALUES COPIED FROM THE COMMAND LINE</span>');
define('SECURE_AUTH_SALT', '<span class="highlight">VALUES COPIED FROM THE COMMAND LINE</span>');
define('LOGGED_IN_SALT',   '<span class="highlight">VALUES COPIED FROM THE COMMAND LINE</span>');
define('NONCE_SALT',       '<span class="highlight">VALUES COPIED FROM THE COMMAND LINE</span>');

. . .
</code></pre>
<p>A continuación, debemos modificar algunos de los ajustes de conexión de la base de datos al inicio del archivo. Debe ajustar el nombre de la base de datos, su usuario y la contraseña asociada que configuramos dentro de MySQL.</p>

<p>El otro cambio que debemos realizar es configurar el método que debe emplear WordPress para escribir el sistema de archivos. Debido a que hemos dado permiso al servidor web para escribir donde debe hacerlo, podemos fijar de forma explícita el método del sistema de archivos en “direct”. Si no lo configuramos con nuestros ajustes actuales, haría que WordPress solicitase las credenciales de FTP cuando realicemos algunas acciones. Este ajuste se puede agregar debajo de los ajustes de conexión de la base de datos o en cualquier otra parte del archivo:</p>
<div class="code-label " title="/var/www/wordpress/wp-config.php">/var/www/wordpress/wp-config.php</div><pre class="code-pre "><code langs="">. . .

define('DB_NAME', '<span class="highlight">wordpress</span>');

/** MySQL database username */
define('DB_USER', '<span class="highlight">wordpressuser</span>');

/** MySQL database password */
define('DB_PASSWORD', '<span class="highlight">password</span>');

. . .

<span class="highlight">define('FS_METHOD', 'direct');</span>
</code></pre>
<p>Guarde y cierre el archivo cuando termine.</p>

<h2 id="paso-6-completar-la-instalación-a-través-de-la-interfaz-web">Paso 6: Completar la instalación a través de la interfaz web</h2>

<p>Ahora que la configuración del servidor está completa, podemos finalizar la instalación a través de la interfaz web.</p>

<p>En su navegador web, diríjase al nombre de dominio o a la dirección IP pública de su servidor:</p>
<pre class="code-pre "><code langs="">http://<span class="highlight">server_domain_or_IP</span>
</code></pre>
<p>Seleccione el idioma que desee utilizar:</p>

<p><img src="https://assets.digitalocean.com/articles/wordpress_lemp_1604/language_selection.png" alt="Selección de idioma de WordPress"></p>

<p>A continuación, accederá a la página principal de configuración.</p>

<p>Seleccione un nombre para su sitio de WordPress y elija un nombre de usuario (por motivos de seguridad, se recomienda no elegir opciones como “admin”). De forma automática, se generará una contraseña segura. Guárdela o seleccione una contraseña segura alternativa.</p>

<p>Introduzca su dirección de correo electrónico y defina si quiere que los motores de búsqueda no indexen su sitio:</p>

<p><img src="https://assets.digitalocean.com/articles/wordpress_lemp_1604/setup_installation.png" alt="Instalación de la configuración de WordPress"></p>

<p>Cuando haga clic para seguir, accederá a una página que le solicitará registrarse:</p>

<p><img src="https://assets.digitalocean.com/articles/wordpress_lemp_1604/login_prompt.png" alt="Solicitud de inicio de sesión de WordPress"></p>

<p>Tras iniciar sesión, accederá al panel de administración de WordPress:</p>

<p><img src="https://assets.digitalocean.com/articles/wordpress_lemp_1604/admin_screen.png" alt="Solicitud de inicio de sesión de WordPress"></p>

<h2 id="conclusión">Conclusión</h2>

<p>Con esto, WordPress deberá quedar instalado y listo para utilizarse. Algunos pasos posteriores comunes son elegir el ajuste de los permalinks para sus publicaciones (puede encontrarse en <code>Settings &gt; Permalinks</code>) o  seleccionar un nuevo tema (en <code>Appearance &gt; Themes</code>). Si es la primera vez que utiliza WordPress, explore la interfaz un poco para conocer su nuevo CMS.</p>
