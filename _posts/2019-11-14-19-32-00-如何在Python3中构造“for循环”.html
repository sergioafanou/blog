---
layout: post
title: 如何在Python3中构造“for循环”
network: digitalocean
date: November 14, 2019 at 07:32PM
url: https://www.digitalocean.com/community/tutorials/python3-for-zh
image: http://ifttt.com/images/no_image_card.png
tags: docker
feedtitle: DigitalOcean Community Tutorials
feedurl: https://www.digitalocean.com/community/tutorials
author: DigitalOcean
---
<p>在计算机编程中，运用循环语句可以让我们自动化、重复多次执行相似的任务。在这个教程里，我们将介绍Python中的<strong>for循环</strong></p>

<p>一个<code>for</code>循环，对于“代码的重复执行”的实现，是基于循环计数器或循环变量。这意味着：最常使用<code>for</code>循环的情况，是在进入循环之前已经知道需要重复的次数。这与“以终止条件决定何时终止循环”的 <strong><a href="https://www.digitalocean.com/community/tutorials/how-to-construct-while-loops-in-python-3">while 循环</a></strong> 不同。</p>

<h2 id="for循环">for循环</h2>

<p>在Python中, <code>for</code> 循环用以下的格式构造:</p>
<pre class="code-pre "><code class="code-highlight language-python">for [循环计数器] in [循环序列]:
    [执行循环任务]
</code></pre>
<p>[循环任务]在循环序列用尽之前，将会将一直被执行。</p>

<p>我们来看看这个例子中，如何用<code>for</code>循环去重复打印一个区间内的所有数字：</p>
<pre class="code-pre "><code class="code-highlight language-python">for i in range(0,5):
   print(i)
</code></pre>
<p>当我们运行程序，会得到以下的结果：</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>0
1
2
3
4
</code></pre>
<p>这个<code>for</code>循环用<code>i</code>作为它的循环参数，数字区间为0到5。 </p>

<p>循环之中的每次迭代，我们打印出一个数字。请注意在大多数编程中，我们常常用0作为索引（index）的起始，这是“打印出5个数字是0到4”的原因。</p>

<p>当程序需要多次重复代码块时，<code>for</code>循环常被用到。</p>

<h2 id="用range-函数进行for循环">用range()函数进行For循环</h2>

<p>Python的内置类型中，有一个“不可变序列”是<code>range()</code>。在循环中，<code>range()</code>被用于控制循环重复的次数。</p>

<p>当使用<code>range()</code>时，你可以传进1到3个参数：</p>

<ul>
<li><code>start</code> “起始值”决定这序列起始的数字，如果没有提供这个值，那么<code>start</code>将默认从0开始</li>
<li><code>stop</code> “终止值”是必需参数，它决定了循环在哪个数字终止(终止于到达这个数字前，因此不包含这个数字本身)</li>
<li><code>step</code> “步长”设定了数字在下一次迭代中“增加的幅度”（在负数的情况下，则为“减少的幅度”），如果没有提供这个参数则默认值为1</li>
</ul>

<p>接下来，我们看几个传入不同参数进入<code>range()</code>的例子。</p>

<p>首先我们仅传入<code>stop</code>参数（唯一的必需参数），这样我们的序列被设置为 <code>range(stop)</code>：</p>
<pre class="code-pre "><code class="code-highlight language-python">for i in range(6):
   print(i)
</code></pre>
<p>在以上程序中，<code>stop</code>参数为6，因此代码会在0-6之间迭代（不包括6本身）：</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>0
1
2
3
4
5
</code></pre>
<p>接下来我们看看<code>range(start, stop)</code>的例子，这个用法决定了迭代从何时开始以及何时结束：</p>
<pre class="code-pre "><code class="code-highlight language-python">for i in range(20,25):
   print(i)
</code></pre>
<p>这里，循环的范围从20（包括20）到25（不包括25），因此输入结果如下：</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>20
21
22
23
24
</code></pre>
<p><code>range()</code>中的<code>step</code>参数类似于<a href="https://www.digitalocean.com/community/tutorials/how-to-index-and-slice-strings-in-python-3#specifying-stride-while-slicing-strings">指定步幅进行字符串切割</a>，可用于跳过序列中的某些值。</p>

<p>当使用所有三个参数时，<code>step</code>将作为最后一个参数：<code>range(start, stop, step)</code>。首先我们开看看<code>step</code>是正数的情况：</p>
<pre class="code-pre "><code class="code-highlight language-python">for i in range(0,15,3):
   print(i)
</code></pre>
<p>在这个情况下，<code>for</code>循环被设置为打印出0到15直接的数字，但因为<code>step</code>是3，因此每隔三个数字打印一次，结果如下：</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>0
3
6
9
12
</code></pre>
<p>我们同样可以把<code>step</code>设置为负数用于反向循环（从大到小、从后往前的循环），但在这种情况下我们要相应地更改<code>start</code>和<code>stop</code>参数：</p>
<pre class="code-pre "><code class="code-highlight language-python">for i in range(100,0,-10):
   print(i)
</code></pre>
<p>这个情况下，<code>start</code>值是100，<code>stop</code>值是0，步长范围是<code>-10</code>。因此循环从100开始，到0结束，每次迭代减少10。我们可以看到以下的运行结果：</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>100
90
80
70
60
50
40
30
20
10
</code></pre>
<p>在Python编程中，<code>range()</code>序列类型经常被用作<code>for</code>循环的参数：</p>

<h2 id="使用“序列数据类型”的for循环">使用“序列数据类型”的For循环</h2>

<p><a href="https://www.digitalocean.com/community/tutorials/understanding-lists-in-python-3">列表</a> 和其它序列数据类型同样可以作为<code>for</code>循环的迭代参数。除了用<code>range()</code>进行循环，你同样可以定义一个列表并且迭代这个列表。</p>

<p>我们将会把一个列表分配给一个变量，然后循环迭代这个列表：</p>
<pre class="code-pre "><code class="code-highlight language-python">sharks = ['hammerhead', 'great white', 'dogfish', 'frilled', 'bullhead', 'requiem']

for shark in sharks:
   print(shark)
</code></pre>
<p>在这个例子中我们打印出列表中的每个项目。虽然我们用<code>shark</code>作为此处的变量，但我们同样可以用任何其他符合规范的名称作为变量名<a href="https://www.digitalocean.com/community/tutorials/how-to-use-variables-in-python-3#naming-variables-rules-and-style">合法的变量名</a> 运行结果如下所示：</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>hammerhead
great white
dogfish
frilled
bullhead
requiem
</code></pre>
<p>以上的结果表明<code>for</code>循环对于列表进行了迭代，并且将列表中的每个项目用一行来打印。</p>

<p>列表和其它的“序列”<a href="https://www.digitalocean.com/community/tutorials/understanding-data-types-in-python-3">数据类型</a> 比如 <a href="https://www.digitalocean.com/community/tutorial_series/working-with-strings-in-python-3">strings</a>以及<a href="https://www.digitalocean.com/community/tutorials/understanding-tuples-in-python-3">tuples(元组)</a>都常常被用于循环，因为他们有“可被迭代”的特性。你可以组合这些数据结构与<code>range()</code>协同，去在列表中增加项目。例子如下：</p>
<pre class="code-pre "><code class="code-highlight language-python">sharks = ['hammerhead', 'great white', 'dogfish', 'frilled', 'bullhead', 'requiem']

for item in range(len(sharks)):
   sharks.append('shark')

print(sharks)
</code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>['hammerhead', 'great white', 'dogfish', 'frilled', 'bullhead', 'requiem', 'shark', 'shark', 'shark', 'shark', 'shark', 'shark']
</code></pre>
<p>此处我们将<code>'shark'</code>作为占位字符串，在<code>sharks</code>列表中增加了n次<code>'shark'</code>(n为起始时<code>sharks</code>列表中项目的总数/列表原长)</p>

<p>我们也可以用<code>for</code>循环从头开始构建一个列表：</p>
<pre class="code-pre "><code class="code-highlight language-python">integers = []

for i in range(10):
   integers.append(i)

print(integers)
</code></pre>
<p>在这个例子中，<code>integers</code>列表初始化为空，但接下来的<code>for</code>循环生成了如下的列表：</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
</code></pre>
<p>与之相似，我们可以迭代字符串：</p>
<pre class="code-pre "><code class="code-highlight language-python">sammy = 'Sammy'

for letter in sammy:
   print(letter)
</code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>S
a
m
m
y
</code></pre>
<p>迭代<a href="https://www.digitalocean.com/community/tutorials/understanding-data-types-in-python-3#tuples">tuples(元组)</a>可通过和以上“迭代列表”和“迭代字符串”同样的格式进行实现。</p>

<p>当迭代一个<a href="https://www.digitalocean.com/community/tutorials/understanding-dictionaries-in-python-3">dictionary(字典)</a>时，请谨记“键值对”(key:value)的结构，去保证调用字典中正确的元素。以下是调用“键”和“值”的例子：</p>
<pre class="code-pre "><code class="code-highlight language-python">sammy_shark = {'name': 'Sammy', 'animal': 'shark', 'color': 'blue', 'location': 'ocean'}

for key in sammy_shark:
   print(key + ': ' + sammy_shark[key])
</code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>name: Sammy
animal: shark
location: ocean
color: blue
</code></pre>
<p>当循环“字典”类型时，循环参数对应字典的“键”（key），<code>字典参数[循环参数]</code>对应“值”（value）。在以上的例子中，循环参数<code>key</code>被用来代表“键”, and <code>sammy_shark[key]</code>被用来代表“值”。</p>

<p>循环常用于迭代和操控“序列数据类型”。</p>

<h2 id="嵌套循环">嵌套循环</h2>

<p>和其它编程语言一样，Python中的循环同样可以嵌套。</p>

<p>一个“嵌套循环”是“在一个循环中包含了另一个循环”，结构类似于<a href="https://www.digitalocean.com/community/tutorials/how-to-write-conditional-statements-in-python-3-2#nested-if-statements">嵌套<code>if</code>语句</a> 嵌套循环用以下格式构建：</p>
<pre class="code-pre "><code class="code-highlight language-python">for [first iterating variable] in [outer loop]: # Outer loop
    [do something]  # Optional
    for [second iterating variable] in [nested loop]:   # Nested loop
        [do something]  
</code></pre>
<p>程序首先遇到外循环，执行第一次迭代。第一次迭代触发内部嵌套循环，然后运行完成。接下来程序返回到外部循环的顶部，完成第二次迭代并再次触发嵌套循环。和之前一样嵌套循环完成运行，程序返回到外部循环的顶部直到整个序列执行完毕，或是遇到<a href="https://www.digitalocean.com/community/tutorials/how-to-use-break-continue-and-pass-statements-when-working-with-loops-in-python-3#break-statement">break</a>及其他打断进程的语句。</p>

<p>我们来实现一个嵌套<code>for</code>循环，去更加深入地理解。在这个例子中，外循环将迭代一个名为<code>num_list</code>的列表，而内循环将迭代一个名为<code>alpha_list</code>的字符串。</p>
<pre class="code-pre "><code class="code-highlight language-python">num_list = [1, 2, 3]
alpha_list = ['a', 'b', 'c']

for number in num_list:
    print(number)
    for letter in alpha_list:
        print(letter)
</code></pre>
<p>当我们运行程序将得到以下结果：</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>1
a
b
c
2
a
b
c
3
a
b
c
</code></pre>
<p>输出的结果说明了：程序首先通过打印<code>1</code>完成外循环的迭代，接下来通过连续打印 <code>a</code>, <code>b</code>, <code>c</code>完成内循环。当内循环完成后，程序返回外循环的顶部，打印<code>2</code>，接着再次打印内循环的内容(<code>a</code>, <code>b</code>, <code>c</code>)，继续循环往复。</p>

<p>嵌套<code>for</code>循环可用于迭代“由列表组成的列表(列表中的每个元素/项目是一个列表))”。再这样“由列表组成的列表”中，如果我们仅用一次for`循环，程序将打印出作为每个项目的内部列表：</p>
<pre class="code-pre "><code class="code-highlight language-python">list_of_lists = [['hammerhead', 'great white', 'dogfish'],[0, 1, 2],[9.9, 8.8, 7.7]]

for list in list_of_lists:
    print(list)
</code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>['hammerhead', 'great white', 'dogfish']
[0, 1, 2]
[9.9, 8.8, 7.7]
</code></pre>
<p>为了获得每个内部列表之中的项目，我们需要再次运用一个嵌套的<code>for</code>循环：</p>
<pre class="code-pre "><code class="code-highlight language-python">list_of_lists = [['hammerhead', 'great white', 'dogfish'],[0, 1, 2],[9.9, 8.8, 7.7]]

for list in list_of_lists:
    for item in list:
        print(item)
</code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>hammerhead
great white
dogfish
0
1
2
9.9
8.8
7.7
</code></pre>
<p>当我们运用嵌套<code>for</code>循环时，我们可以迭代(组成总列表的)单个列表之中的项目。</p>

<p>我们可以看到嵌套<code>for</code>循环被用在我们教程中的一个实用案例之中<a href="https://www.digitalocean.com/community/tutorials/how-to-work-with-language-data-in-python-3-using-the-natural-language-toolkit-nltk#step-5-%E2%80%94-counting-pos-tags">自然语言处理工具包 (NLTK)</a>.</p>

<h2 id="总结">总结</h2>

<p>这个教程中，我们介绍了Python中的<code>for</code>循环如何工作，以及如何构造它们。<strong>For循环</strong>会连续循环多次执行(被提供的)代码块。</p>

<p>从这里开始，你可以继续学习循环相关的教程 <strong><a href="https://www.digitalocean.com/community/tutorials/how-to-construct-while-loops-in-python-3">while循环</a></strong> 和 <strong><a href="https://www.digitalocean.com/community/tutorials/how-to-use-break-continue-and-pass-statements-when-working-with-loops-in-python-3">break, continue,和pass 语句</a></strong>. </p>

<p>若想在实际项目中练习运用<code>for</code>循环，请参照以下几个教程：</p>

<ul>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-create-a-twitterbot-with-python-3-and-the-tweepy-library">How To Create a Twitterbot with Python 3 and the Tweepy Library</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-work-with-language-data-in-python-3-using-the-natural-language-toolkit-nltk">How To Work with Language Data in Python 3 using the Natural Language Toolkit NLTK</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-graph-word-frequency-using-matplotlib-with-python-3">How To Graph Word Frequency Using matplotlib with Python 3</a></li>
</ul>
