---
layout: post
title: Como Configurar um Banco de Dados Remoto para Otimizar o Desempenho do Site com o MySQL no Ubuntu 18.04
network: digitalocean
date: September 10, 2019 at 09:18PM
url: https://www.digitalocean.com/community/tutorials/como-configurar-um-banco-de-dados-remoto-para-otimizar-o-desempenho-do-site-com-o-mysql-no-ubuntu-18-04-pt
image: https://assets.digitalocean.com/articles/remote-mysql-1804/wp-install-1804-small.png
tags: docker
feedtitle: DigitalOcean Community Tutorials
feedurl: https://www.digitalocean.com/community/tutorials
author: DigitalOcean
---
<h3 id="introdução">Introdução</h3>

<p>À medida que sua aplicação ou site cresce, pode chegar um momento em que você superou a configuração atual do seu servidor. Se você estiver hospedando o seu servidor web e o back-end do banco de dados na mesma máquina, pode ser uma boa ideia separar essas duas funções para que cada uma possa operar em seu próprio hardware e compartilhar a carga de responder às solicitações dos visitantes.</p>

<p>Neste guia, veremos como configurar um servidor de banco de dados MySQL remoto ao qual sua aplicação web pode se conectar. Usaremos o WordPress como exemplo para ter algo para trabalhar, mas a técnica é amplamente aplicável a qualquer aplicação suportada pelo MySQL.</p>

<h2 id="pré-requisitos">Pré-requisitos</h2>

<p>Antes de iniciar este tutorial, você precisará de:</p>

<ul>
<li>Dois servidores Ubuntu 18.04. Cada um deles deve ter um usuário não-root com privilégios sudo e um firewall UFW habilitado, conforme descrito em nosso tutorial de <a href="https://www.digitalocean.com/community/tutorials/configuracao-inicial-de-servidor-com-ubuntu-18-04-pt">Configuração Inicial de servidor com Ubuntu 18.04</a>. Um desses servidores hospedará seu back-end MySQL e, ao longo deste guia, o chamaremos de <strong>servidor de banco de dados</strong>. O outro se conectará ao seu servidor de banco de dados remotamente e atuará como seu servidor web; da mesma forma, iremos nos referir a ele como <strong>servidor web</strong> ao longo deste guia.</li>
<li>Nginx e PHP instalado em seu <strong>servidor web</strong>. Nosso tutorial <a href="https://www.digitalocean.com/community/tutorials/how-to-install-linux-nginx-mysql-php-lemp-stack-ubuntu-18-04">How To Install Linux, Nginx, MySQL, PHP (LEMP stack) in Ubuntu 18.04</a> o guiará no processo, mas observe que você deve pular o Passo 2 deste tutorial, que se concentra na instalação do MySQL, pois você instalará o MySQL no seu servidor de banco de dados.</li>
<li>MySQL instalado em seu <strong>servidor de banco de dados</strong>. Siga o tutorial <a href="https://www.digitalocean.com/community/tutorials/como-instalar-o-mysql-no-ubuntu-18-04-pt">Como Instalar o MySQL no Ubuntu 18.04</a> para configurar isso.</li>
<li>Opcionalmente (mas altamente recomendado), certificados TLS/SSL da Let&rsquo;s Encrypt instalados em seu <strong>servidor web</strong>. Você precisará comprar um nome de domínio e ter <a href="https://www.digitalocean.com/docs/networking/dns/">registros DNS configurados para seu servidor</a>, mas os certificados em si são gratuitos. Nosso guia <a href="https://www.digitalocean.com/community/tutorials/como-proteger-o-nginx-com-o-let-s-encrypt-no-ubuntu-18-04-pt">Como Proteger o Nginx com o Let&rsquo;s Encrypt no Ubuntu 18.04</a> lhe mostrará como obter esses certificados.</li>
</ul>

<h2 id="passo-1-—-configurando-o-mysql-para-escutar-conexões-remotas">Passo 1 — Configurando o MySQL para Escutar Conexões Remotas</h2>

<p>Ter os dados armazenados em um servidor separado é uma boa maneira de expandir elegantemente após atingir o limite máximo de desempenho de uma configuração de uma única máquina. Ela também fornece a estrutura básica necessária para balancear a carga e expandir sua infraestrutura ainda mais posteriormente. Após instalar o MySQL, seguindo o tutorial de pré-requisitos, você precisará alterar alguns valores de configuração para permitir conexões a partir de outros computadores.</p>

<p>A maioria das mudanças na configuração do servidor MySQL pode ser feita no arquivo <code>mysqld.cnf</code>, que é armazenado no diretório <code>/etc/mysql/mysql.conf.d/</code> por padrão. Abra este arquivo em seu <strong>servidor de banco de dados</strong> com privilégios de root em seu editor preferido. Aqui, iremos usar o <code>nano</code>:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf
</li></ul></code></pre>
<p>Este arquivo é dividido em seções indicadas por labels entre colchetes (<code>[</code> e <code>]</code>). Encontre a seção com o label <code>mysqld</code>:</p>
<div class="code-label " title="/etc/mysql/mysql.conf.d/mysqld.cnf">/etc/mysql/mysql.conf.d/mysqld.cnf</div><pre class="code-pre "><code langs="">. . .
[mysqld]
. . .
</code></pre>
<p>Nesta seção, procure um parâmetro chamado <code>bind-address</code>. Isso informa ao software do banco de dados em qual endereço de rede escutar as conexões.</p>

<p>Por padrão, isso está definido como <code>127.0.0.1</code>, significando que o MySQL está configurado para escutar apenas conexões locais. Você precisa alterar isso para fazer referência a um endereço IP <em>externo</em> onde seu servidor pode ser acessado.</p>

<p>Se os dois servidores estiverem em um datacenter com recursos de rede privada, use o IP da rede privada do seu servidor de banco de dados. Caso contrário, você pode usar seu endereço IP público:</p>
<div class="code-label " title="/etc/mysql/mysql.conf.d/mysqld.cnf">/etc/mysql/mysql.conf.d/mysqld.cnf</div><pre class="code-pre "><code langs="">[mysqld]
. . .
bind-address = <span class="highlight">ip_do_servidor_de_banco_de_dados</span>
</code></pre>
<p>Como você se conectará ao seu banco de dados pela Internet, é recomendável que você exija conexões criptografadas para manter seus dados seguros. Se você não criptografar sua conexão MySQL, qualquer pessoa na rede poderá <a href="https://en.wikipedia.org/wiki/Sniffing_attack">fazer sniff</a> por informações confidenciais entre seus servidores web e de banco de dados. Para criptografar conexões MySQL, adicione a seguinte linha após a linha <code>bind-address</code> que você acabou de atualizar:</p>
<div class="code-label " title="/etc/mysql/mysql.conf.d/mysqld.cnf">/etc/mysql/mysql.conf.d/mysqld.cnf</div><pre class="code-pre "><code langs="">[mysqld]
. . .
<span class="highlight">require_secure_transport = on</span>
. . .
</code></pre>
<p>Salve e feche o arquivo quando terminar. Se você estiver usando <code>nano</code>, faça isso pressionando <code>CTRL+X</code>, <code>Y</code> e, em seguida, <code>ENTER</code>.</p>

<p>Para que as conexões SSL funcionem, você precisará criar algumas chaves e certificados. O MySQL vem com um comando que os configura automaticamente. Execute o seguinte comando, que cria os arquivos necessários. Ele também os torna legíveis pelo servidor MySQL, especificando o UID do usuário <strong>mysql</strong>:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo mysql_ssl_rsa_setup --uid=mysql
</li></ul></code></pre>
<p>Para forçar o MySQL a atualizar sua configuração e ler as novas informações de SSL, reinicie o banco de dados:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl restart mysql
</li></ul></code></pre>
<p>Para confirmar que o servidor agora está escutando na interface externa, execute o seguinte comando <code>netstat</code>:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo netstat -plunt | grep mysqld
</li></ul></code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>tcp        0      0 <span class="highlight">ip_do_servidor_de_banco_de_dados</span>:3306     0.0.0.0:*               LISTEN      27328/mysqld
</code></pre>
<p>O <code>netstat</code> imprime estatísticas sobre o sistema de rede do seu servidor. Esta saída nos mostra que um processo chamado <code>mysqld</code> está anexado ao <code><span class="highlight">ip_do_servidor_de_banco_de_dados</span></code> na porta <code>3306</code>, a porta padrão do MySQL, confirmando que o servidor está escutando na interface apropriada.</p>

<p>Em seguida, abra essa porta no firewall para permitir o tráfego através dela:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo ufw allow mysql
</li></ul></code></pre>
<p>Essas são todas as alterações de configuração que você precisa fazer no MySQL. A seguir, veremos como configurar um banco de dados e alguns perfis de usuário, um dos quais você usará para acessar o servidor remotamente.</p>

<h2 id="passo-2-—-configurando-um-banco-de-dados-para-o-wordpress-e-credenciais-remotas">Passo 2 — Configurando um Banco de Dados para o WordPress e Credenciais Remotas</h2>

<p>Embora o próprio MySQL agora esteja escutando em um endereço IP externo, atualmente não há usuários ou bancos de dados habilitados para controle remoto configurados. Vamos criar um banco de dados para o WordPress e um par de usuários que possam acessá-lo.</p>

<p>Comece conectando-se ao MySQL como o usuário <strong>root</strong> do MySQL:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo mysql
</li></ul></code></pre>
<span class='note'><p>
<strong>Nota:</strong> Se você tiver a autenticação por senha ativada, conforme descrito no <a href="https://www.digitalocean.com/community/tutorials/como-instalar-o-mysql-no-ubuntu-18-04-pt">Passo 3 do pré-requisito do tutorial do MySQL</a>, você precisará usar o seguinte comando para acessar o shell do MySQL:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">mysql -u root -p
</li></ul></code></pre>
<p>Depois de executar este comando, você será solicitado a fornecer sua senha de <strong>root</strong> do MySQL  e, após inseri-la, receberá um novo prompt <code>mysql&gt;</code>.<br></p></span>

<p>No prompt do MySQL, crie um banco de dados que o WordPress usará. Pode ser útil atribuir a esse banco de dados um nome reconhecível para que você possa identificá-lo facilmente mais tarde. Aqui, vamos chamá-lo de <code>wordpress</code>:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="mysql&gt;">CREATE DATABASE wordpress;
</li></ul></code></pre>
<p>Agora que você criou seu banco de dados, você precisará criar um par de usuários. Criaremos um usuário somente local e um usuário remoto vinculado ao endereço IP do servidor web.</p>

<p>Primeiro, crie seu usuário local, <strong>wpuser</strong>, e faça com que esta conta corresponda apenas às tentativas de conexão local usando <strong>localhost</strong> na declaração:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="mysql&gt;">CREATE USER 'wpuser'@'localhost' IDENTIFIED BY '<span class="highlight">senha</span>';
</li></ul></code></pre>
<p>Em seguida, conceda a esta conta acesso total ao banco de dados <code>wordpress</code>:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="mysql&gt;">GRANT ALL PRIVILEGES ON wordpress.* TO 'wpuser'@'localhost';
</li></ul></code></pre>
<p>Agora, esse usuário pode executar qualquer operação no banco de dados do WordPress, mas essa conta não pode ser usada remotamente, pois corresponde apenas às conexões da máquina local. Com isso em mente, crie uma conta complementar que corresponda às conexões exclusivamente do seu servidor web. Para isso, você precisará do endereço IP do seu servidor web.</p>

<p>Observe que você deve usar um endereço IP que utilize a mesma rede que você configurou no seu arquivo <code>mysqld.cnf</code>. Isso significa que, se você especificou um IP de rede privada no arquivo <code>mysqld.cnf</code>, precisará incluir o IP privado do seu servidor web nos dois comandos a seguir. Se você configurou o MySQL para usar a internet pública, você deve fazer isso corresponder ao endereço IP público do servidor web.</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="mysql&gt;">CREATE USER 'remotewpuser'@'<span class="highlight">ip_do_servidor_web</span>' IDENTIFIED BY '<span class="highlight">senha</span>';
</li></ul></code></pre>
<p>Depois de criar sua conta remota, conceda a ela os mesmos privilégios que o usuário local:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="mysql&gt;">GRANT ALL PRIVILEGES ON wordpress.* TO 'remotewpuser'@'<span class="highlight">ip_do_servidor_web</span>';
</li></ul></code></pre>
<p>Por fim, atualize os privilégios para que o MySQL saiba começar a usá-los:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="mysql&gt;">FLUSH PRIVILEGES;
</li></ul></code></pre>
<p>Então saia do prompt do MySQL digitando:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="mysql&gt;">exit
</li></ul></code></pre>
<p>Agora que você configurou um novo banco de dados e um usuário habilitado remotamente, você pode testar se consegue se conectar ao banco de dados a partir do seu servidor web.</p>

<h2 id="passo-3-—-testando-conexões-remotas-e-locais">Passo 3 — Testando Conexões Remotas e Locais</h2>

<p>Antes de continuar, é melhor verificar se você pode se conectar ao seu banco de dados tanto a partir da máquina local — seu servidor de banco de dados — quanto pelo seu servidor web.</p>

<p>Primeiro, teste a conexão local a partir do seu <strong>servidor de banco de dados</strong> tentando fazer login com sua nova conta:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">mysql -u wpuser -p
</li></ul></code></pre>
<p>Quando solicitado, digite a senha que você configurou para esta conta.</p>

<p>Se você receber um prompt do MySQL, então a conexão local foi bem-sucedida. Você pode sair novamente digitando:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="mysql&gt;">exit
</li></ul></code></pre>
<p>Em seguida, faça login no seu <strong>servidor web</strong> para testar as conexões remotas:</p>
<pre class="code-pre command local-environment"><code langs=""><ul class="prefixed"><li class="line" prefix="$">ssh <span class="highlight">sammy</span>@<span class="highlight">ip_do_servidor_web</span>
</li></ul></code></pre>
<p>Você precisará instalar algumas ferramentas de cliente para MySQL em seu servidor web para acessar o banco de dados remoto. Primeiro, atualize o cache de pacotes local se você não tiver feito isso recentemente:</p>
<pre class="code-pre command second-environment"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt update
</li></ul></code></pre>
<p>Em seguida, instale os utilitários de cliente do MySQL:</p>
<pre class="code-pre command second-environment"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt install mysql-client
</li></ul></code></pre>
<p>Depois disso, conecte-se ao seu servidor de banco de dados usando a seguinte sintaxe:</p>
<pre class="code-pre command second-environment"><code langs=""><ul class="prefixed"><li class="line" prefix="$">mysql -u remotewpuser -h <span class="highlight">ip_do_servidor_de_banco_de_dados</span> -p
</li></ul></code></pre>
<p>Novamente, você deve certificar-se que está usando o endereço IP correto para o servidor de banco de dados. Se você configurou o MySQL para escutar na rede privada, digite o IP da rede privada do seu banco de dados. Caso contrário, digite o endereço IP público do seu servidor de banco de dados.</p>

<p>Você será solicitado a inserir a senha da sua conta <strong>remotewpuser</strong>. Depois de inseri-la, e se tudo estiver funcionando conforme o esperado, você verá o prompt do MySQL. Verifique se a conexão está usando SSL com o seguinte comando:</p>
<pre class="code-pre custom_prefix second-environment"><code langs=""><ul class="prefixed"><li class="line" prefix="mysql&gt;">status
</li></ul></code></pre>
<p>Se a conexão realmente estiver usando SSL, a linha <code>SSL:</code> indicará isso, como mostrado aqui:</p>
<pre class="code-pre  second-environment"><code langs=""><div class="secondary-code-label " title="Output">Output</div>--------------
mysql  Ver 14.14 Distrib 5.7.18, for Linux (x86_64) using  EditLine wrapper

Connection id:      52
Current database:
Current user:       remotewpuser@203.0.113.111
<span class="highlight">SSL:         Cipher in use is DHE-RSA-AES256-SHA</span>
Current pager:      stdout
Using outfile:      ''
Using delimiter:    ;
Server version:     5.7.18-0ubuntu0.16.04.1 (Ubuntu)
Protocol version:   10
Connection:     203.0.113.111 via TCP/IP
Server characterset:    latin1
Db     characterset:    latin1
Client characterset:    utf8
Conn.  characterset:    utf8
TCP port:       3306
Uptime:         3 hours 43 min 40 sec

Threads: 1  Questions: 1858  Slow queries: 0  Opens: 276  Flush tables: 1  Open tables: 184  Queries per second avg: 0.138
--------------
</code></pre>
<p>Depois de verificar que você pode se conectar remotamente, vá em frente e saia do prompt:</p>
<pre class="code-pre custom_prefix second-environment"><code langs=""><ul class="prefixed"><li class="line" prefix="mysql&gt;">exit
</li></ul></code></pre>
<p>Com isso, você verificou o acesso local e o acesso a partir do servidor web, mas não verificou se outras conexões serão recusadas. Para uma verificação adicional, tente fazer o mesmo em um terceiro servidor para o qual você <em>não</em> configurou uma conta de usuário específica para garantir que esse outro servidor <em>não</em> tenha o acesso concedido.</p>

<p>Observe que antes de executar o seguinte comando para tentar a conexão, talvez seja necessário instalar os utilitários de cliente do MySQL, como você fez acima:</p>
<pre class="code-pre command third-environment"><code langs=""><ul class="prefixed"><li class="line" prefix="$">mysql -u wordpressuser -h <span class="highlight">ip_do_servidor_de_banco_de_dados</span> -p
</li></ul></code></pre>
<p>Isso não deve ser concluído com êxito e deve gerar um erro semelhante a este:</p>
<pre class="code-pre  third-environment"><code langs=""><div class="secondary-code-label " title="Output">Output</div>ERROR 1130 (HY000): Host '<span class="highlight">203.0.113.12</span>' is not allowed to connect to this MySQL server
</code></pre>
<p>Isso é esperado, já que você não criou um usuário do MySQL que tem permissão para se conectar a partir deste servidor, e também é desejado, uma vez que você quer ter certeza de que seu servidor de banco de dados negará o acesso de usuários não autorizados ao seu servidor do MySQL.</p>

<p>Após testar com êxito sua conexão remota, você pode instalar o WordPress em seu servidor web.</p>

<h2 id="passo-4-—-instalando-o-wordpress">Passo 4 — Instalando o WordPress</h2>

<p>Para demonstrar os recursos do seu novo servidor MySQL com capacidade remota, passaremos pelo processo de instalação e configuração do WordPress — o popular sistema de gerenciamento de conteúdo — em seu servidor web. Isso exigirá que você baixe e extraia o software, configure suas informações de conexão e então execute a instalação baseada em web do WordPress.</p>

<p>No seu <strong>servidor web</strong>, faça o download da versão mais recente do WordPress para o seu diretório home:</p>
<pre class="code-pre command second-environment"><code langs=""><ul class="prefixed"><li class="line" prefix="$">cd ~
</li><li class="line" prefix="$">curl -O https://wordpress.org/latest.tar.gz
</li></ul></code></pre>
<p>Extraia os arquivos, que criarão um diretório chamado <code>wordpress</code> no seu diretório home:</p>
<pre class="code-pre command second-environment"><code langs=""><ul class="prefixed"><li class="line" prefix="$">tar xzvf latest.tar.gz
</li></ul></code></pre>
<p>O WordPress inclui um arquivo de configuração de exemplo que usaremos como ponto de partida. Faça uma cópia deste arquivo, removendo <code>-sample</code> do nome do arquivo para que ele seja carregado pelo WordPress:</p>
<pre class="code-pre command second-environment"><code langs=""><ul class="prefixed"><li class="line" prefix="$">cp ~/wordpress/wp-config-sample.php ~/wordpress/wp-config.php
</li></ul></code></pre>
<p>Quando você abre o arquivo, sua primeira abordagem será ajustar algumas chaves secretas para fornecer mais segurança à sua instalação. O WordPress fornece um gerador seguro para esses valores, para que você não precise criar bons valores por conta própria. Eles são usados apenas internamente, portanto, não prejudicará a usabilidade ter valores complexos e seguros aqui.</p>

<p>Para obter valores seguros do gerador de chave secreta do WordPress, digite:</p>
<pre class="code-pre command second-environment"><code langs=""><ul class="prefixed"><li class="line" prefix="$">curl -s https://api.wordpress.org/secret-key/1.1/salt/
</li></ul></code></pre>
<p>Isso imprimirá algumas chaves na sua saída. Você as adicionará momentaneamente ao seu arquivo <code>wp-config.php</code>:</p>

<p><span class='warning'><strong>Atenção!</strong>  É importante que você solicite seus próprios valores únicos sempre. <strong>Não</strong> copie os valores mostrados aqui!<br></span></p>
<pre class="code-pre  second-environment"><code langs=""><div class="secondary-code-label " title="Output">Output</div>define('AUTH_KEY',         'L4|2Yh(giOtMLHg3#] <span class="highlight">DO NOT COPY THESE VALUES</span> %G00o|te^5YG@)');
define('SECURE_AUTH_KEY',  'DCs-k+MwB90/-E(=!/ <span class="highlight">DO NOT COPY THESE VALUES</span> +WBzDq:7U[#Wn9');
define('LOGGED_IN_KEY',    '*0kP!|VS.K=;#fPMlO <span class="highlight">DO NOT COPY THESE VALUES</span> +&amp;[%8xF*,18c @');
define('NONCE_KEY',        'fmFPF?UJi&amp;(j-{8=$- <span class="highlight">DO NOT COPY THESE VALUES</span> CCZ?Q+_~1ZU~;G');
define('AUTH_SALT',        '@qA7f}2utTEFNdnbEa <span class="highlight">DO NOT COPY THESE VALUES</span> t}Vw+8=K%20s=a');
define('SECURE_AUTH_SALT', '%BW6s+d:7K?-`C%zw4 <span class="highlight">DO NOT COPY THESE VALUES</span> 70U}PO1ejW+7|8');
define('LOGGED_IN_SALT',   '-l&gt;F:-dbcWof%4kKmj <span class="highlight">DO NOT COPY THESE VALUES</span> 8Ypslin3~d|wLD');
define('NONCE_SALT',       '4J(&lt;`4&amp;&amp;F (WiK9K#] <span class="highlight">DO NOT COPY THESE VALUES</span> ^ZikS`es#Fo:V6');
</code></pre>
<p>Copie a saída que você recebeu para a área de transferência e abra o arquivo de configuração no seu editor de texto:</p>
<pre class="code-pre command second-environment"><code langs=""><ul class="prefixed"><li class="line" prefix="$">nano ~/wordpress/wp-config.php
</li></ul></code></pre>
<p>Encontre a seção que contém os valores fictícios para essas configurações. Será algo parecido com isto:</p>
<div class="code-label " title="/wordpress/wp-config.php">/wordpress/wp-config.php</div><pre class="code-pre  second-environment"><code langs="">. . .
define('AUTH_KEY',         'put your unique phrase here');
define('SECURE_AUTH_KEY',  'put your unique phrase here');
define('LOGGED_IN_KEY',    'put your unique phrase here');
define('NONCE_KEY',        'put your unique phrase here');
define('AUTH_SALT',        'put your unique phrase here');
define('SECURE_AUTH_SALT', 'put your unique phrase here');
define('LOGGED_IN_SALT',   'put your unique phrase here');
define('NONCE_SALT',       'put your unique phrase here');
. . .
</code></pre>
<p>Exclua essas linhas e cole os valores que você copiou a partir da linha de comando.</p>

<p>Em seguida, insira as informações de conexão para seu banco de dados remoto. Essas linhas de configuração estão na parte superior do arquivo, logo acima de onde você colou suas chaves. Lembre-se de usar o mesmo endereço IP que você usou no teste de banco de dados remoto anteriormente:</p>
<div class="code-label " title="/wordpress/wp-config.php">/wordpress/wp-config.php</div><pre class="code-pre  second-environment"><code langs="">. . .
/** The name of the database for WordPress */
define('DB_NAME', '<span class="highlight">wordpress</span>');

/** MySQL database username */
define('DB_USER', '<span class="highlight">remotewpuser</span>');

/** MySQL database password */
define('DB_PASSWORD', '<span class="highlight">password</span>');

/** MySQL hostname */
define('DB_HOST', '<span class="highlight">db_server_ip</span>');
. . .
</code></pre>
<p>E, finalmente, em qualquer lugar do arquivo, adicione a seguinte linha que diz ao WordPress para usar uma conexão SSL para o nosso banco de dados MySQL:</p>
<div class="code-label " title="/wordpress/wp-config.php">/wordpress/wp-config.php</div><pre class="code-pre  second-environment"><code langs="">define('MYSQL_CLIENT_FLAGS', MYSQLI_CLIENT_SSL);
</code></pre>
<p>Salve e feche o arquivo.</p>

<p>Em seguida, copie os arquivos e diretórios encontrados no diretório <code>~/wordpress</code> para a raiz de documentos do Nginx. Observe que este comando inclui a flag <code>-a</code> para garantir que todas as permissões existentes sejam transferidas:</p>
<pre class="code-pre command second-environment"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo cp -a ~/wordpress/* /var/www/html
</li></ul></code></pre>
<p>Depois disso, a única coisa a fazer é modificar a propriedade do arquivo. Altere a propriedade de todos os arquivos na raiz de documentos para <strong>www-data</strong>, o usuário padrão do servidor web do Ubuntu:</p>
<pre class="code-pre command second-environment"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo chown -R www-data:www-data /var/www/html
</li></ul></code></pre>
<p>Com isso, o WordPress está instalado e você está pronto para executar sua rotina de configuração baseada em web.</p>

<h2 id="passo-5-—-configurando-o-wordpress-através-da-interface-web">Passo 5 — Configurando o Wordpress Através da Interface Web</h2>

<p>O WordPress possui um processo de configuração baseado na web. Conforme você avança, ele fará algumas perguntas e instalará todas as tabelas necessárias no seu banco de dados. Aqui, abordaremos as etapas iniciais da configuração do WordPress, que você pode usar como ponto de partida para criar seu próprio site personalizado que usa um back-end de banco de dados remoto.</p>

<p>Navegue até o nome de domínio (ou endereço IP público) associado ao seu servidor web:</p>
<pre class="code-pre "><code langs="">http://<span class="highlight">example.com</span>
</code></pre>
<p>Você verá uma tela de seleção de idioma para o instalador do WordPress. Selecione o idioma apropriado e clique na tela principal de instalação:</p>

<p><img src="https://assets.digitalocean.com/articles/remote-mysql-1804/wp-install-1804-small.png" alt="WordPress install screen"></p>

<p>Depois de enviar suas informações, você precisará fazer login na interface de administração do WordPress usando a conta que você acabou de criar. Você será direcionado para um painel onde poderá personalizar seu novo site WordPress.</p>

<h2 id="conclusão">Conclusão</h2>

<p>Ao seguir este tutorial, você configurou um banco de dados MySQL para aceitar conexões protegidas por SSL a partir de uma instalação remota do Wordpress. Os comandos e técnicas usados neste guia são aplicáveis a qualquer aplicação web escrita em qualquer linguagem de programação, mas os detalhes específicos da implementação serão diferentes. Consulte a documentação do banco de dados da aplicação ou linguagem para obter mais informações.</p>
