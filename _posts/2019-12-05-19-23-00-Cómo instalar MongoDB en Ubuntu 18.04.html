---
layout: post
title: Cómo instalar MongoDB en Ubuntu 18.04
network: digitalocean
date: December 05, 2019 at 07:23PM
url: https://www.digitalocean.com/community/tutorials/como-instalar-mongodb-en-ubuntu-18-04-es
image: http://ifttt.com/images/no_image_card.png
tags: docker
feedtitle: DigitalOcean Community Tutorials
feedurl: https://www.digitalocean.com/community/tutorials
author: DigitalOcean
---
<p><em>El autor seleccionó a <a href="https://www.brightfunds.org/organizations/creative-commons-corporation-van-houweling-molly">Creative Commons Corporation</a> para que recibiese una donación de $100 como parte del <a href="https://do.co/w4do-cta">programa Write for DOnations</a>.</em></p>

<h3 id="introducción">Introducción</h3>

<p><a href="https://www.mongodb.com/">MongoDB</a> es una base de datos de documentos gratuita y de código abierto utilizada comúnmente en las aplicaciones web modernas.</p>

<p>En este tutorial, instalará MongoDB, administrará su servicio y, de forma opcional, habilitará el acceso remoto.</p>

<h2 id="requisitos-previos">Requisitos previos</h2>

<p>Para completar este tutorial, necesitará lo siguiente:</p>

<ul>
<li>Un servidor de Ubuntu 18.04 configurado conforme a este <a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-18-04">tutorial de configuración inicial para servidores</a>, incluido un usuario sudo no root y un firewall.</li>
</ul>

<h2 id="paso-1-instalar-mongodb">Paso 1: Instalar MongoDB</h2>

<p>En los repositorios oficiales de paquetes de Ubuntu se incluye una versión actualizada de MongoDB. Esto significa que podemos instalar los paquetes necesarios utilizando <code>apt</code>.</p>

<p>Primero, actualice la lista de paquetes para tener la versión más reciente de listados de repositorios:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt update
</li></ul></code></pre>
<p>A continuación, instale el propio paquete de MongoDB:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt install -y mongodb
</li></ul></code></pre>
<p>Con este comando. se instalan varios paquetes que contienen la versión estable más reciente de MongoDB, junto con herramientas de administración útiles para el servidor de MongoDB. El servidor de la base de datos se inicia de forma automática tras la instalación.</p>

<p>A continuación, comprobaremos que el servidor esté activo y funcione de forma correcta.</p>

<h2 id="paso-2-comprobar-el-servicio-y-la-base-de-datos">Paso 2: Comprobar el servicio y la base de datos</h2>

<p>El proceso de instalación inició MongoDB de forma automática, pero verificaremos que el servicio se inicie y que la base de datos funcione.</p>

<p>Primero, compruebe el estado del servicio:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl status mongodb
</li></ul></code></pre>
<p>Verá este resultado:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>● <span class="highlight">mongodb.service</span> - An object/document-oriented database
   Loaded: loaded (/lib/systemd/system/mongodb.service; enabled; vendor preset: enabled)
   Active: <span class="highlight">active (running)</span> since Sat 2018-05-26 07:48:04 UTC; 2min 17s ago
     Docs: man:mongod(1)
 Main PID: 2312 (mongod)
    Tasks: 23 (limit: 1153)
   CGroup: /system.slice/mongodb.service
           └─2312 /usr/bin/mongod --unixSocketPrefix=/run/mongodb --config /etc/mongodb.conf
</code></pre>
<p>Según <code>systemd</code>, el servidor MongoDB se encuentra activo y funcionando.</p>

<p>Podemos verificar esto en profundidad estableciendo conexión con el servidor de la base de datos y ejecutando un comando de diagnóstico.</p>

<p>Ejecute este comando:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">mongo --eval 'db.runCommand({ connectionStatus: 1 })'
</li></ul></code></pre>
<p>Con esto se mostrarán la versión actual de la base de datos, la dirección y el puerto del servidor, y el resultado del comando status:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>MongoDB shell version v3.6.3
connecting to: <span class="highlight">mongodb://127.0.0.1:27017</span>
MongoDB server version: <span class="highlight">3.6.3</span>
{
        "authInfo" : {
                "authenticatedUsers" : [ ],
                "authenticatedUserRoles" : [ ]
        },
        <span class="highlight">"ok" : 1</span>
}
</code></pre>
<p>Un valor de <code>1</code> para el campo <code>ok</code> en la respuesta indica que el servidor funciona correctamente.</p>

<p>A continuación, veremos la forma de administrar la instancia del servidor.</p>

<h2 id="paso-3-gestionar-el-servicio-de-mongodb">Paso 3: Gestionar el servicio de MongoDB</h2>

<p>MongoDB se instala como un servicio <code>systemd</code>. Esto significa que puede administrarlo utilizando comandos systemd estándares, junto con todos los demás servicios de sistema en Ubuntu.</p>

<p>Para verificar el estado del servicio, escriba lo siguiente:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl status mongodb
</li></ul></code></pre>
<p>Puede detener el servidor en cualquier momento escribiendo lo siguiente:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl stop mongodb
</li></ul></code></pre>
<p>Para iniciar el servidor cuando esté detenido, escriba lo siguiente:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl start mongodb
</li></ul></code></pre>
<p>También puede reiniciar el servidor con un solo comando:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl restart mongodb
</li></ul></code></pre>
<p>Por defecto, MongoDB se configura para iniciarse de forma automática con el servidor. Si desea desactivar el inicio automático, escriba lo siguiente:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl disable mongodb
</li></ul></code></pre>
<p>Volver a habilitarlo es igualmente sencillo. Para hacerlo, utilice lo siguiente:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl enable mongodb
</li></ul></code></pre>
<p>A continuación, ajustaremos la configuración del firewall para nuestra instalación MongoDB.</p>

<h2 id="paso-4-ajustar-el-firewall-opcional">Paso 4: Ajustar el firewall (opcional)</h2>

<p>Suponiendo que siguió las instrucciones del <a href="https://www.digitalocean.com/community/tutorials/automating-initial-server-setup-with-ubuntu-18-04">tutorial de configuración inicial para servidores</a> para habilitar el firewall en su servidor, no será posible acceder al servidor de MongoDB desde Internet.</p>

<p>Si tiene intención de usar el servidor de MongoDB solo a nivel local con aplicaciones que se ejecuten en el mismo servidor, este es el ajuste recomendado y seguro. Sin embargo, si desea poder conectarse con su servidor MongoDB desde Internet, deberá permitir las conexiones entrantes en <code>ufw</code>.</p>

<p>Para permitir el acceso a MongoDB en su puerto predeterminado <code>27017</code> desde cualquier parte, podría utilizar <code>sudo ufw allow <span class="highlight">27017</span></code>. Sin embargo, permitir el acceso a Internet al servidor de MongoDB en una instalación predeterminada proporciona acceso ilimitado al servidor de la base de datos y a sus datos.</p>

<p>En la mayoría de los casos, solo se debe acceder a MongoDB desde determinadas ubicaciones de confianza, como otro servidor que aloje una aplicación. Para realizar esta tarea, puede permitir el acceso en el puerto predeterminado de MongoDB mientras especifique la dirección IP de otro servidor que, de forma explícita, tendrá permitido conectarse:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo ufw allow from <span class="highlight">your_other_server_ip</span>/32 to any port <span class="highlight">27017</span>  
</li></ul></code></pre>
<p>Puede verificar el cambio en los ajustes del firewall con <code>ufw</code>:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo ufw status
</li></ul></code></pre>
<p>Debería ver la habilitación del tráfico hacia el puerto <code>27017</code> en el resultado:</p>
<div class="code-label " title="Output">Output</div><pre class="code-pre "><code langs="">Status: active

To                         Action      From
--                         ------      ----
OpenSSH                    ALLOW       Anywhere
<span class="highlight">27017                      ALLOW       Anywhere</span>
OpenSSH (v6)               ALLOW       Anywhere (v6)
<span class="highlight">27017 (v6)                 ALLOW       Anywhere (v6)</span>
</code></pre>
<p>Si decidió permitir que solo una dirección IP determinada se conecte con el servidor de MongoDB, en el resultado se enumerará la dirección IP de la ubicación autorizada en lugar de <em>Anywhere</em>.</p>

<p>Puede encontrar ajustes de firewall más avanzados para restringir el acceso a servicios en Aspectos básicos de <a href="https://www.digitalocean.com/community/tutorials/ufw-essentials-common-firewall-rules-and-commands">UFW: Reglas y comandos comunes de firewall</a>.</p>

<p>Aunque el puerto esté abierto, MongoDB solo escucha en la dirección local <code>127.0.0.1</code>. Para permitir conexiones remotas, agregue la dirección IP pública de su servidor al archivo <code>mongod.conf</code>.</p>

<p>Abra el archivo de configuración de MongoDB en su editor:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo nano /etc/mongodb.conf
</li></ul></code></pre>
<p>Agregue la dirección IP de su servidor al valor <code>bindIP</code>:</p>
<div class="code-label " title=""></div><pre class="code-pre "><code langs="">...
logappend=true

bind_ip = 127.0.0.1<span class="highlight">,your_server_ip</span>
#port = 27017

...
</code></pre>
<p>Asegúrese de situar una coma entre la dirección IP existente y la que agregó.</p>

<p>Guarde el archivo, cierre el editor y reinicie MongoDB:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl restart mongodb
</li></ul></code></pre>
<p>MongoDB ahora recibirá conexiones remotas, pero cualquiera podrá acceder a él. Siga la parte 2 de <a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-secure-mongodb-on-ubuntu-16-04#part-two-securing-mongodb">Cómo instalar y proteger MongoDB en Ubuntu 16.04</a> para agregar un usuario administrativo y ampliar el bloqueo.</p>

<h2 id="conclusión">Conclusión</h2>

<p>Puede encontrar tutoriales más detallados sobre cómo configurar y utilizar MongoDB en <a href="https://www.digitalocean.com/community/search?q=mongodb">estos artículos de la comunidad de DigitalOcean</a>. La <a href="https://docs.mongodb.com/v3.2/">documentación oficial de MongoDB</a> también es un gran recurso en el que se abordan las posibilidades que ofrece MongoDB.</p>
