---
layout: post
title: Como Instalar e Utilizar o Docker no Debian 9
network: digitalocean
date: December 12, 2019 at 07:46PM
url: https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-debian-9-pt
image: https://assets.digitalocean.com/articles/docker_1804/ec2vX3Z.png
tags: docker
feedtitle: DigitalOcean Community Tutorials
feedurl: https://www.digitalocean.com/community/tutorials
author: DigitalOcean
---
<p><em>Uma versão anterior deste tutorial foi escrita por <a href="https://www.digitalocean.com/community/users/finid">finid</a>.</em></p>

<h3 id="introdução">Introdução</h3>

<p>O <a href="https://www.docker.com/">Docker</a> é um aplicativo que simplifica o processo de gerenciamento de processos de aplicação em <em>containers</em>. Os containers deixam você executar suas aplicações em processos isolados de recurso. Eles são semelhantes a máquinas virtuais, mas os containers são mais portáveis, mais fáceis de usar e mais dependentes do sistema operacional do host.</p>

<p>Para uma introdução detalhada aos diferentes componentes de um container Docker, verifique <a href="https://www.digitalocean.com/community/tutorials/the-docker-ecosystem-an-introduction-to-common-components">O Ecossistema Docker: Uma Introdução aos Componentes Comuns</a>.</p>

<p>Neste tutorial, você irá instalar e usar a Edição da Comunidade do Docker (CE) no Debian 9. Você irá instalar o Docker, trabalhar com containers e imagens e enviar uma imagem para um Repositório do Docker.</p>

<h2 id="pré-requisitos">Pré-requisitos</h2>

<p>Para seguir este tutorial, você precisará do seguinte:</p>

<ul>
<li>Um servidor Debian 9 configurado seguindo <a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-debian-9">o guia de configuração inicial de servidor Debian 9</a>, incluindo um usuário sudo não-root e um firewall.</li>
<li>Uma conta no <a href="https://hub.docker.com/">Docker Hub</a> se você deseja criar suas próprias imagens e enviá-las para o Docker Hub, como mostrado nos passos 7 e 8.</li>
</ul>

<h2 id="passo-1-—-instalando-o-docker">Passo 1 — Instalando o Docker</h2>

<p>O pacote de instalação do Docker disponível no repositório oficial do Debian pode não ser a versão mais recente. Para garantir que tenhamos a versão mais recente, iremos instalar o Docker do repositório oficial do Docker. Para fazer isso, adicionaremos uma nova fonte de pacote, adicionaremos a chave GPG do Docker para garantir que os downloads sejam válidos, e então instalaremos o pacote.</p>

<p>Primeiro, atualize sua lista existente de pacotes:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt update
</li></ul></code></pre>
<p>Em seguida, instale alguns pacotes pré-requisito que deixam o <code>apt</code> usar pacotes pelo HTTPS:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt install apt-transport-https ca-certificates curl gnupg2 software-properties-common
</li></ul></code></pre>
<p>Então, adicione a chave GPG para o repositório oficial do Docker no seu sistema:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -
</li></ul></code></pre>
<p>Adicione o repositório do Docker às fontes do APT:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/debian $(lsb_release -cs) stable"
</li></ul></code></pre>
<p>Em seguida, atualize o banco de dados do pacote com os pacotes do Docker do recém adicionado repositório:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt update
</li></ul></code></pre>
<p>Certifique-se de que você está prestes a instalar do repositório do Docker ao invés do repositório padrão do Debian:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">apt-cache policy docker-ce
</li></ul></code></pre>
<p>Você verá um resultado assim, embora o número da versão para o Docker possa ser diferente:</p>
<div class="code-label " title="Output of apt-cache policy docker-ce">Output of apt-cache policy docker-ce</div><pre class="code-pre "><code langs="">docker-ce:
  Installed: (none)
  Candidate: <span class="highlight">18.06.1~ce~3-0~debian</span>
  Version table:
     <span class="highlight">18.06.1~ce~3-0~debian</span> 500
        500 https://download.docker.com/linux/debian stretch/stable amd64 Packages
</code></pre>
<p>Observe que o <code>docker-ce</code> não está instalado, mas o candidato para a instalação é do repositório do Docker para o Debian 9 (<code>stretch</code>).</p>

<p>Finalmente, instale o Docker:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt install docker-ce
</li></ul></code></pre>
<p>O Docker deve agora ser instalado, o daemon iniciado e o processo habilitado a iniciar no boot. Verifique se ele está funcionando:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl status docker
</li></ul></code></pre>
<p>O resultado deve ser similar ao mostrado a seguir, mostrando que o serviço está ativo e funcionando:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>● docker.service - Docker Application Container Engine
   Loaded: loaded (/lib/systemd/system/docker.service; enabled; vendor preset: enabled)
   Active: active (running) since Thu 2018-07-05 15:08:39 UTC; 2min 55s ago
     Docs: https://docs.docker.com
  Main PID: 21319 (dockerd)
   CGroup: /system.slice/docker.service
           ├─21319 /usr/bin/dockerd -H fd://
           └─21326 docker-containerd --config /var/run/docker/containerd/containerd.toml
</code></pre>
<p>Instalando o Docker agora não dá apenas o serviço do Docker (daemon), mas também o utilitário de linha de comando <code>docker</code>, ou o cliente do Docker. Vamos explorar como usar o comando <code>docker</code> mais tarde neste tutorial.</p>

<h2 id="passo-2-—-executando-o-comando-docker-sem-sudo-opcional">Passo 2 — Executando o Comando Docker Sem Sudo (Opcional)</h2>

<p>Por padrão, o comando <code>docker</code> só pode ser executado pelo usuário <strong>root</strong> ou por um usuário no grupo <strong>docker</strong>, que é criado automaticamente no processo de instalação do Docker. Se você tentar executar o comando <code>docker</code> sem prefixar ele com o <code>sudo</code> ou sem estar no grupo <strong>docker</strong>, você terá um resultado como este:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>docker: Cannot connect to the Docker daemon. Is the docker daemon running on this host?.
See 'docker run --help'.
</code></pre>
<p>Se você quiser evitar digitar <code>sudo</code> sempre que você executar o comando <code>docker</code>, adicione seu nome de usuário no grupo <code>docker</code>:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo usermod -aG docker ${USER}
</li></ul></code></pre>
<p>Para inscrever o novo membro ao grupo, saia do servidor e logue novamente, ou digite o seguinte:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">su - ${USER}
</li></ul></code></pre>
<p>Você será solicitado a digitar a senha do seu usuário para continuar.</p>

<p>Confirme que seu usuário agora está adicionado ao grupo <strong>docker</strong> digitando:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">id -nG
</li></ul></code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div><span class="highlight">sammy</span> sudo docker
</code></pre>
<p>Se você precisar adicionar um usuário ao grupo <code>docker</code> com o qual você não está logado, declare esse nome de usuário explicitamente usando:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo usermod -aG docker <span class="highlight">username</span>
</li></ul></code></pre>
<p>O resto deste artigo supõe que você esteja executando o comando <code>docker</code> como um usuário no grupo <strong>docker</strong>. Se você escolher não fazer isso, por favor preencha os comandos com <code>sudo</code>.</p>

<p>Vamos explorar o comando <code>docker</code> a seguir.</p>

<h2 id="passo-3-—-usando-o-comando-docker">Passo 3 — Usando o Comando Docker</h2>

<p>Usar o <code>docker</code> consiste em passar a ele uma cadeia de opções e comandos seguidos de argumentos. A sintaxe toma esta forma:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">docker [option] [command] [arguments]
</li></ul></code></pre>
<p>Para ver todos os subcomandos disponíveis, digite:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">docker
</li></ul></code></pre>
<p>No Docker 18, a lista completa de subcomandos disponíveis inclui:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>
  attach      Attach local standard input, output, and error streams to a running container
  build       Build an image from a Dockerfile
  commit      Create a new image from a container's changes
  cp          Copy files/folders between a container and the local filesystem
  create      Create a new container
  diff        Inspect changes to files or directories on a container's filesystem
  events      Get real time events from the server
  exec        Run a command in a running container
  export      Export a container's filesystem as a tar archive
  history     Show the history of an image
  images      List images
  import      Import the contents from a tarball to create a filesystem image
  info        Display system-wide information
  inspect     Return low-level information on Docker objects
  kill        Kill one or more running containers
  load        Load an image from a tar archive or STDIN
  login       Log in to a Docker registry
  logout      Log out from a Docker registry
  logs        Fetch the logs of a container
  pause       Pause all processes within one or more containers
  port        List port mappings or a specific mapping for the container
  ps          List containers
  pull        Pull an image or a repository from a registry
  push        Push an image or a repository to a registry
  rename      Rename a container
  restart     Restart one or more containers
  rm          Remove one or more containers
  rmi         Remove one or more images
  run         Run a command in a new container
  save        Save one or more images to a tar archive (streamed to STDOUT by default)
  search      Search the Docker Hub for images
  start       Start one or more stopped containers
  stats       Display a live stream of container(s) resource usage statistics
  stop        Stop one or more running containers
  tag         Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE
  top         Display the running processes of a container
  unpause     Unpause all processes within one or more containers
  update      Update configuration of one or more containers
  version     Show the Docker version information
  wait        Block until one or more containers stop, then print their exit codes
</code></pre>
<p>Para visualizar as opções disponíveis para um comando específico, digite:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">docker <span class="highlight">docker-subcommand</span> --help
</li></ul></code></pre>
<p>Para visualizar informações de sistema sobre o Docker, use:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">docker info
</li></ul></code></pre>
<p>Vamos explorar alguns desses comandos. Começaremos trabalhando com imagens.</p>

<h2 id="passo-4-—-trabalhando-com-imagens-do-docker">Passo 4 — Trabalhando com Imagens do Docker</h2>

<p>Os containers do Docker são construídos com imagens do Docker. Por padrão, o Docker puxa essas imagens do <a href="https://hub.docker.com">Docker Hub</a>, um registro Docker gerido pelo Docker, a empresa por trás do projeto Docker. Qualquer um pode hospedar suas imagens do Docker no Docker Hub, então a maioria dos aplicativos e distribuições do Linux que você precisará terá imagens hospedadas lá.</p>

<p>Para verificar se você pode acessar e baixar imagens do Docker Hub, digite:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">docker run hello-world
</li></ul></code></pre>
<p>O resultado irá indicar que o Docker está funcionando corretamente:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>Unable to find image 'hello-world:latest' locally
latest: Pulling from library/hello-world
9db2ca6ccae0: Pull complete
Digest: sha256:4b8ff392a12ed9ea17784bd3c9a8b1fa3299cac44aca35a85c90c5e3c7afacdc
Status: Downloaded newer image for hello-world:latest

Hello from Docker!
This message shows that your installation appears to be working correctly.
...
</code></pre>
<p>O Docker inicialmente não conseguiu encontrar a imagem <code>hello-world</code> localmente, então ele baixou a imagem do Docker Hub, que é o repositório padrão. Uma vez baixada a imagem, o Docker criou um container da imagem e executou o aplicativo no container, mostrando a mensagem.</p>

<p>Você pode procurar imagens disponíveis no Docker Hub usando o comando <code>docker</code> com o subcomando <code>search</code>. Por exemplo, para procurar a imagem do Ubuntu, digite:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">docker search ubuntu
</li></ul></code></pre>
<p>O script irá vasculhar o Docker Hub e devolverá uma lista de todas as imagens cujo nome correspondam ao string de pesquisa. Neste caso, o resultado será similar a este:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>NAME                                                   DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED
ubuntu                                                 Ubuntu is a Debian-based Linux operating sys&hellip;   8320                [OK]
dorowu/ubuntu-desktop-lxde-vnc                         Ubuntu with openssh-server and NoVNC            214                                     [OK]
rastasheep/ubuntu-sshd                                 Dockerized SSH service, built on top of offi&hellip;   170                                     [OK]
consol/ubuntu-xfce-vnc                                 Ubuntu container with "headless" VNC session&hellip;   128                                     [OK]
ansible/ubuntu14.04-ansible                            Ubuntu 14.04 LTS with ansible                   95                                      [OK]
ubuntu-upstart                                         Upstart is an event-based replacement for th&hellip;   88                  [OK]
neurodebian                                            NeuroDebian provides neuroscience research s&hellip;   53                  [OK]
1and1internet/ubuntu-16-nginx-php-phpmyadmin-mysql-5   ubuntu-16-nginx-php-phpmyadmin-mysql-5          43                                      [OK]
ubuntu-debootstrap                                     debootstrap --variant=minbase --components=m&hellip;   39                  [OK]
nuagebec/ubuntu                                        Simple always updated Ubuntu docker images w&hellip;   23                                      [OK]
tutum/ubuntu                                           Simple Ubuntu docker images with SSH access     18
i386/ubuntu                                            Ubuntu is a Debian-based Linux operating sys&hellip;   13
1and1internet/ubuntu-16-apache-php-7.0                 ubuntu-16-apache-php-7.0                        12                                      [OK]
ppc64le/ubuntu                                         Ubuntu is a Debian-based Linux operating sys&hellip;   12
eclipse/ubuntu_jdk8                                    Ubuntu, JDK8, Maven 3, git, curl, nmap, mc, &hellip;   6                                       [OK]
darksheer/ubuntu                                       Base Ubuntu Image -- Updated hourly             4                                       [OK]
codenvy/ubuntu_jdk8                                    Ubuntu, JDK8, Maven 3, git, curl, nmap, mc, &hellip;   4                                       [OK]
1and1internet/ubuntu-16-nginx-php-5.6-wordpress-4      ubuntu-16-nginx-php-5.6-wordpress-4             3                                       [OK]
pivotaldata/ubuntu                                     A quick freshening-up of the base Ubuntu doc&hellip;   2
1and1internet/ubuntu-16-sshd                           ubuntu-16-sshd                                  1                                       [OK]
ossobv/ubuntu                                          Custom ubuntu image from scratch (based on o&hellip;   0
smartentry/ubuntu                                      ubuntu with smartentry                          0                                       [OK]
1and1internet/ubuntu-16-healthcheck                    ubuntu-16-healthcheck                           0                                       [OK]
pivotaldata/ubuntu-gpdb-dev                            Ubuntu images for GPDB development              0
paasmule/bosh-tools-ubuntu                             Ubuntu based bosh-cli                           0                                       [OK]
...
</code></pre>
<p>Na coluna <strong>OFFICIAL</strong>, o <strong>OK</strong> indica uma imagem construída e suportada pela empresa por trás do projeto. Uma vez que você tenha identificado a imagem que você gostaria de usar, você pode baixá-la para seu computador usando o subcomando <code>pull</code>.</p>

<p>Execute o comando a seguir para baixar a imagem oficial <code>ubuntu</code> no seu computador:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">docker pull ubuntu
</li></ul></code></pre>
<p>Você verá o seguinte resultado:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>Using default tag: latest
latest: Pulling from library/ubuntu
6b98dfc16071: Pull complete
4001a1209541: Pull complete
6319fc68c576: Pull complete
b24603670dc3: Pull complete
97f170c87c6f: Pull complete
Digest: sha256:5f4bdc3467537cbbe563e80db2c3ec95d548a9145d64453b06939c4592d67b6d
Status: Downloaded newer image for ubuntu:latest
</code></pre>
<p>Após o download de uma imagem, você pode então executar um container usando a imagem baixada com o subcomando <code>run</code>. Como você viu com o exemplo <code>hello-world</code>, caso uma imagem não tenha sido baixada quando o <code>docker</code> for executado com o subcomando <code>run</code>, o cliente do Docker irá primeiro baixar a imagem e então executar um container usando ele.</p>

<p>Para ver as imagens que foram baixadas no seu computador, digite:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">docker images
</li></ul></code></pre>
<p>O resultado deve ser semelhante ao seguinte:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
ubuntu              latest              16508e5c265d        13 days ago         84.1MB
hello-world         latest              2cb0d9787c4d        7 weeks ago         1.85kB
</code></pre>
<p>Como você verá mais tarde neste tutorial, imagens que você usa para executar containers podem ser modificadas e usadas para gerar novas imagens, que podem então ser enviadas (*pushed *é o termo técnico) para o Docker Hub ou outros registros do Docker.</p>

<p>Vamos ver como executar containers mais detalhadamente.</p>

<h2 id="passo-5-—-executando-um-container-do-docker">Passo 5 — Executando um Container do Docker</h2>

<p>O container <code>hello-world</code> que você executou no passo anterior é um exemplo de um container que executa e finaliza após emitir uma mensagem de teste. Os containers podem ser muito mais úteis do que isso, e eles podem ser interativos. Afinal, eles são semelhantes a máquinas virtuais, apenas mais fáceis de usar.</p>

<p>Como um exemplo, vamos executar um container usando a última imagem do Ubuntu. A combinação dos switches <strong>-i</strong> e <strong>-t</strong> dá a você um acesso de shell interativo no container:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">docker run -it ubuntu
</li></ul></code></pre>
<p>Seu prompt de comando deve mudar para refletir o fato de você agora estar trabalhando dentro do container e deve assumir esta forma:</p>
<pre class="code-pre  second-environment"><code langs=""><div class="secondary-code-label " title="Output">Output</div>root@d9b100f2f636:/#
</code></pre>
<p>Observe o id do container no prompt de comando. Neste exemplo, é <code>d9b100f2f636</code>. Você precisará do ID do container mais tarde para identificar o container quando você quiser removê-lo.</p>

<p>Agora você pode executar qualquer comando dentro do container. Por exemplo, vamos atualizar o banco de dados do pacote dentro do container. Você não precisa prefixar nenhum comando com <code>sudo</code>, porque você está operando dentro do container como o usuário <strong>root</strong>:</p>
<pre class="code-pre custom_prefix second-environment"><code langs=""><ul class="prefixed"><li class="line" prefix="root@d9b100f2f636:/#">apt update
</li></ul></code></pre>
<p>Então, instale qualquer aplicativo nele. Vamos instalar o Node.js:</p>
<pre class="code-pre custom_prefix second-environment"><code langs=""><ul class="prefixed"><li class="line" prefix="root@d9b100f2f636:/#">apt install nodejs
</li></ul></code></pre>
<p>Isso instala o Node.js no container do repositório oficial do Ubuntu. Quando a instalação terminar, verifique se o Node.js está instalado:</p>
<pre class="code-pre custom_prefix second-environment"><code langs=""><ul class="prefixed"><li class="line" prefix="root@d9b100f2f636:/#">node -v
</li></ul></code></pre>
<p>Você verá o número da versão exibido no seu terminal:</p>
<pre class="code-pre  second-environment"><code langs=""><div class="secondary-code-label " title="Output">Output</div>v8.10.0
</code></pre>
<p>Qualquer alteração que você faça dentro do container apenas se aplica a esse container.</p>

<p>Para sair do container, digite <code>exit</code> no prompt.</p>

<p>Vamos ver como gerenciar os containers no nosso sistema a seguir.</p>

<h2 id="passo-6-—-gerenciando-os-containers-do-docker">Passo 6 — Gerenciando os Containers do Docker</h2>

<p>Após usar o Docker por um tempo, você terá muitos containers ativos (executando) e inativos no seu computador. Para visualizar os <strong>ativos</strong>, use:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">docker ps
</li></ul></code></pre>
<p>Você verá um resultado similar ao seguinte:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>CONTAINER ID        IMAGE               COMMAND             CREATED             

</code></pre>
<p>Neste tutorial, você iniciou dois containers; um da imagem <code>hello-world</code> e outro da imagem <code>ubuntu</code>. Ambos os containers já não estão funcionando, mas eles ainda existem no seu sistema.</p>

<p>Para ver todos os containers — ativos e inativos, execute <code>docker ps</code> com o switch <code>-a</code>:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">docker ps -a
</li></ul></code></pre>
<p>Você verá um resultado similar a este:</p>
<pre class="code-pre "><code langs="">d9b100f2f636        ubuntu              "/bin/bash"         About an hour ago   Exited (0) 8 minutes ago                           sharp_volhard
01c950718166        hello-world         "/hello"            About an hour ago   Exited (0) About an hour ago                       festive_williams

</code></pre>
<p>Para ver o último container que você criou, passe o switch <code>-l</code>:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">docker ps -l
</li></ul></code></pre><pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES
</li><li class="line" prefix="$">d9b100f2f636        ubuntu              "/bin/bash"         About an hour ago   Exited (0) 10 minutes ago                       sharp_volhard
</li></ul></code></pre>
<p>Para iniciar um container parado, use o <code>docker start</code>, seguido do ID do container ou nome do container. Vamos iniciar o container baseado no Ubuntu com o ID do <code>d9b100f2f636</code>:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">docker start <span class="highlight">d9b100f2f636</span>
</li></ul></code></pre>
<p>O container irá iniciar e você pode usar o <code>docker ps</code> para ver seu status:</p>
<pre class="code-pre "><code langs="">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
d9b100f2f636        ubuntu              "/bin/bash"         About an hour ago   Up 8 seconds                            sharp_volhard

</code></pre>
<p>Para parar um container em execução, use o <code>docker stop</code>, seguido do ID ou nome do container. Desta vez, usaremos o nome que o Docker atribuiu ao container, que é <code>sharp_volhard</code>:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">docker stop <span class="highlight">sharp_volhard</span>
</li></ul></code></pre>
<p>Uma vez que você tenha decidido que você já não precisa mais de um container, remova ele com o comando <code>docker rm</code>, novamente usando o ID do container ou o nome. Use o comando <code>docker ps -a</code> para encontrar o ID ou nome do container associado à imagem <code>hello-world</code> e remova-o.</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">docker rm <span class="highlight">festive_williams</span>
</li></ul></code></pre>
<p>Você pode iniciar um novo container e dar a ele um nome usando o switch <code>--name</code>. Você também pode usar o switch <code>--rm</code> para criar um container que remove a si mesmo quando ele é parado. Veja o comando <code>docker run help</code> para obter mais informações sobre essas e outras opções.</p>

<p>Os containers podem ser transformados em imagens que você pode usar para criar novos containers. Vamos ver como isso funciona.</p>

<h2 id="passo-7-—enviando-alterações-em-um-container-para-uma-imagem-do-docker">Passo 7 —Enviando Alterações em um Container para uma Imagem do Docker</h2>

<p>Quando você iniciar uma imagem do Docker, você pode criar, modificar e deletar arquivos assim como você pode com uma máquina virtual. As alterações que você faz apenas se aplicarão a esse container. Você pode iniciá-lo e pará-lo, mas uma vez que você o destruir com o comando <code>docker rm</code>, as alterações serão perdidas para sempre.</p>

<p>Esta seção mostra como salvar o estado de um container como uma nova imagem do Docker.</p>

<p>Após instalar o Node.js dentro do container do Ubuntu, você agora tem um container executando uma imagem, mas o container é diferente da imagem que você usou para criá-lo. Mas você pode querer reutilizar este container Node.js como a base para novas imagens mais tarde.</p>

<p>Então, envie as alterações a uma nova instância de imagem do Docker usando o comando a seguir.</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">docker commit -m "What you did to the image" -a "Author Name" <span class="highlight">container_id</span> <span class="highlight">repository</span>/<span class="highlight">new_image_name</span>
</li></ul></code></pre>
<p>O switch *<em>-m *</em>é para a mensagem de envio que ajuda você e outros a saber quais as alterações que você fez, enquanto *<em>-a *</em>é usado para especificar o autor. O <code>container_id</code> é aquele que você anotou anteriormente no tutorial quando você iniciou a sessão interativa do Docker. A menos que você tenha criado repositórios adicionais no Docker Hub, <code>repository</code> é normalmente seu nome de usuário do Docker Hub.</p>

<p>Por exemplo, para o usuário <strong>sammy</strong>, com o ID do container <code>d9b100f2f636</code>, o comando seria:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">docker commit -m "added Node.js" -a "<span class="highlight">sammy</span>" <span class="highlight">d9b100f2f636</span> <span class="highlight">sammy</span>/ubuntu-nodejs
</li></ul></code></pre>
<p>Quando você *envia *uma imagem, a nova imagem é salva localmente no seu computador. Mais tarde neste tutorial, você aprenderá como empurrar uma imagem para um registro do Docker para que outros possam acessá-la.</p>

<p>Listando as imagens do Docker novamente irá mostrar a nova imagem, além da antiga da qual ela foi derivada:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">docker images
</li></ul></code></pre>
<p>Você verá um resultado como esse:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>REPOSITORY               TAG                 IMAGE ID            CREATED             SIZE
<span class="highlight">sammy</span>/ubuntu-nodejs   latest              7c1f35226ca6        7 seconds ago       179MB
ubuntu                   latest              113a43faa138        4 weeks ago         81.2MB
hello-world              latest              e38bc07ac18e        2 months ago        1.85kB

</code></pre>
<p>Neste exemplo, o <code>ubuntu-nodejs</code> é a nova imagem, que foi derivada da imagem <code>ubuntu</code> existente do Docker Hub. A diferença de tamanho reflete as alterações que foram feitas. E neste exemplo, a mudança foi que o NodeJS foi instalado. Então, da próxima vez que você precisar executar um container usando o Ubuntu com o NodeJS pré-instalado, você pode apenas usar a nova imagem.</p>

<p>Você também pode construir Imagens de um <code>Dockerfile</code>, que permite a você automatizar a instalação de software em uma nova imagem. No entanto, isso está fora do âmbito deste tutorial.</p>

<p>Agora vamos compartilhar a nova imagem com outros para que eles possam criar containers a partir dela.</p>

<h2 id="passo-8-—-empurrando-imagens-do-docker-para-um-repositório-do-docker">Passo 8 — Empurrando Imagens do Docker para um Repositório do Docker</h2>

<p>O próximo passo lógico após criar uma nova imagem de uma imagem existente é compartilhá-la com alguns de seus amigos, todo o mundo no Docker Hub, ou outro registro do Docker que você tenha acesso. Para empurrar uma imagem para o Docker Hub ou qualquer outro registro do Docker, você deve ter uma conta lá.</p>

<p>Esta seção mostra como empurrar uma imagem do Docker para o Docker Hub. Para aprender a criar seu próprio registro privado do Docker, verifique <a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-a-private-docker-registry-on-ubuntu-14-04">Como Configurar um Registro Privado do Docker no Ubuntu 14.04</a>.</p>

<p>Para empurrar sua imagem, primeiro logue no Docker Hub.</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">docker login -u <span class="highlight">docker-registry-username</span>
</li></ul></code></pre>
<p>Você será solicitado a autenticar-se usando sua senha do Docker Hub. Se você especificou a senha correta, a autenticação deve ser bem sucedida.</p>

<span class='note'><p>
<strong>Nota:</strong> Se seu nome de usuário de registro do Docker for diferente do nome de usuário local que você usou para criar a imagem, você terá que anexar sua imagem com seu nome de usuário de registro. Para o exemplo dado no último passo, você digitaria:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">docker tag <span class="highlight">sammy</span>/ubuntu-nodejs <span class="highlight">docker-registry-username</span>/ubuntu-nodejs
</li></ul></code></pre>
<p></p></span>

<p>Então você pode empurrar sua própria imagem usando:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">docker push <span class="highlight">docker-registry-username</span>/<span class="highlight">docker-image-name</span>
</li></ul></code></pre>
<p>Para empurrar a imagem <code>ubuntu-nodejs</code> no repositório <strong>sammy</strong>, o comando seria:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">docker push <span class="highlight">sammy</span>/<span class="highlight">ubuntu-nodejs</span>
</li></ul></code></pre>
<p>O processo pode levar algum tempo para se completar uma vez que ele envia as imagens, mas quando finalizado, o resultado se parecerá com este:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>The push refers to a repository [docker.io/<span class="highlight">sammy</span>/ubuntu-nodejs]
e3fbbfb44187: Pushed
5f70bf18a086: Pushed
a3b5c80a4eba: Pushed
7f18b442972b: Pushed
3ce512daaf78: Pushed
7aae4540b42d: Pushed

...


</code></pre>
<p>Após empurrar uma imagem para um registro, ela deve estar listada no painel da sua conta, como mostrado na imagem abaixo.</p>

<p><img src="https://assets.digitalocean.com/articles/docker_1804/ec2vX3Z.png" alt="New Docker image listing on Docker Hub"></p>

<p>Se uma tentativa de empurrar resultar em um erro deste tipo, então você provavelmente não logou:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>The push refers to a repository [docker.io/<span class="highlight">sammy</span>/ubuntu-nodejs]
e3fbbfb44187: Preparing
5f70bf18a086: Preparing
a3b5c80a4eba: Preparing
7f18b442972b: Preparing
3ce512daaf78: Preparing
7aae4540b42d: Waiting
unauthorized: authentication required
</code></pre>
<p>Logue com <code>docker login</code> e repita a tentativa de empurrar. Então verifique se ela existe na sua página de repositório do Docker Hub.</p>

<p>Você agora pode usar o <code>docker pull <span class="highlight">sammy</span>/<span class="highlight">ubuntu-nodejs</span></code> para puxar a imagem para uma nova máquina e usá-la para executar um novo container.</p>

<h2 id="conclusão">Conclusão</h2>

<p>Neste tutorial você instalou o Docker, trabalhou com imagens e containers, e empurrou uma imagem modificada para o Docker Hub. Agora que você sabe o básico, explore os <a href="https://www.digitalocean.com/community/tags/docker?type=tutorials">outros tutoriais do Docker</a> na Comunidade DigitalOcean.</p>
