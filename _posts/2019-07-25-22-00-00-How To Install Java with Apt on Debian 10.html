---
layout: post
title: How To Install Java with Apt on Debian 10
network: digitalocean
date: July 25, 2019 at 10:00PM
url: https://www.digitalocean.com/community/tutorials/how-to-install-java-with-apt-on-debian-10
image: https://assets.digitalocean.com/articles/apt-install-java/downloads-page.png
tags: docker
feedtitle: DigitalOcean Community Tutorials
feedurl: https://www.digitalocean.com/community/tutorials
author: DigitalOcean
---
<h3 id="introduction">Introduction</h3>

<p>Java and the JVM (Java Virtual Machine) are required for many kinds of software, including <a href="http://tomcat.apache.org/">Tomcat</a>, <a href="https://www.eclipse.org/jetty/">Jetty</a>, <a href="https://javaee.github.io/glassfish/">Glassfish</a>, <a href="https://cassandra.apache.org/">Cassandra</a> and <a href="https://jenkins.io/">Jenkins</a>.</p>

<p>In this guide, you will install different versions of the Java Runtime Environment (JRE) and the Java Developer Kit (JDK) using Debian's <code>apt</code> package management system.</p>

<p>You'll install OpenJDK 11 as well as the official Java 11 software from Oracle. You'll then select the version you wish to use for your projects. When you're finished, you'll be able to use the JDK to develop software or use the Java Runtime to run software.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>To begin this tutorial, you will need:</p>

<ul>
<li>One Debian 10 server with a non-root, <code>sudo</code>-enabled user. You can set this up by following our <a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-debian-10">Debian 10 initial server setup guide</a>.</li>
</ul>

<h2 id="installing-the-default-jre-jdk">Installing the Default JRE/JDK</h2>

<p>The easiest option for installing Java is to use the version packaged with Debian. By default, Debian 10 includes OpenJDK version 11, which is an open-source variant of the JRE and JDK, and is compatible with Java 11.</p>

<p>Java 11 is the current Long Term Support version of Java.</p>

<p>To install the OpenJDK version of Java, first update your <code>apt</code> package index:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt update
</li></ul></code></pre>
<p>Next, check if Java is already installed:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">java -version
</li></ul></code></pre>
<p>If Java is not currently installed, you'll see the following output:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>-bash: java: command not found
</code></pre>
<p>Then use the <code>apt install</code> command to install OpenJDK:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt install default-jre
</li></ul></code></pre>
<p>This will install the Java Runtime Environment (JRE), allowing you to run almost all Java software. </p>

<p>Verify the installation with:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">java -version
</li></ul></code></pre>
<p>You'll see the following output:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>openjdk version "11.0.4" 2019-07-16
OpenJDK Runtime Environment (build 11.0.4+11-post-Debian-1deb10u1)
OpenJDK 64-Bit Server VM (build 11.0.4+11-post-Debian-1deb10u1, mixed mode, sharing)
</code></pre>
<p>You may also need the Java Development Kit (JDK) in order to compile and run some specific Java-based software. To install the JDK, execute the following command:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt install default-jdk
</li></ul></code></pre>
<p>Verify that the JDK is installed by checking the version of <code>javac</code>, the Java compiler:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">javac -version
</li></ul></code></pre>
<p>You'll see the following output:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>javac 11.0.4
</code></pre>
<p>Next, let's look at how to install Oracle's official JDK and JRE.</p>

<h2 id="installing-the-oracle-jdk">Installing the Oracle JDK</h2>

<p>To install the official Oracle JDK, we'll need to download some files directly from Oracle, then install them using an installer we'll fetch from a third-party repository.</p>

<p>First, let's download Java from Oracle's website.</p>

<h3 id="downloading-oracle-39-s-java-se-software-package">Downloading Oracle's Java SE Software Package</h3>

<p>Due to recent changes in the way Oracle handles Java licensing, you'll need to create an Oracle account and download the software directly from their website before continuing with the installation.</p>

<p>If you don't already have an Oracle account, create one at <a href="https://profile.oracle.com/myprofile/account/create-account.jspx">Oracle's account creation page</a>.</p>

<p>Afterwards, navigate to <a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html">Oracle's Java SE Downloads page</a>:</p>

<p><img src="https://assets.digitalocean.com/articles/apt-install-java/downloads-page.png" alt="the Oracle Java downloads webpage"></p>

<p>We need to make sure we're downloading the correct version  of Java, because it needs to match what the installer is expecting. We can check what version the installer needs by visiting the <a href="https://launchpad.net/%7Elinuxuprising/+archive/ubuntu/java/+packages">package listing</a> of the installer's software repository.</p>

<p>We'll download the install from this repository in the next step, but for now look for the <code>oracle-java11-installer-local...</code> files:</p>

<p><img src="https://assets.digitalocean.com/articles/apt-install-java/package-list.png" alt="a screenshot of the linuxuprising java installer package list"></p>

<p>In this case, we can see that the installer is expecting version 11.0.4. Ignore any number that comes after the <code>-</code> hyphen in the package version number (<code>1</code> in the example screenshot above).</p>

<p>Now that we know the correct version number, scroll down the Java download page until you find the correct version:</p>

<p><img src="https://assets.digitalocean.com/articles/apt-install-java/download-link.png" alt="a screenshot showing the location of the Oracle JDK download button"></p>

<p>Press the download button, and you'll be taken to one final screen:</p>

<p><img src="https://assets.digitalocean.com/articles/apt-install-java/download-selection.png" alt="a screenshot of the Java download options"></p>

<p>Select the <strong>Accept License Agreement</strong> radio button, then click the <code>.tar.gz</code> package for Linux, and your download will begin. You may need to log in to your Oracle account one more time before the download starts.</p>

<p>After the download has finished, we need to get the downloaded file onto our server. We will use the <code>scp</code> command to do so, but you could use any file transfer software you're comfortable with.</p>

<p>On your local computer, use <code>scp</code> to upload the file to your server. The following command assumes your file downloaded to a <strong>Downloads</strong> directory in your user's home folder, and will upload to the <strong>sammy</strong> user's home directory on the server. Adjust the file paths as needed for your systems:</p>
<pre class="code-pre command local-environment"><code langs=""><ul class="prefixed"><li class="line" prefix="$">scp ~/Downloads/jdk-<span class="highlight">11.0.4</span>_linux-x64_bin.tar.gz  <span class="highlight">sammy</span>@<span class="highlight">your_server_ip</span>:~
</li></ul></code></pre>
<p>Now that we've got the correct Java software package up on our server, let's add the repo that contains the installer we'll use to install Java.</p>

<h3 id="adding-the-installer-39-s-apt-repository">Adding the Installer's Apt Repository</h3>

<p>First, install the <code>software-properties-common</code> package, which adds the <code>add-apt-repository</code> command to your system:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt install software-properties-common
</li></ul></code></pre>
<p>Next, import the signing key used to verify the software we're about to install:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys EA8CACC073C3DB2A
</li></ul></code></pre>
<p>Then we use the <code>add-apt-repository</code> command to add the repo to our list of package sources:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo add-apt-repository ppa:linuxuprising/java
</li></ul></code></pre>
<p>You'll see this message:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div> Oracle Java 11 (LTS) and 12 installer for Ubuntu, Linux Mint and Debian.

Java binaries are not hosted in this PPA due to licensing. The packages in this PPA download and install Oracle Java 11, so a working Internet connection is required.

The packages in this PPA are based on the WebUpd8 Oracle Java PPA packages: https://launchpad.net/~webupd8team/+archive/ubuntu/java

Created for users of https://www.linuxuprising.com/

Installation instructions (with some tips), feedback, suggestions, bug reports etc.:

. . .

Press [ENTER] to continue or ctrl-c to cancel adding it
</code></pre>
<p>Press <code>ENTER</code> to continue the installation. You'll may see a message about <code>no valid OpenPGP data found</code>. This can be ignored.</p>

<p>Finally, update your package list to make the new software available for installation:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt update
</li></ul></code></pre>
<p>Next we'll, install the Java package using the new software we just made available.</p>

<h3 id="installing-the-downloaded-java-software">Installing the Downloaded Java Software</h3>

<p>First, we need to create a specific directory that the installer uses to find the Java software package, then copy the <code>.tar.gz</code> file in:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo mkdir -p /var/cache/oracle-jdk11-installer-local/
</li><li class="line" prefix="$">sudo cp ~/jdk-<span class="highlight">11.0.4</span>_linux-x64_bin.tar.gz /var/cache/oracle-jdk11-installer-local/
</li></ul></code></pre>
<p>Once the file copy is complete, install Oracle's Java 11 by installing the <code>oracle-java11-installer-local</code> package:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt install oracle-java11-installer-local
</li></ul></code></pre>
<p>The installer will first ask you to accept the Oracle license agreement. Accept the agreement, then the installer will extract the Java package and install it.</p>

<p>Now that we have multiple versions of Java installed, let's look at how to select which version of Java you want to use.</p>

<h2 id="managing-java">Managing Java</h2>

<p>You can have multiple Java installations on one server. You can configure which version is the default for use on the command line by using the <code>update-alternatives</code> command.</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo update-alternatives --config java
</li></ul></code></pre>
<p>This is what the output would look like if you've installed both versions of Java in this tutorial:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>There are 2 choices for the alternative java (providing /usr/bin/java).

  Selection    Path                                         Priority   Status
------------------------------------------------------------
  0            /usr/lib/jvm/java-11-openjdk-amd64/bin/java   1111      auto mode
  1            /usr/lib/jvm/java-11-openjdk-amd64/bin/java   1111      manual mode
* 2            /usr/lib/jvm/java-11-oracle/bin/java          1091      manual mode

Press &lt;enter&gt; to keep the current choice[*], or type selection number:
</code></pre>
<p>Choose the number associated with the Java version to use it as the default, or press <code>ENTER</code> to leave the current settings in place.</p>

<p>You can do this for other Java commands, such as the compiler (<code>javac</code>):</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo update-alternatives --config <span class="highlight">javac</span>
</li></ul></code></pre>
<p>Other commands for which this command can be run include, but are not limited to: <code>keytool</code>, <code>javadoc</code>, and <code>jarsigner</code>.</p>

<p>Let's set the <code>JAVA_HOME</code> environment variable next.</p>

<h2 id="setting-the-java_home-environment-variable">Setting the <code>JAVA_HOME</code> Environment Variable</h2>

<p>Many programs written in Java use the <code>JAVA_HOME</code> environment variable to determine which Java installation location to use. </p>

<p>To set this environment variable,  first determine where Java is installed. Use the <code>update-alternatives</code> command again:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo update-alternatives --config java
</li></ul></code></pre>
<p>This command shows each installation of Java along with its installation path:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>  Selection    Path                                         Priority   Status
------------------------------------------------------------
  0            /usr/lib/jvm/java-11-openjdk-amd64/bin/java   1111      auto mode
  1            /usr/lib/jvm/java-11-openjdk-amd64/bin/java   1111      manual mode
* 2            /usr/lib/jvm/java-11-oracle/bin/java          1091      manual mode
</code></pre>
<p>In this case the installation paths are as follows:</p>

<ul>
<li>Oracle Java 11 is located at <code>/usr/lib/jvm/java-11-oracle/bin/java</code>.</li>
<li>OpenJDK 11 is located at <code>/usr/lib/jvm/java-11-openjdk-amd64/bin/java</code>.</li>
</ul>

<p>These paths show the path to the <code>java</code> executable. </p>

<p>Copy the path for your preferred installation, excluding the trailing <code>bin/java</code> component. Then open <code>/etc/environment</code> using <code>nano</code> or your favorite text editor:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo nano /etc/environment
</li></ul></code></pre>
<p>This file may be blank initially. At the end of the file, add the following line, making sure to replace the highlighted path with your own copied path:</p>
<div class="code-label " title="/etc/environment">/etc/environment</div><pre class="code-pre "><code langs="">JAVA_HOME="<span class="highlight">/usr/lib/jvm/java-11-oracle/</span>"
</code></pre>
<p>Modifying this file will set the <code>JAVA_HOME</code> path for all users on your system.</p>

<p>Save the file and exit the editor.</p>

<p>Now reload this file to apply the changes to your current session:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">source /etc/environment
</li></ul></code></pre>
<p>Verify that the environment variable is set:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">echo $JAVA_HOME
</li></ul></code></pre>
<p>You'll see the path you just set:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div><span class="highlight">/usr/lib/jvm/java-11-oracle/</span>
</code></pre>
<p>Other users will need to execute the command <code>source /etc/environment</code> or log out and log back in to apply this setting.</p>

<h2 id="conclusion">Conclusion</h2>

<p>In this tutorial you installed multiple versions of Java and learned how to manage them. You can now install software which runs on Java, such as Tomcat, Jetty, Glassfish, Cassandra or Jenkins.</p>
