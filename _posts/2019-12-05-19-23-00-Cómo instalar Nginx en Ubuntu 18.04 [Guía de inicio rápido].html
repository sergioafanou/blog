---
layout: post
title: Cómo instalar Nginx en Ubuntu 18.04 [Guía de inicio rápido]
network: digitalocean
date: December 05, 2019 at 07:23PM
url: https://www.digitalocean.com/community/tutorials/como-instalar-nginx-en-ubuntu-18-04-guia-de-inicio-rapido-es
image: https://assets.digitalocean.com/articles/nginx_1604/default_page.png
tags: docker
feedtitle: DigitalOcean Community Tutorials
feedurl: https://www.digitalocean.com/community/tutorials
author: DigitalOcean
---
<h3 id="introducción">Introducción</h3>

<p>Nginx es uno de los servidores web más populares del mundo y aloja algunos de los sitios más grandes y con mayor tráfico en Internet. Es más fácil de utilizar que Apache en la mayoría de los casos y puede emplearse como servidor web o proxy inverso.</p>

<p>En esta guía, explicaremos la manera de instalar Nginx en su servidor de Ubuntu 18.04. Para acceder a una versión más detallada de este tutorial, consulte <a href="https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-18-04">Cómo instalar Nginx en Ubuntu 18.04</a>.</p>

<h2 id="requisitos-previos">Requisitos previos</h2>

<p>Antes de comenzar a usar esta guía, debería contar con lo siguiente:</p>

<ul>
<li>Un servidor de Ubuntu 18.04 y un usuario regular no root con privilegios sudo. Además, deberá habilitar un firewall básico para que bloquee los puertos que no sean esenciales. Para aprender a configurar una cuenta normal de usuario e instalar un firewall, siga nuestra <a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-18-04">guía de configuración inicial para Ubuntu 18.04</a>.</li>
</ul>

<p>Cuando disponga de una cuenta, inicie sesión como usuario no root para comenzar.</p>

<h2 id="paso-1-instalar-nginx">Paso 1: Instalar Nginx</h2>

<p>Debido aq ue Nginx está disponible en los repositorios predeterminados de Ubuntu, puede instalarlo utilizando el sistema de paquetes <code>apt</code>.</p>

<p>Actualice su índice local de paquetes:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt update
</li></ul></code></pre>
<p>Instale Nginx:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt install nginx
</li></ul></code></pre>
<h2 id="paso-2-ajustar-el-firewall">Paso 2: Ajustar el firewall</h2>

<p>Si siguió el tutorial de configuración del servidor de los requisitos previos, tendrá habilitado el firewall UFW. Compruebe los perfiles de aplicaciones <code>ufw</code> disponibles con el siguiente comando:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo ufw app list
</li></ul></code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>Available applications:
  Nginx Full
  Nginx HTTP
  Nginx HTTPS
  OpenSSH
</code></pre>
<p>Habilitaremos el perfil más restrictivo, el cual de todas formas permitirá el tráfico que configuró y con ello el tráfico en el puerto <code>80</code>:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo ufw allow 'Nginx HTTP'
</li></ul></code></pre>
<p>Verifique el cambio:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo ufw status
</li></ul></code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>Status: active

To                         Action      From
--                         ------      ----
OpenSSH                    ALLOW       Anywhere                  
Nginx HTTP                 ALLOW       Anywhere                  
OpenSSH (v6)               ALLOW       Anywhere (v6)             
Nginx HTTP (v6)            ALLOW       Anywhere (v6)
</code></pre>
<h2 id="paso-3-comprobar-su-servidor-web">Paso 3: Comprobar su servidor web</h2>

<p>Realice una verificación con el sistema init <code>systemd</code> para saber si se encuentra en ejecución el servicio escribiendo lo siguiente:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">systemctl status nginx
</li></ul></code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>● nginx.service - A high performance web server and a reverse proxy server
   Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled)
   Active: <span class="highlight">active (running)</span> since Fri 2018-04-20 16:08:19 UTC; 3 days ago
     Docs: man:nginx(8)
 Main PID: 2369 (nginx)
    Tasks: 2 (limit: 1153)
   CGroup: /system.slice/nginx.service
           ├─2369 nginx: master process /usr/sbin/nginx -g daemon on; master_process on;
           └─2380 nginx: worker process
</code></pre>
<p>A través su dirección IP, acceda a la página de destino predeterminada de Nginx para confirmar que el software funcione de forma correcta:</p>
<pre class="code-pre "><code langs="">http://<span class="highlight">your_server_ip</span>
</code></pre>
<p>Debería ver la página de destino predeterminada de Nginx:</p>

<p><img src="https://assets.digitalocean.com/articles/nginx_1604/default_page.png" alt="Página predeterminada de Nginx"></p>

<h2 id="paso-4-configurar-bloques-de-servidor-recomendable">Paso 4: Configurar bloques de servidor (recomendable)</h2>

<p>Al emplear el servidor web Nginx, puede utilizar _bloques de servidor _(similares a hosts virtuales de Apache) para encapsular detalles de configuración y alojar más de un dominio desde un único servidor. Configuraremos un dominio llamado <strong>example.com</strong>, pero debería <strong>cambiarlo por su propio nombre de dominio</strong>. Consulte nuestra <a href="https://www.digitalocean.com/community/tutorials/an-introduction-to-digitalocean-dns">Introducción a DNS de DigitalOcean</a> para hallar más información sobre la configuración de un nombre de dominio con DigitalOcean.</p>

<p>Cree el directorio para <code><span class="highlight">example.com</span></code>, utilizando el indicador <code>-p</code> para crear cualquier directorio principal necesario:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo mkdir -p /var/www/<span class="highlight">example.com</span>/html
</li></ul></code></pre>
<p>Asigne la propiedad del directorio:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo chown -R $USER:$USER /var/www/<span class="highlight">example.com</span>/html
</li></ul></code></pre>
<p>Los permisos de sus root web deberían ser correctos si no modificó su valor <code>umask</code>, pero puede comprobarlo escribiendo lo siguiente:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo chmod -R 755 /var/www/<span class="highlight">example.com</span>
</li></ul></code></pre>
<p>Cree una página de ejemplo <code>index.html</code> utilizando <code>nano</code> o su editor favorito:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">nano /var/www/<span class="highlight">example.com</span>/html/index.html
</li></ul></code></pre>
<p>Dentro de ella, agregue el siguiente ejemplo de HTML:</p>
<div class="code-label " title="/var/www/example.com/html/index.html">/var/www/example.com/html/index.html</div><pre class="code-pre "><code langs="">&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Welcome to <span class="highlight">Example.com</span>!&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Success!  The <span class="highlight">example.com</span> server block is working!&lt;/h1&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Guarde y cierre el archivo cuando termine.</p>

<p>Cree un nuevo bloque de servidor en <code>/etc/nginx/sites-available/<span class="highlight">example.com</span></code>:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo nano /etc/nginx/sites-available/<span class="highlight">example.com</span>
</li></ul></code></pre>
<p>Péguelo en el siguiente bloque de configuración, actualizado para nuestro nuevo directorio y nombre de dominio:</p>
<div class="code-label " title="/etc/nginx/sites-available/example.com">/etc/nginx/sites-available/example.com</div><pre class="code-pre "><code langs="">server {
        listen 80;
        listen [::]:80;

        root /var/www/<span class="highlight">example.com</span>/html;
        index index.html index.htm index.nginx-debian.html;

        server_name <span class="highlight">example.com</span> www.<span class="highlight">example.com</span>;

        location / {
                try_files $uri $uri/ =404;
        }
}
</code></pre>
<p>Guarde y cierre el archivo cuando termine.</p>

<p>Habilite el archivo creando un enlace entre él y el directorio <code>sites-enabled</code>:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo ln -s /etc/nginx/sites-available/<span class="highlight">example.com</span> /etc/nginx/sites-enabled/
</li></ul></code></pre>
<p>Con esto, quedarán habilitados y configurados dos bloques de servidor para responder a solicitudes según sus directivas <code>listen</code> y <code>server_name</code>:</p>

<ul>
<li><code>example.com</code>: responderá a solicitudes de <code>example.com</code> y <code>www.example.com</code>.</li>
<li><code>default</code>: responderá a cualquier solicitud en el puerto <code>80</code> que no coincida con los otros dos bloques.</li>
</ul>

<p>Para evitar un posible problema problema de memoria de depósito hash que pueda surgir al agregar nombres de servidor adicionales, es necesario ajustar un valor en el archivo <code>/etc/nginx/nginx.conf</code>. Abra el archivo:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo nano /etc/nginx/nginx.conf
</li></ul></code></pre>
<p>Encuentre la directiva <code>server_names_hash_bucket_size</code> y elimine el símbolo <code>#</code> para eliminar el comentario de la línea:</p>
<div class="code-label " title="/etc/nginx/nginx.conf">/etc/nginx/nginx.conf</div><pre class="code-pre "><code langs="">...
http {
    ...
    server_names_hash_bucket_size 64;
    ...
}
...
</code></pre>
<p>Realice una prueba en busca de errores de sintaxis:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo nginx -t
</li></ul></code></pre>
<p>Reinicie Nginx para habilitar sus cambios:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl restart nginx
</li></ul></code></pre>
<p>Con esto, Nginx debería proporcionar su nombre de dominio. Puede probar esto visitando <code>http://<span class="highlight">example.com</span></code>. Allí, debería ver algo como lo siguiente:</p>

<p><img src="https://assets.digitalocean.com/articles/nginx_server_block_1404/first_block.png" alt="Primer bloque de servidor de Nginx"></p>

<h2 id="conclusión">Conclusión</h2>

<p>Una vez instalado su servidor web, tiene muchas opciones respecto del tipo de contenido que ofrecerá y de las tecnologías que desee usar para crear una experiencia más completa.</p>

<p>Si desea compilar una pila de aplicaciones más completa, consulte este artículo sobre <a href="https://www.digitalocean.com/community/tutorials/how-to-install-linux-nginx-mysql-php-lemp-stack-ubuntu-18-04">cómo configurar una pila LEMP en Ubuntu 18.04</a>.</p>
