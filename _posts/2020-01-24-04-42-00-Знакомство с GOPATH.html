---
layout: post
title: Знакомство с GOPATH
network: digitalocean
date: January 24, 2020 at 04:42AM
url: https://www.digitalocean.com/community/tutorials/understanding-the-gopath-ru
image: http://ifttt.com/images/no_image_card.png
tags: docker
feedtitle: DigitalOcean Community Tutorials
feedurl: https://www.digitalocean.com/community/tutorials
author: DigitalOcean
---
<h3 id="Введение">Введение</h3>

<p>Из этой статьи вы узнаете о GOPATH, принципах работы и настройке <code>GOPATH</code>. Это важный шаг для настройки среды разработки Go и понимания процесса поиска, установки и сборки исходных файлов Go. В этой статье мы будем использовать термин <code>GOPATH</code> для описания обсуждаемой концепции структуры папок. Термин <code>$GOPATH</code> будет означать переменную среды, используемую Go для поиска структуры папок.</p>

<p><a href="https://golang.org/doc/code.html#Workspaces">Рабочее пространство Go</a> используется Go для управления исходными файлами, скомпилированными двоичными файлами и кэшированными объектами, используемыми впоследствии для ускорения компиляции. Обычно рекомендуется использовать только одно рабочее пространство Go, хотя их может быть и несколько. <code>GOPATH</code> выступает в качестве корневой папки рабочего пространства.</p>

<h2 id="Настройка-переменной-среды-gopath">Настройка переменной среды <code>$GOPATH</code></h2>

<p>Переменная среды <code>$GOPATH</code> перечисляет места, где Go ищет рабочие пространства Go.</p>

<p>По умолчанию Go использует в качестве <code>GOPATH</code> расположение <code>$HOME/go</code>, где <code>$HOME</code> — корневой каталог учетной записи пользователя нашего компьютера. Для изменения этой настройки следует изменить переменную среды <code>$GOPATH</code>. Дополнительную информацию можно найти в обучающем модуле по <a href="https://www.digitalocean.com/community/tutorials/how-to-read-and-set-environmental-and-shell-variables-on-a-linux-vps">чтению и настройке переменных среды в Linux</a>.</p>

<p>Дополнительную информацию по настройке переменной <code>$GOPATH</code> можно найти в <a href="https://golang.org/doc/code.html#Workspaces">документации</a> по Go.</p>

<p>Кроме того, из этой <a href="https://www.digitalocean.com/community/tutorial_series/how-to-install-and-set-up-a-local-programming-environment-for-go">серии</a> вы можете подробно узнать об установке Go и настройке среды разработки Go.</p>

<h2 id="gopath-—-это-не-goroot"><code>$GOPATH</code> — это не <code>$GOROOT</code></h2>

<p>Переменная <code>$GOROOT</code> определяет расположение кода Go, компилятора и инструментов, а <strong>не</strong> нашего исходного кода. Переменная <code>$GOROOT</code> обычно имеет значение вида <code>/usr/local/go</code>. Переменная <code>$GOPATH</code> обычно имеет значение вида <code>$HOME/go</code>.</p>

<p>Хотя явно задавать переменную <code>$GOROOT</code> больше не нужно, она все еще упоминается в старых материалах.</p>

<p>Теперь поговорим о структуре рабочего пространства Go.</p>

<h2 id="Анатомия-рабочего-пространства-go">Анатомия рабочего пространства Go</h2>

<p>Внутри рабочего пространства Go или <code>GOPATH</code> содержится три каталога: <code>bin</code>, <code>pkg</code> и <code>src</code>. Каждый из этих каталогов имеет особое значение для цепочки инструментов Go.</p>
<pre class="code-pre "><code class="code-highlight language-bash">.
├── bin
├── pkg
└── src
  └── github.com/foo/bar
    └── bar.go
</code></pre>
<p>Давайте посмотрим на каждый из этих каталогов.</p>

<p>Каталог <code>$GOPATH/bin</code> — это место, где Go размещает двоичные файлы, компилируемые <code>go install</code>. Операционная система использует переменную среды <code>$PATH</code> для поиска двоичных приложений, которые могут выполняться без полного пути. Рекомендуется добавить этот каталог в глобальную переменную <code>$PATH</code>.</p>

<p>Например, если мы не добавим <code>$GOPATH/bin</code> в <code>$PATH</code> для выполнения программы, нам нужно будет выполнять запуск следующим образом:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">$GOPATH/bin/myapp
</li></ul></code></pre>
<p>При добавлении <code>$GOPATH/bin</code> в <code>$PATH</code> мы можем вызвать программу примерно так:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">myapp
</li></ul></code></pre>
<p>Каталог <code>$GOPATH/pkg</code> используется Go для хранения предварительно скомпилированных объектных файлов для ускорения последующей компиляции программ. Большинству разработчиков этот каталог не потребуется. Если у вас возникнут проблемы при компиляции, вы можете спокойно удалить этот каталог, и Go воссоздаст его.</p>

<p>В каталоге <code>src</code> должны находиться все наши файлы <code>.go</code> или исходный код. Их не следует путать с исходным кодом, который используют инструменты Go, и который находится в каталоге <code>$GOROOT</code>. При написании приложений, пакетов и библиотек Go мы помещаем эти файлы в каталог <code>$GOPATH/src/path/to/code</code>.</p>

<h2 id="Что-такое-пакеты">Что такое пакеты?</h2>

<p>Код Go организован в виде пакетов. Пакет представляет собой все файлы в одном каталоге на диске. Один каталог может содержать только определенные файлы из этого же пакета. Пакеты хранятся вместе со всеми созданными пользователем исходными файлами Go в каталоге <code>$GOPATH/src</code>. Импорт разных пакетов поможет легко понять принципы обработки пакетов.</p>

<p>Если наш код находится в каталоге <code>$GOPATH/src/blue/red</code>, его имя пакета будет <code>red</code>.</p>

<p>Выражение импорта пакета <code>red</code> будет выглядеть следующим образом:</p>
<pre class="code-pre "><code class="code-highlight language-go">import "blue/red"
</code></pre>
<p>Пакеты, находящиеся в репозиториях исходного кода, таких как GitHub и BitBucket, содержат полный адрес репозитория как часть пути импорта.</p>

<p>Например, мы можем импортировать исходный код по адресу <a href="https://github.com/gobuffalo/buffalo">https://github.com/gobuffalo/buffalo</a>, используя следующий путь импорта:</p>
<pre class="code-pre "><code class="code-highlight language-go">import "github.com/gobuffalo/buffalo"
</code></pre>
<p>Поэтому исходный код будет располагаться в следующем каталоге на диске:</p>
<pre class="code-pre "><code langs="">$GOPATH/src/github.com/gobuffalo/buffalo
</code></pre>
<h2 id="Заключение">Заключение</h2>

<p>В этой статье мы рассказали о <code>GOPATH</code> как о наборе папок, где Go ожидает видеть наш исходный код, описали эти папки и рассказали об их содержимом. Также мы показали, как можно сменить расположение по умолчанию <code>$HOME/go</code> на выбранное пользователем расположение посредством настройки переменной среды <code>$GOPATH</code>. В заключение мы показали, как Go ищет пакеты в структуре папок.</p>

<p>В версии Go 1.11 были введены <a href="https://github.com/golang/go/wiki/Modules">модули Go</a>, призванные заменить рабочие пространства Go и <code>GOPATH</code>. Хотя мы рекомендуем начать использовать модули, некоторые среды, в том числе среды корпоративных сетей, могут быть еще не готовы к использованию модулей.</p>

<p><code>GOPATH</code> — один из сложных аспектов настройки Go, однако после завершения настройки о нем можно забыть.</p>
