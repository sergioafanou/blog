---
layout: post
title: Установка веб-фреймворка Django в Ubuntu 18.04
network: digitalocean
date: January 07, 2020 at 07:49PM
url: https://www.digitalocean.com/community/tutorials/how-to-install-the-django-web-framework-on-ubuntu-18-04-ru
image: https://assets.digitalocean.com/articles/django_install_18_04/django_landing_page_18_04.png
tags: docker
feedtitle: DigitalOcean Community Tutorials
feedurl: https://www.digitalocean.com/community/tutorials
author: DigitalOcean
---
<h3 id="Введение">Введение</h3>

<p><a href="https://www.djangoproject.com/">Django</a> — это полноценный веб-фреймворк, написанный на Python и предназначенный для разработки динамических веб-сайтов и приложений. Используя Django, вы сможете быстро создать веб-приложения на Python и выполнить большую часть сложной работы с помощью фреймфорка.</p>

<p>В этом руководстве вы настроите и запустите Django на сервере Ubuntu 18.04. После установки вы начнете новый проект, который будет использован в качестве основы для вашего сайта.</p>

<h2 id="Различные-методы">Различные методы</h2>

<p>Существуют разные способы установки Django в зависимости от ваших потребностей и того, как вы хотите настроить среду разработки. Методы обладают разными преимуществами, и какой-то конкретный метод может лучше подходить для вашей конкретной ситуации, чем другие.</p>

<p>Ниже представлены некоторые из этих методов:</p>

<ul>
<li><strong>Глобальная установка из пакетов:</strong> официальные репозитории Ubuntu содержат пакеты Django, которые могут быть установлены с помощью традиционного менеджера пакетов <code>apt</code>. Это простой метод, но он не обладает такой гибкостью, как ряд других методов. Кроме того, версия, содержащаяся в репозиториях, может отличаться от последних официальных версий, доступных в проекте.</li>
<li><strong>Установка с помощью <code>pip</code> в виртуальной среде:</strong> вы можете создать самодостаточную среду для ваших проектов, используя такие инструменты, как <code>venv</code> и <code>virtualenv</code>. Виртуальная среда позволяет установить Django директорию проекта без воздействия систему в широком масштабе, наряду с другими настройками и пакетами для отдельного проекта. Это самый практичный и рекомендуемый метод работы с Django.</li>
<li><strong>Установка версии для разработчиков с помощью <code>git</code>:</strong> если вы хотите установить последнюю версию для разработчиков вместо стабильной версии, вы можете воспользоваться кодом из репозитория Git. Это необходимо для получения доступа к последним функциям и исправлениям, а установка выполняется в виртуальной среде. Однако версии для разработчиков не не обладают такой же гарантированной стабильностью, как более стабильные версии.</li>
</ul>

<h2 id="Предварительные-требования">Предварительные требования</h2>

<p>Перед началом установки у вас должен быть пользователь без прав root с привилегиями sudo на сервере Ubuntu 18.04. Для настройки такой системы следуйте нашему <a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-18-04">руководству по начальной настройке сервера Ubuntu 18.04</a>.</p>

<h2 id="Глобальная-установка-из-пакетов">Глобальная установка из пакетов</h2>

<p>Если вы хотите установить Django, используя репозитории Ubuntu, процесс установки не вызовет никаких сложностей.</p>

<p>Во-первых, обновите локальный индекс пакетов с помощью <code>apt</code>:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt update
</li></ul></code></pre>
<p>Затем необходимо проверить, какую версию Python вы установили. С версией 18.04 по умолчанию поставляется Python 3.6, а вы можете проверить это с помощью следующей команды:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">python3 -V
</li></ul></code></pre>
<p>Результат должен выглядеть следующим образом:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>Python <span class="highlight">3.6.5</span>
</code></pre>
<p>Затем установите установку Django:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt install python3-django
</li></ul></code></pre>
<p>Вы можете проверить, что установка выполнена успешно, введя следующую команду:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">django-admin --version
</li></ul></code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div><span class="highlight">1.11.11</span>
</code></pre>
<p>Это означает, что программное обеспечение было успешно установлено. Также вы можете заметить, что установленная версия Django не является последней стабильной версией. Чтобы узнать больше о том, как использовать программное обеспечение, пропустите дальнейшую информацию и перейдите к <a href="https://www.digitalocean.com/community/tutorials/how-to-install-the-django-web-framework-on-ubuntu-18-04#creating-a-sample-project">разделу о том, как создать образец проекта</a>.</p>

<h2 id="Установка-с-помощью-pip-в-виртуальной-среде">Установка с помощью pip в виртуальной среде</h2>

<p>Наиболее гибкий метод установки Django в вашей системе — использование виртуальной среды. Мы покажем, как установить Django в виртуальной среде, которую мы создадим с помощью модуля <code>venv</code>, который является частью стандартной библиотеки Python 3. Этот инструмент позволяет создавать виртуальную среду Python и устанавливать пакеты Python без какого-либо воздействия на остальные элементы системы. Таким образом, вы сможете выбирать пакеты Python согласно нуждам отдельного проекта, не обращая внимание на возможные конфликты с требованиями других проектов.</p>

<p>Давайте начнем с обновления локального индекса пакетов:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt update
</li></ul></code></pre>
<p>Проверьте установленную версию Python:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">python3 -V
</li></ul></code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>Python <span class="highlight">3.6.5</span>
</code></pre>
<p>Затем мы установим <code>pip</code> из репозиториев Ubuntu:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt install python3-pip
</li></ul></code></pre>
<p>После установки <code>pip</code> вы сможете использовать его для установки пакета <code>venv</code>:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt install python3-venv
</li></ul></code></pre>
<p>Теперь при запуске нового проекта вы сможете создать для него виртуальную среду. Для этого нужно создать и перейти к созданной директории проекта:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">mkdir ~/<span class="highlight">newproject</span>
</li><li class="line" prefix="$">cd ~/<span class="highlight">newproject</span>
</li></ul></code></pre>
<p>Затем создайте виртуальную среду в директории проекта, используя команду <code>python</code>, совместимую с вашей версией Python. Мы назовем нашу виртуальную среду <code><span class="highlight">my_env</span></code>, но вы должны дать ей какое-то понятное название:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">python3<span class="highlight">.6</span> -m venv <span class="highlight">my_env</span>
</li></ul></code></pre>
<p>В результате должны быть установлены отдельные версии Python и <code>pip</code> в изолированную структуру директорий внутри директории вашего проекта. Будет создана директория с выбранным вами именем, в которой будет храниться иерархия файлов, где будут установлены ваши пакеты.</p>

<p>Чтобы установить пакеты в изолированную среду, вы должны активировать ее с помощью следующей команды:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">source <span class="highlight">my_env</span>/bin/activate
</li></ul></code></pre>
<p>Ваше командная строка должна измениться, отражая переход в виртуальную среду. Он будет выглядеть примерно так: <code>(<span class="highlight">my_env</span>)username@hostname:~/newproject$</code>.</p>

<p>В новой среде вы сможете использовать <code>pip</code> для установки Django. Независимо от используемой вами версии Python <code>pip</code> должен называть только <code>pip</code>, когда вы находитесь в виртуальной среде. Также необходимо отметить, что вы <em>не</em> должны использовать <code>sudo</code>, поскольку вы выполняете установку локально:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="(my_env) $">pip install django
</li></ul></code></pre>
<p>Для проверки установки введите:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="(my_env) $">django-admin --version
</li></ul></code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div><span class="highlight">2.1</span>
</code></pre>
<p>Обратите внимание, что ваша версия может отличаться от представленной здесь версии.</p>

<p>Чтобы покинуть вашу виртуальную среду, вам нужно воспользоваться командой  <code>deactivate</code> из любого места в системе:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="(my_env) $">deactivate
</li></ul></code></pre>
<p>Ваша командная строка должна вернуться к обычному отображению. Когда вы захотите продолжить работу над вашим проектом, перезапустите свою виртуальную среду, перейдя в директорию проекта и выполните активацию:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">cd ~/<span class="highlight">newproject</span>
</li><li class="line" prefix="$">source <span class="highlight">my_env</span>/bin/activate
</li></ul></code></pre>
<h2 id="Установка-версии-для-разработчиков-с-помощью-git">Установка версии для разработчиков с помощью Git</h2>

<p>Если вам потребуется версия Django для разработчиков, вы можете скачать и установить Django из репозитория в Git. Давайте сделаем это в виртуальной среде.</p>

<p>Во-первых, давайте обновим локальный индекс пакетов:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt update
</li></ul></code></pre>
<p>Проверьте установленную версию Python:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">python3 -V
</li></ul></code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>Python <span class="highlight">3.6.5</span>
</code></pre>
<p>Затем установите <code>pip</code> из официальных репозиториев:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt install python3-pip
</li></ul></code></pre>
<p>Установите пакет <code>venv</code>, чтобы создать свою виртуальную среду:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt install python3-venv
</li></ul></code></pre>
<p>Следующий шаг — клонирование репозитория Django. В период между релизами этот репозиторий содержит более современные функции и исправления с максимально возможной стабильностью. Вы можете клонировать репозиторий в каталог с названием <code>~/<span class="highlight">django-dev</span></code> внутри домашнего каталога, введя следующую команду:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">git clone git://github.com/django/django ~/<span class="highlight">django-dev</span>
</li></ul></code></pre>
<p>Перейдите в эту директорию:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">cd ~/<span class="highlight">django-dev</span>
</li></ul></code></pre>
<p>Создайте виртуальную среду, используя команду <code>python</code>, совместимую с установленной версией Python:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">python3<span class="highlight">.6</span> -m venv <span class="highlight">my_env</span>
</li></ul></code></pre>
<p>Активируйте ее:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">source <span class="highlight">my_env</span>/bin/activate
</li></ul></code></pre>
<p>Затем вы сможете установить репозиторий с помощью <code>pip</code>. Вариант <code>-e</code> будет установлена в режим с разрешением редактирования, что необходимо при установке с помощью системы управления версиями:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="(my_env) $">pip install -e ~/<span class="highlight">django-dev</span>
</li></ul></code></pre>
<p>Вы можете убедиться, что установка выполнена успешно, введя следующую команду:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">django-admin --version
</li></ul></code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div><span class="highlight">2.2.dev20180802155335</span>
</code></pre>
<p>Как отмечалось выше, отображаемая версия может не соответствовать показанной здесь.</p>

<p>Теперь у вас есть последняя версия Django в вашей виртуальной среде.</p>

<h2 id="Создание-образца-проекта">Создание образца проекта</h2>

<p>После установки Django вы сможете начать создание вашего проекта. Сейчас мы изучим процесс создания проекта и протестируем его на вашем сервере для разработки, используя виртуальную среду.</p>

<p>Во-первых, создайте директорию для вашего проекта и измените ее с помощью следующей команды:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">mkdir ~/<span class="highlight">django-test</span>
</li><li class="line" prefix="$">cd ~/<span class="highlight">django-test</span>
</li></ul></code></pre>
<p>Затем создайте свою виртуальную среду:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">python3<span class="highlight">.6</span> -m venv <span class="highlight">my_env</span>
</li></ul></code></pre>
<p>Активируйте среду:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">source <span class="highlight">my_env</span>/bin/activate
</li></ul></code></pre>
<p>Установите Django:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="(my_env) $">pip install django
</li></ul></code></pre>
<p>Для создания вашего проекта вы можете использовать <code>django-admin</code> с  командой <code>startproject</code>. Мы назовем наш проект <code><span class="highlight">djangoproject</span></code>, но вы можете задать собственное имя. <code>startproject</code> создаст внутри текущего рабочего каталога подкаталог, включающий следующее:</p>

<ul>
<li>Скрипт управления <code>manage.py</code>, который можно использовать для администрирования различных задач в Django.</li>
<li>Директорию (с таким же именем, что и проект), которая содержит актуальный код проекта.</li>
</ul>

<p>Чтобы избежать использования слишком большого количества вложенных директорий, нужно указать для Django размещение скрипта управления и внутренней директории в <em>текущей</em> директории (обратите внимание на точку в конце):</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="(my_env) $">django-admin startproject <span class="highlight">djangoproject</span> .
</li></ul></code></pre>
<p>Чтобы выполнить миграцию базы данных (этот пример использует SQLite по умолчанию), воспользуемся командой <code>migrate</code> и <code>manage.py</code>. <a href="https://docs.djangoproject.com/en/2.0/topics/migrations/">При миграции</a> применяются все изменения, внесенные в ваши <a href="https://www.digitalocean.com/community/tutorials/how-to-create-django-models">модели</a> Django, для схемы вашей базы данных.</p>

<p>Чтобы выполнить миграцию базы данных, введите:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="(my_env) $">python manage.py migrate
</li></ul></code></pre>
<p>Вы увидите следующий результат:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>Operations to perform:
  Apply all migrations: admin, auth, contenttypes, sessions
Running migrations:
  Applying contenttypes.0001_initial... OK
  Applying auth.0001_initial... OK
  Applying admin.0001_initial... OK
  Applying admin.0002_logentry_remove_auto_add... OK
  Applying admin.0003_logentry_add_action_flag_choices... OK
  Applying contenttypes.0002_remove_content_type_name... OK
  Applying auth.0002_alter_permission_name_max_length... OK
  Applying auth.0003_alter_user_email_max_length... OK
  Applying auth.0004_alter_user_username_opts... OK
  Applying auth.0005_alter_user_last_login_null... OK
  Applying auth.0006_require_contenttypes_0002... OK
  Applying auth.0007_alter_validators_add_error_messages... OK
  Applying auth.0008_alter_user_username_max_length... OK
  Applying auth.0009_alter_user_last_name_max_length... OK
  Applying sessions.0001_initial... OK
</code></pre>
<p>В заключение мы создадим административного пользователя, чтобы вы могли использовать <a href="https://www.digitalocean.com/community/tutorials/how-to-enable-and-connect-the-django-admin-interface">интерфейс администратора Django</a>. Давайте сделаем это с помощью команды <code>createsuperuser</code>:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="(my_env) $">python manage.py createsuperuser
</li></ul></code></pre>
<p>Вам будет предложено ввести имя пользователя, адрес электронной почты и пароль вашего пользователя.</p>

<h2 id="Изменение-allowed_hosts-в-настройках-django">Изменение ALLOWED_HOSTS в настройках Django</h2>

<p>Чтобы успешно протестировать ваше приложение, вам нужно будет изменить одну из директив в настройках Django.</p>

<p>Откройте файл настроек, введя следующую команду:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="(my_env) $">nano ~/<span class="highlight">django-test</span>/<span class="highlight">djangoproject</span>/settings.py
</li></ul></code></pre>
<p>Внутри файла найдите директиву <code>ALLOWED_HOSTS</code>. Она определяет список разрешенных адресов или доменных имен, которые могут быть использованы для подключения к экземпляру Django. Входящий запрос с заголовком <strong>Host</strong>, не включенный в этот список, будет вызывать исключение. Django требует, чтобы вы использовали эту настройку, чтобы предотвратить использование определенного класса уязвимости безопасности.</p>

<p>В квадратных скобках перечислите IP-адреса или доменные имена, связанные с вашим сервером Django. Каждый элемент должен быть указан скобках, а отдельные записи разделяются запятой. Если вы хотите добавить весь домен и любые поддомены, добавьте точку перед началом записи:</p>
<div class="code-label " title="~/django-test/djangoproject/settings.py">~/django-test/djangoproject/settings.py</div><pre class="code-pre "><code langs="">. . .
ALLOWED_HOSTS = ['<span class="highlight">your_server_ip_or_domain</span>', '<span class="highlight">your_second_ip_or_domain</span>', <span class="highlight">. . .</span>]
</code></pre>
<p>После завершения редактирования сохраните файл и закройте редактор.</p>

<h2 id="Тестирование-сервера-для-разработки">Тестирование сервера для разработки</h2>

<p>Если у вас есть пользователь, вы сможете запустить сервер для разработки Django, чтобы узнать, как выглядит новый проект Django. Вы должны использовать это только для разработки. Когда вы будете готовы к развертыванию, вы должны тщательно следовать инструкциям <a href="https://docs.djangoproject.com/en/2.1/howto/deployment/checklist/">руководства Django по развертыванию</a>.</p>

<p>Прежде чем начать работу с сервером для разработки, убедитесь, что вы открыли соответствующий порт в брандмауэре. Если вы выполнили руководство по начальной настройке сервера и используете UFW, вы можете открыть порт <code>8000</code> с помощью следующей команды:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="(my_env) $">sudo ufw allow 8000
</li></ul></code></pre>
<p>Запустите сервер разработки:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="(my_env) $">python manage.py runserver <span class="highlight">your_server_ip</span>:8000
</li></ul></code></pre>
<p>Откройте в браузере IP-адрес вашего сервера с суффиксом <code>:8000</code>:</p>
<pre class="code-pre "><code langs="">http://<span class="highlight">your_server_ip</span>:8000
</code></pre>
<p>Вы должны увидеть примерно следующее:</p>

<p><img src="https://assets.digitalocean.com/articles/django_install_18_04/django_landing_page_18_04.png" alt="Открытая страница Django"></p>

<p>Чтобы получить доступ к интерфейсу администратора, добавьте <code>/admin/</code> в конец URL:</p>
<pre class="code-pre "><code langs="">http://<span class="highlight">your_server_ip</span>:8000/admin/
</code></pre>
<p>В этом случае вы увидите экран для входа:</p>

<p><img src="https://assets.digitalocean.com/articles/eng_python/django/django-admin-login.png" alt="Вход в панель администратора Django"></p>

<p>При вводе имени администратора и пароля, которые вы только что создали, вы получите доступ к основному административному разделу сайта:</p>

<p><img src="https://assets.digitalocean.com/articles/eng_python/django/django-admin-panel.png" alt="Страница администратора Django"></p>

<p>Дополнительную информацию о работе с интерфейсом администратора Django можно найти в статье <a href="https://www.digitalocean.com/community/tutorials/how-to-enable-and-connect-the-django-admin-interface">«Активация и подключение интерфейса администратора Django»</a>.</p>

<p>После завершения просмотра сайта по умолчанию вы можете остановить работу сервера разработки, введя <code>CTRL-C</code> в терминале.</p>

<p>Созданный вами проект Django обеспечивает структурную основу для разработки более сложного сайта. См. в документации Django, чтобы получить больше информации о создании приложений и настройке сайта.</p>

<h2 id="Заключение">Заключение</h2>

<p>Вы установили Django на сервер Ubuntu 18.04, а также предоставили основные инструменты, которые вам потребуются для создания мощных веб-приложений. Также теперь вы должны знать, как создать новый проект и запустить сервер для разработки. Использование такого мощного веб-фреймворка,как Django, может ускорить процесс разработки, а также сосредоточить внимание исключительно на уникальных аспектах ваших приложений.</p>

<p>Если вы хотите получить больше информации о работе с Django, включая подробные обсуждения таких вещей как <a href="https://www.digitalocean.com/community/tutorials/how-to-create-django-models">модели</a> и <a href="https://www.digitalocean.com/community/tutorials/how-to-create-django-views">представления</a>, ознакомьтесь с нашей <a href="https://www.digitalocean.com/community/tutorial_series/django-development">серией материалов о разработке с Django</a>.</p>
