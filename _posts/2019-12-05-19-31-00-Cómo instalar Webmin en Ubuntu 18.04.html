---
layout: post
title: Cómo instalar Webmin en Ubuntu 18.04
network: digitalocean
date: December 05, 2019 at 07:31PM
url: https://www.digitalocean.com/community/tutorials/como-instalar-webmin-en-ubuntu-18-04-es
image: https://assets.digitalocean.com/articles/webmin1804/RF2fRmB.png
tags: docker
feedtitle: DigitalOcean Community Tutorials
feedurl: https://www.digitalocean.com/community/tutorials
author: DigitalOcean
---
<p><em>El autor seleccionó el <a href="https://www.brightfunds.org/funds/tech-education">Tech Education Fund</a> para que recibiese una donación de $100 como parte del programa <a href="https://do.co/w4do-cta">Write for DOnations</a>.</em></p>

<h3 id="introducción">Introducción</h3>

<p><a href="http://www.webmin.com/">Webmin</a> es un panel de control basado en la Web para cualquier máquina con Linux que le permite administrar su servidor a través de una interfaz moderna basada en la Web. Con Webmin, puede cambiar los ajustes para paquetes comunes sobre la marcha, incluidos los servidores web y las bases de datos, así como administrar usuarios, grupos y paquetes de software.</p>

<p>A través de este tutorial, instalará y configurará Webmin en su servidor, y garantizará el acceso a la interfaz con un certificado válido usando <a href="https://letsencrypt.org/">Let´s Encrypt</a> y Apache. Luego, usará Webmin para añadir nuevas cuentas de usuario y actualizar todos los paquetes en su servidor desde el panel.</p>

<h2 id="requisitos-previos">Requisitos previos</h2>

<p>Para completar este tutorial, necesitará lo siguiente:</p>

<ul>
<li>Un servidor de Ubuntu 18.04 configurado mediante la <a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-18-04">guía de configuración inicial para servidores de Ubuntu 18.04</a>, un usuario sudo no root y un firewall.</li>
<li>Apache instalado siguiendo las indicaciones de <a href="https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-ubuntu-18-04">Cómo instalar una pila de Linux, Apache, MySQL, PHP (LAMP) en Ubuntu 18.04</a>. Usaremos Apache para ejecutar la verificación de dominio de Let&rsquo;s Encrypt y cumplir la función de un proxy para Webmin. Asegúrese de configurar el acceso a Apache a través de su firewall al seguir los pasos de este tutorial.</li>
<li>Un nombre de dominio completo (FQDN), con un registro DNS <strong>A</strong> orientado a la dirección IP de su servidor. Para configurarlo, siga el tutorial <a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-a-host-name-with-digitalocean">Cómo configurar un nombre de Host con DigitalOcean</a>.</li>
<li>Certbot instalado conforme al paso 1 de <a href="https://www.digitalocean.com/community/tutorials/how-to-secure-apache-with-let-s-encrypt-on-ubuntu-18-04">Cómo proteger Apache con Let´s Encrypt en Ubuntu 18.04</a>. Usará Certbot para generar el certificado TLS/SSL para Webmin.</li>
</ul>

<h2 id="paso-1-instalación-de-webmin">Paso 1: Instalación de Webmin</h2>

<p>En primer lugar, debemos añadir el repositorio Webmin para poder instalar y actualizar Webmin fácilmente usando nuestro administrador de paquetes. Esto se hace agregando el repositorio al archivo <code>/etc/apt/sources/.list</code>.</p>

<p>Abra el archivo en su editor:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo nano /etc/apt/sources.list
</li></ul></code></pre>
<p>A continuación, agregue esta línea en la parte inferior del archivo para agregar el nuevo repositorio:</p>
<div class="code-label " title="/etc/apt/sources.list">/etc/apt/sources.list</div><pre class="code-pre "><code langs="">. . . 
<span class="highlight">deb http://download.webmin.com/download/repository sarge contrib</span>
</code></pre>
<p>Guarde el archivo y cierre el editor.</p>

<p>A continuación, agregue la clave PGP de Webmin para que su sistema confíe en el nuevo repositorio:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">wget http://www.webmin.com/jcameron-key.asc
</li><li class="line" prefix="$">sudo apt-key add jcameron-key.asc
</li></ul></code></pre>
<p>Luego, actualice la lista de paquetes para que incluya el repositorio Webmin:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt update 
</li></ul></code></pre>
<p>A continuación, instale Webmin:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt install webmin 
</li></ul></code></pre>
<p>Cuando finalice la instalación, verá el siguiente resultado:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>Webmin install complete. You can now login to 
https://<span class="highlight">your_server_ip</span>:10000 as root with your 
root password, or as any user who can use `sudo`.
</code></pre>
<p>Ahora, garantizaremos el acceso a Webmin disponiéndolo detrás del servidor web Apache y añadiendo un certificado TLS/SSL válido.</p>

<h2 id="paso-2-protección-de-webmin-con-apache-y-let´s-encrypt">Paso 2: Protección de Webmin con Apache y Let´s Encrypt</h2>

<p>Para acceder a Webmin, debe especificar el puerto <code>10000</code> y comprobar que esté abierto en su firewall. Esto resulta inconveniente, en especial si accede a Webmin usando un FQDN como <code>webmin.<span class="highlight">your_domain.</span></code> Usaremos un host virtual Apache para solicitudes de proxy enviadas al servidor Webmin que funciona en el puerto <code>10000</code>. A continuación, protegeremos el host virtual usando un certificado TLS/SSL desde Let&rsquo;s Encrypt.</p>

<p>Primero, cree un nuevo archivo de host virtual de Apache en el directorio de configuración de Apache:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo nano /etc/apache2/sites-available/<span class="highlight">your_domain</span>.conf
</li></ul></code></pre>
<p>Agregue lo siguiente al archivo, sustituyendo la dirección de correo electrónico y el dominio por el suyo:</p>
<div class="code-label " title="/etc/apache2/sites-available/your_domain.conf">/etc/apache2/sites-available/your_domain.conf</div><pre class="code-pre "><code langs="">
&lt;VirtualHost *:80&gt;
        ServerAdmin <span class="highlight">your_email</span>
        ServerName <span class="highlight">your_domain</span>
        ProxyPass / http://localhost:10000/
        ProxyPassReverse / http://localhost:10000/
&lt;/VirtualHost&gt;

</code></pre>
<p>Esta configuración indica a Apache que apruebe solicitudes enviadas a <code>http://localhost:10000</code>, el servidor de Webmin. También garantiza que los enlaces internos generados desde Webmin pasen por Apache.</p>

<p>Guarde el archivo y cierre el editor.</p>

<p>A continuación, debemos indicar a Webmin que deje de usar TLS/SSL, ya que Apache nos lo proporcionará.</p>

<p>Abra el archivo <code>/etc/webmin/miniserv.conf</code> en su editor:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo nano /etc/webmin/miniserv.conf
</li></ul></code></pre>
<p>Encuentre la siguiente línea:</p>
<div class="code-label " title="/etc/webmin/miniserv.conf">/etc/webmin/miniserv.conf</div><pre class="code-pre "><code langs="">...
ssl=1
...
</code></pre>
<p>Cambie el <code>1</code> por un <code>0</code>. Esto indicará a Webmin que deje de usar SSL.</p>

<p>A continuación, agregaremos nuestro dominio a la lista de dominios permitidos, de modo que Webmin interprete que cuando accedemos al panel desde nuestro dominio no se trata de una operación malintencionada, como un <a href="https://www.owasp.org/index.php/Cross-site_Scripting_(XSS)">ataque de secuencias de comandos de sitios (XSS)</a>.</p>

<p>Abra el archivo <code>/etc/webmin/config</code> en su editor:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo nano /etc/webmin/config
</li></ul></code></pre>
<p>Agregue la siguiente línea a la parte final del archivo, sustituyendo <code>your_domain</code> por su nombre de dominio completo.</p>
<div class="code-label " title="/etc/webmin/config">/etc/webmin/config</div><pre class="code-pre "><code langs=""> . . . 
referers=<span class="highlight">your_domain</span>
</code></pre>
<p>Guarde el archivo y cierre el editor.</p>

<p>A continuación, reinicie Webmin para que se apliquen los cambios de configuración:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl restart webmin
</li></ul></code></pre>
<p>Luego, habilite el módulo <code>proxy_http</code> de Apache:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo a2enmod proxy_http
</li></ul></code></pre>
<p>Verá el siguiente resultado:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>Considering dependency proxy for proxy_http:
Enabling module proxy.
Enabling module proxy_http.
To activate the new configuration, you need to run:
  systemctl restart apache2
</code></pre>
<p>El resultado sugiere que reinicie Apache, pero primero debe activar el nuevo host virtual de Apache que creó:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo a2ensite <span class="highlight">your_domain</span>
</li></ul></code></pre>
<p>Verá el siguiente resultado, que indicará que su sitio está habilitado:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>Enabling site <span class="highlight">your_domain</span>.
To activate the new configuration, you need to run:
  systemctl reload apache2
</code></pre>
<p>Ahora, reinicie Apache completamente para activar el módulo <code>proxy_http</code> y el nuevo host virtual:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl restart apache2
</li></ul></code></pre>
<p><span class='note'><strong>Nota</strong>: Asegúrese de permitir el tráfico entrante en su servidor web los puertos <code>80</code> y <code>443</code> como se muestra en el tutorial de requisitos previos <a href="https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-ubuntu-18-04">Cómo instalar una pila de Linux, Apache, MySQL y PHP (LAMP) en Ubuntu 18.04</a>. Puede hacerlo con el comando <code>sudo ufw allow en "Apache Full"</code>.<br></span></p>

<p>Diríjase a <code>http://<span class="highlight">your_domain</span></code> en su navegador y verá la página de inicio de sesión de Webmin.</p>

<p><span class='warning'><strong>Advertencia:</strong> NO inicie sesión en Webmin aún; no hemos habilitado SSL. Si inicia sesión ahora, sus credenciales se enviarán al servidor en texto no cifrado.<br></span></p>

<p>Ahora, configuraremos un certificado para que su conexión esté cifrada mientras utiliza Webmin. Para hacerlo, utilizaremos Let&rsquo;s Encrypt.</p>

<p>Indique a Certbot que genere un certificado TLS/SSL para su dominio y configure Apache para que redireccione el tráfico al sitio seguro:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo certbot --apache --email <span class="highlight">your_email</span> -d <span class="highlight">your_domain</span> --agree-tos --redirect --noninteractive
</li></ul></code></pre>
<p>Verá el siguiente resultado:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>Saving debug log to /var/log/letsencrypt/letsencrypt.log
Plugins selected: Authenticator apache, Installer apache
Obtaining a new certificate
Performing the following challenges:
http-01 challenge for <span class="highlight">your_domain</span>
Enabled Apache rewrite module
Waiting for verification...
Cleaning up challenges
Created an SSL vhost at /etc/apache2/sites-available/<span class="highlight">your_domain</span>-le-ssl.conf
Enabled Apache socache_shmcb module
Enabled Apache ssl module
Deploying Certificate to VirtualHost /etc/apache2/sites-available/<span class="highlight">your_domain</span>-le-ssl.conf
Enabling available site: /etc/apache2/sites-available/<span class="highlight">your_domain</span>-le-ssl.conf
Enabled Apache rewrite module
Redirecting vhost in /etc/apache2/sites-enabled/<span class="highlight">your_domain</span>.conf to ssl vhost in /etc/apache2/sites-available/<span class="highlight">your_domain</span>-le-ssl.conf

-------------------------------------------------------------------------------
Congratulations! You have successfully enabled https://<span class="highlight">your_domain</span>

You should test your configuration at:
https://www.ssllabs.com/ssltest/analyze.html?d=<span class="highlight">your_domain</span>
-------------------------------------------------------------------------------
</code></pre>
<p>El resultado indica que el certificado se instaló y Apache está configurado para redireccionar solicitudes de <code>http://<span class="highlight">your_domain</span></code> a <code>https://<span class="highlight">your_domain</span></code>.</p>

<p>Con esto, habrá configurado una instancia de trabajo segura de Webmin. Veamos cómo usarlo.</p>

<h2 id="paso-3-uso-de-webmin">Paso 3: Uso de Webmin</h2>

<p>Webmin tiene módulos que pueden controlar todo, desde el servidor DNS de BIND hasta algo tan sencillo como la adición de usuarios al sistema. Veamos cómo crear un nuevo usuario y luego exploremos la forma de actualizar los paquetes de software usando Webmin.</p>

<p>Para iniciar sesión en Webmin, diríjase a <code>http:<span class="highlight">//your_domain</span></code> e ingrese con el usuario *<em>root *</em>o un usuario con privilegios sudo.</p>

<h3 id="gestión-de-usuarios-y-grupos">Gestión de usuarios y grupos</h3>

<p>Ahora, administraremos los usuarios y los grupos en el servidor.</p>

<p>Primero, haga clic en la pestaña <strong>Sistema</strong> y luego en el botón <strong>Usuarios y Grupos</strong>. Desde aquí puede añadir un usuario, administrarlo o añadir o administrar un grupo.</p>

<p>Crearemos un nuevo usuario llamado <strong>implementar</strong> que podría utilizarse para alojar aplicaciones web. Para agregar un usuario, haga clic en <strong>Crear un nuevo usuario</strong>, opción situada en la parte superior de la tabla de usuarios. Con esto se muestra la pantalla <strong>Crear usuario</strong>, en la que puede proporcionar el nombre de usuario, la contraseña, los grupos y otras opciones. Siga estas instrucciones para crear el usuario:</p>

<ol>
<li>Complete el campo <code>Nombre de usuario</code> con <strong>implementar</strong>.</li>
<li>Seleccione <strong>Automático</strong> para el campo <strong>ID de usuario</strong>.</li>
<li>Complete el campo <strong>Nombre verdadero</strong> con un nombre descriptivo, como <code>usuario de implementación</code>.</li>
<li>Para el campo <strong>Directorio de inicio</strong>, seleccione <strong>Automático</strong>.</li>
<li>Para <strong>Shell</strong>, seleccione *<em>/bin/bash *</em>en la lista desplegable.</li>
<li>Para <strong>Contraseña</strong>, seleccione <strong>Contraseña normal</strong> y escriba la que elija.</li>
<li>Para <strong>Grupo primario</strong>, seleccione <strong>Nuevo grupo con el mismo nombre que el de usuario</strong>.</li>
<li>Para <strong>Grupo secundario</strong>, seleccione <strong>sudo</strong> en la lista <strong>Todos los grupos</strong> y presione el botón <strong>-&gt;</strong> para agregar el grupo a la lista de <strong>en grupos</strong>.</li>
<li>Seleccione <strong>Crear</strong> para crear este nuevo usuario.</li>
</ol>

<p>Cuando cree un usuario, puede configurar opciones para el vencimiento de la contraseña, el shell del usuario o el hecho de que se le otorgue un directorio de inicio.</p>

<p>A continuación, veamos cómo instalar actualizaciones en nuestro sistema.</p>

<h3 id="actualización-de-paquetes">Actualización de paquetes</h3>

<p>Webmin le permite actualizar todos sus paquetes a través de su interfaz de usuario. Para actualizar todos sus paquetes, haga clic en el enlace  <strong>Panel</strong> y luego localice el campo  <strong>Actualizaciones de paquetes</strong>. Si hay actualizaciones disponibles, verá un enlace que indicará el número de actualizaciones disponibles, como se muestra en la siguiente figura:</p>

<p><img src="https://assets.digitalocean.com/articles/webmin1804/RF2fRmB.png" alt="Webmin muestra el número de actualizaciones de paquetes disponibles"></p>

<p>Haga clic en este enlace y luego presione *<em>Actualizar los paquetes seleccionados *</em>para iniciar la actualización. Es posible que se le solicite reiniciar el servidor, acción que también puede realizar a través de la interfaz de Webmin.</p>

<h2 id="conclusión">Conclusión</h2>

<p>Ahora contará con una instancia de trabajo segura de Webmin, y ha usado la interfaz para crear un usuario y actualizar paquetes. Webmin le brinda acceso a muchas cosas a las que normalmente tendría que acceder a través de la consola y las organiza de forma intuitiva. Por ejemplo, si tiene Apache instalado, encontraría la pestaña de configuración en <strong>Servidores</strong> y <strong>Apache</strong>.</p>

<p>Para obtener más información sobre la administración de su sistema con Webmin, explore más la interfaz o consulte el <a href="http://doxfer.webmin.com/Webmin/Main_Page">sitio wiki oficial de Webmin</a>.</p>
