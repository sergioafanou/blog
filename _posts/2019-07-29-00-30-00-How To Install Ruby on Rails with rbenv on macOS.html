---
layout: post
title: How To Install Ruby on Rails with rbenv on macOS
network: digitalocean
date: July 29, 2019 at 12:30AM
url: https://www.digitalocean.com/community/tutorials/how-to-install-ruby-on-rails-with-rbenv-on-macos
image: http://ifttt.com/images/no_image_card.png
tags: docker
feedtitle: DigitalOcean Community Tutorials
feedurl: https://www.digitalocean.com/community/tutorials
author: DigitalOcean
---
<h3 id="introduction">Introduction</h3>

<p><a href="https://rubyonrails.org">Ruby on Rails</a> is a popular application stack for developers looking to create sites and web apps. The <a href="https://www.ruby-lang.org/en/">Ruby programming language</a>, combined with the Rails development framework, makes app development quick and efficient.</p>

<p>One way to install Ruby and Rails is with the command-line tool <a href="https://github.com/rbenv/rbenv">rbenv</a>. Using rbenv will provide you with a well-controlled and robust environment for developing your Ruby on Rails applications, allowing you to easily switch the version of Ruby for your entire team when needed. </p>

<p>rbenv provides support for specifying application-specific versions of Ruby, lets you change the global Ruby for each user, and allows you to use an environment variable to override the Ruby version. </p>

<p>In this tutorial, you will use rbenv to install and set up Ruby on Rails on your local macOS machine.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>To follow this tutorial, you will need:</p>

<ul>
<li>One computer or virtual machine with macOS installed, with administrative access to that machine and an internet connection. This tutorial has been tested on <a href="https://www.apple.com/macos/mojave/">macOS 10.14 Mojave</a>.</li>
<li>Node.js installed on your macOS machine, as explained in <a href="https://www.digitalocean.com/community/tutorials/how-to-install-node-js-and-create-a-local-development-environment-on-macos">How to Install Node.js and Create a Local Development Environment on macOS</a>. A few Rails features, such as the <a href="https://guides.rubyonrails.org/asset_pipeline.html">Asset Pipeline</a>, depend on a JavaScript Runtime. Node.js provides this functionality.</li>
</ul>

<h2 id="step-1-—-installing-rbenv">Step 1 — Installing rbenv</h2>

<p>In this step, you will install rbenv and make sure that it starts automatically at boot. To do this on macOS, this tutorial will use the package manager <a href="https://brew.sh/">Homebrew</a>.</p>

<p>To download the <code>rbenv</code> package with Homebrew, run the following command:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">brew install rbenv
</li></ul></code></pre>
<p>This will install rbenv and the <a href="https://github.com/rbenv/ruby-build">ruby-build</a> plugin. This plugin adds the<code>rbenv install</code> command, which streamlines the installation process for new versions of Ruby.</p>

<p>Next, you'll add the command <code>eval "$(rbenv init -)"</code> to your <code>~/.bash_profile</code> file to make rbenv load automatically when you open up the Terminal. To do this, open your <code>.bash_profile</code> in your favorite text editor:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">nano .bash_profile
</li></ul></code></pre>
<p>Add the following line to the file:</p>
<div class="code-label " title="~/.bash_profile">~/.bash_profile</div><pre class="code-pre "><code langs="">eval "$(rbenv init -)"
</code></pre>
<p>Save and quit the file.</p>

<p>Next, apply the changes you made to your <code>~/.bash_profile</code> file to your current shell session:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">source ~/.bash_profile
</li></ul></code></pre>
<p>To verify that rbenv is set up properly, use the <code>type</code> command, which will display more information about the <code>rbenv</code> command:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">type rbenv
</li></ul></code></pre>
<p>Your terminal window will display the following:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>rbenv is a function
rbenv ()
{
    local command;
    command="${1:-}";
    if [ "$#" -gt 0 ]; then
        shift;
    fi;
    case "$command" in
        rehash | shell)
            eval "$(rbenv "sh-$command" "$@")"
        ;;
        *)
            command rbenv "$command" "$@"
        ;;
    esac
}
</code></pre>
<p>At this point, you have both rbenv and ruby-build installed on your machine. This will allow you to install Ruby from the command line in the next step.</p>

<h2 id="step-2-—-installing-ruby">Step 2 — Installing Ruby</h2>

<p>With the ruby-build plugin now installed, you can install any version of Ruby you may need through a single command. In this step, you will choose a version of Ruby, install it on your machine, and then verify the installation.</p>

<p>First, use the <code>-l</code> flag to list all the available versions of Ruby:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">rbenv install -l
</li></ul></code></pre>
<p>The output of that command will be a long list of versions that you can choose to install.</p>

<p>For this tutorial, install Ruby <span class="highlight">2.6.3</span>:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">rbenv install <span class="highlight">2.6.3</span>
</li></ul></code></pre>
<p>Installing Ruby can be a lengthy process, so be prepared for the installation to take some time to complete.</p>

<p>Once it's done installing, set it as your default version of Ruby with the <code>global</code> sub-command:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">rbenv global <span class="highlight">2.6.3</span>
</li></ul></code></pre>
<p>Verify that Ruby was properly installed by checking its version number:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">ruby -v
</li></ul></code></pre>
<p>Your output will look something like this:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>ruby 2.6.3p62 (2019-04-16 revision 67580) [x86_64-darwin18]
</code></pre>
<p>To install and use a different version of Ruby, run the <code>rbenv</code> commands with a different version number, such as <code>rbenv install <span class="highlight">2.3.0</span></code> and <code>rbenv global <span class="highlight">2.3.0</span></code>.</p>

<p>You now have one version of Ruby installed and have set your default Ruby version. Next, you will set yourself up to work with Ruby packages and libraries, or <em>gems</em>, which will then allow you to install Rails. </p>

<h2 id="step-3-—-working-with-gems">Step 3 — Working with Gems</h2>

<p><em>Gems</em> are packages of Ruby libraries and programs that can be distributed throughout the Ruby ecosystem. You use the <code>gem</code> command to manage these gems. In this step, you will configure the <code>gem</code> command to prepare for the Rails installation.</p>

<p>When you install a gem, the installation process generates local documentation. This can add a significant amount of time to each gem's installation process, so turn off local documentation generation by creating a file called <code>~/.gemrc</code> which contains a configuration setting to turn off this feature:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">echo "gem: --no-document" &gt; ~/.gemrc
</li></ul></code></pre>
<p>With that done, use the <code>gem</code> command to install <a href="https://bundler.io/">Bundler</a>, a tool that manages gem dependencies for projects. This is needed for Rails to work correctly:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">gem install bundler
</li></ul></code></pre>
<p>You'll see output like this:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>Fetching: bundler-<span class="highlight">2.0.2</span>.gem
Successfully installed bundler-<span class="highlight">2.0.2</span>
1 gem installed
</code></pre>
<p>You can use the <code>gem env</code> command to learn more about the environment and configuration of gems. To see the location of installed gems, use the <code>home</code> argument, like this:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">gem env home
</li></ul></code></pre>
<p>You'll see output similar to this:</p>
<pre class="code-pre "><code langs="">/Users/<span class="highlight">sammy</span>/.rbenv/versions/<span class="highlight">2.6.3</span>/lib/ruby/gems/<span class="highlight">2.6.0</span>
</code></pre>
<p>Now that you have set up and explored your gem workflow, you are free to install Rails.</p>

<h2 id="step-4-—-installing-rails">Step 4 — Installing Rails</h2>

<p>In this step, you will install Rails, verify the installation, and prepare it for use.</p>

<p>To install the most recent version of Rails, use the <code>gem install</code> command:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">gem install rails
</li></ul></code></pre>
<p>The <code>gem</code> command installs the gem you specify, as well as every dependency. Rails is a complex web development framework and has many dependencies, so the process will take some time to complete. Eventually you'll see a message stating that Rails is installed, along with its dependencies:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>...
Successfully installed rails-<span class="highlight">5.2.3</span>
38 gems installed
</code></pre>
<span class='note'><p>
<strong>Note</strong>: If you would like to install a specific version of Rails, you can list its valid versions by doing a search, which will output a long list of options:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">gem search '^rails$' --all
</li></ul></code></pre>
<p>You could then install a specific version, such as <span class="highlight">4.2.7</span>:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">gem install rails -v <span class="highlight">4.2.7</span>
</li></ul></code></pre>
<p></p></span>

<p>rbenv works by creating a directory of <em>shims</em>, or libraries that intercept calls and change or redirect them. In this case, shims point Ruby commands to the files used by the Ruby version that's currently enabled. Through the <code>rehash</code> sub-command, rbenv maintains shims in that directory to match every Ruby command across every installed version of Ruby on your server. Whenever you install a new version of Ruby or a gem that provides commands, such as Rails, you should use <code>rehash</code>.</p>

<p>To rehash the directory of shims, run the following command:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">rbenv rehash
</li></ul></code></pre>
<p>Verify your installation of Rails by printing its version with this command:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">rails -v
</li></ul></code></pre>
<p>You will see the version of Rails that was installed:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>Rails <span class="highlight">5.2.3</span>
</code></pre>
<p>With Rails successfully installed, you can begin testing your Ruby on Rails installation and start to develop web applications. In the next step, you will learn how to update and uninstall rbenv and Ruby.</p>

<h2 id="step-5-—-updating-and-uninstalling-rbenv-and-ruby">Step 5 — Updating and Uninstalling rbenv and Ruby</h2>

<p>When maintaining projects, it is useful to know how to update and uninstall when the need arises. In this step, you will upgrade rbenv, then uninstall Ruby and rbenv from your machine.</p>

<p>You can upgrade rbenv and ruby-build using Homebrew by running the following command:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">brew upgrade rbenv ruby-build
</li></ul></code></pre>
<p>If rbenv or ruby-build need to be updated, Homebrew will do it for you automatically. If your set up is already up to date, you will get output similar to the following:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>Error: rbenv <span class="highlight">1.1.2</span> already installed
Error: ruby-build <span class="highlight">20190615</span> already installed
</code></pre>
<p>This will ensure that we are using the most up-to-date version of rbenv available.</p>

<p>As you download additional versions of Ruby, you may accumulate more versions than you would like in your <code>~/.rbenv/versions</code> directory. Using the ruby-build plugin's <code>uninstall</code> subcommand, you can remove these previous versions. </p>

<p>For example, run the following to uninstall Ruby version <span class="highlight">2.1.3</span>:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">rbenv uninstall <span class="highlight">2.1.3</span>
</li></ul></code></pre>
<p>With the <code>rbenv uninstall</code> command you can clean up old versions of Ruby so that you do not have more installed than you are currently using.</p>

<p>If you've decided you no longer want to use rbenv, you can remove it from your system.</p>

<p>To do this, first open your <code>~/.bash_profile</code> file in your editor:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">nano ~/.bash_profile
</li></ul></code></pre>
<p>Find and remove the following line from the file to stop rbenv from starting when you open the Terminal:</p>
<div class="code-label " title="~/.bash_profile">~/.bash_profile</div><pre class="code-pre "><code langs="">...
eval "$(rbenv init -)"
</code></pre>
<p>Once you have deleted this line, save the file and exit the editor.</p>

<p>Run the following command to apply the changes to your shell:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">source ~/.bash_profile
</li></ul></code></pre>
<p>Next, remove rbenv and all installed Ruby versions with this command:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">rm -rf `rbenv root`
</li></ul></code></pre>
<p>Finally, remove the rbenv package itself with Homebrew:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">brew uninstall rbenv
</li></ul></code></pre>
<p>Check the rbenv version to make sure that it has been uninstalled:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">rbenv -v
</li></ul></code></pre>
<p>You will get the following output:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>]-bash: /usr/local/bin/rbenv: No such file or directory
</code></pre>
<p>This means that you have successfully removed rbenv from your machine.</p>

<h2 id="conclusion">Conclusion</h2>

<p>In this tutorial you installed Ruby on Rails with rbenv on macOS. From here, you can learn more about coding in Ruby with our <a href="https://www.digitalocean.com/community/tutorial_series/how-to-code-in-ruby">How To Code in Ruby</a> series. You can also explore how to use Ruby on Rails with <a href="https://www.digitalocean.com/community/tutorials/how-to-use-postgresql-with-your-ruby-on-rails-application-on-macos">PostgreSQL</a> rather than its default sqlite3 database, which provides more scalability, centralization, and stability for your applications.</p>
