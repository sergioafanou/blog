---
layout: post
title: Cómo instalar la pila Linux, Apache, MariaDB, PHP (LAMP) en Debian 9
network: digitalocean
date: January 21, 2020 at 10:06PM
url: https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mariadb-php-lamp-stack-debian9-es
image: http://assets.digitalocean.com/how-to-install-lamp-debian-9/small_apache_default_debian9.png
tags: docker
feedtitle: DigitalOcean Community Tutorials
feedurl: https://www.digitalocean.com/community/tutorials
author: DigitalOcean
---
<h3 id="introducción">Introducción</h3>

<p>Una pila “LAMP” es un grupo de aplicaciones de software de código abierto que se instalan normalmente juntas para permitir que un servidor aloje aplicaciones web y sitios web dinámicos. Este término es en realidad un acrónimo que representa al sistema operativo <strong>L</strong>inux y al servidor web <strong>A</strong>pache. Los datos del sitio se almacenan en una base de datos <strong>M</strong>ariaDB y el contenido dinámico se procesa mediante <strong>P</strong>HP.</p>

<p>En esta guía, instalaremos una pila LAMP en un servidor Debian 9.</p>

<h2 id="requisitos-previos">Requisitos previos</h2>

<p>Para completar este tutorial, deberá disponer de un servidor de Debian 9 con una cuenta de usuario <code>sudo</code> no root y un firewall básico. Esto se puede configurar usando nuestra <a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-debian-9">guía de configuración inicial de servidores para Debian 9</a>.</p>

<h2 id="paso-1-instalar-apache-y-actualizar-el-firewall">Paso 1: Instalar Apache y actualizar el firewall</h2>

<p>El servidor web Apache está entre los más populares del mundo. Cuenta con una completa documentación y se ha usado extensamente durante gran parte de la historia de la Web, lo que lo convierte en una gran opción para alojar un sitio web.</p>

<p>Instale Apache usando <code>apt</code>, el administrador de paquetes de Debian:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt update
</li><li class="line" prefix="$">sudo apt install apache2
</li></ul></code></pre>
<p>Ya que este es un comando <code>sudo</code>, estas operaciones se ejecutan con privilegios root. Le pedirá su contraseña de usuario normal para verificar sus intenciones.</p>

<p>Una vez que introduzca su contraseña, <code>apt</code> le indicará los paquetes que planea instalar y el espacio adicional que ocuparán en el disco duro. Pulse <code>Y</code> y luego <code>ENTER</code> para continuar. Con esto, la instalación continuará.</p>

<p>A continuación, suponiendo que seguió las instrucciones de configuración inicial del servidor instalando y habilitando el firewall UFW, asegúrese de que su firewall permita el tráfico HTTP y HTTPS.</p>

<p>Cuando se instala en Debian 9, UFW se carga con perfiles de app que puede usar para ajustar la configuración de su firewall. Vea la lista completa de perfiles de aplicaciones ejecutando lo siguiente:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo ufw app list
</li></ul></code></pre>
<p>Los perfiles <code>WWW</code> se utilizan para administrar los puertos usados por servidores web:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>Available applications:
. . .
  WWW
  WWW Cache
  WWW Full
  WWW Secure
. . .
</code></pre>
<p>Si inspecciona el perfil <code>WWW Full</code>, este muestra que permite el tráfico a los puertos <code>80</code> y <code>443</code>.</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo ufw app info "WWW Full"
</li></ul></code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>Profile: WWW Full
Title: Web Server (HTTP,HTTPS)
Description: Web Server (HTTP,HTTPS)

Ports:
  <span class="highlight">80</span>,<span class="highlight">443/tcp</span>
</code></pre>
<p>Permita el tráfico HTTP y HTTPS para este perfil:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo ufw allow in “WWW Full”
</li></ul></code></pre>
<p>Puede realizar una comprobación de inmediato para verificar que todo está en orden visitando la dirección IP pública de su servidor en su navegador web.</p>
<pre class="code-pre "><code langs="">http://<span class="highlight">your_server_ip</span>
</code></pre>
<p>Verá la página web predeterminada de Apache de Debian 9, que se encuentra allí para fines informativos y de prueba. Debería tener un aspecto similar a este:</p>

<p><img src="http://assets.digitalocean.com/how-to-install-lamp-debian-9/small_apache_default_debian9.png" alt="Página predeterminada de Apache de Debian 9"></p>

<p>Si ve esta página, su servidor web estará correctamente instalado y el acceso a él será posible a través de su firewall.</p>

<p>Si no conoce la dirección IP pública de su servidor, hay varias formas de encontrarla. Por lo general, es la dirección que utiliza para establecer conexión con su servidor a través de SSH.</p>

<p>Existen varias formas de hacerlo desde la línea de comandos. Primero, podría usar las herramientas de <code>iproute2</code> para obtener su dirección IP escribiendo esto:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">ip addr show eth0 | grep inet | awk '{ print $2; }' | sed 's/\/.*$//'
</li></ul></code></pre>
<p>Esto nos brindará dos o tres líneas. Todas estas direcciones son correctas, pero su computadora puede usar una de ellas. Por ello, no dude en probarlas todas.</p>

<p>Un método alternativo consiste en usar la utilidad <code>curl</code> para contactar a una parte externa a fin de que le indique <em>su</em> evaluación del servidor. Esto se hace solicitando a un servidor específico su dirección IP:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt install curl
</li><li class="line" prefix="$">curl http://icanhazip.com
</li></ul></code></pre>
<p>Independientemente del método que utilice para obtener su dirección IP, escríbala en la barra de direcciones de su navegador web para ver la página predeterminada de Apache.</p>

<h2 id="paso-2-instalar-mariadb">Paso 2 - Instalar MariaDB</h2>

<p>Ahora que su servidor web está listo, es el momento de instalar MariaDB. MariaDB es un sistema de administración de bases de datos. Básicamente, organizará y brindará acceso a bases de datos en las que su sitio puede almacenar información.</p>

<p>MariaDB es una ramificación de MySQL creada por la comunidad. En Debian 9, el servidor de MySQL predeterminado es MariaDB 10.1, y <code>mysql-server</code>, que normalmente se utiliza para instalar MySQL, es un paquete de transición que instalará MariaDB. Sin embargo, se recomienda instalar MariaDB usando el paquete real del programa: <code>mariadb-server</code>.</p>

<p>Una vez más, utilice <code>apt</code> para adquirir e instalar este software:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt install mariadb-server
</li></ul></code></pre>
<p><span class='note'><strong>Nota:</strong> En este caso, no es necesario que ejecute <code>sudo apt update</code> antes del comando. Esto se debe a que recientemente lo ejecutó en los comandos anteriores para instalar Apache y el índice de paquetes de su computadora debería estar actualizado.<br></span></p>

<p>Este comando, además, le mostrará una lista de los paquetes que se instalarán y el espacio que ocuparán en el disco. Ingrese <code>Y</code> para continuar.</p>

<p>Cuando se complete la instalación, ejecute una secuencia de comandos de seguridad sencilla que viene con MariaDB previamente instalada. Con esto, se eliminarán algunos ajustes predeterminados y se bloqueará el acceso a su sistema de bases de datos. Inicie la secuencia de comandos interactiva ejecutando lo siguiente:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo mysql_secure_installation
</li></ul></code></pre>
<p>Con esto, verá una serie de solicitudes mediante las cuales podrá realizar cambios en las opciones de seguridad de su instalación de MariaDB. En la primera solicitud se pedirá que introduzca la contraseña <strong>root</strong> de la base de datos actual. Esta es una cuenta administrativa de MariaDB que tiene mayores privilegios. Considérela como algo similar a la cuenta <strong>root</strong> para el propio servidor (aunque la que está configurando ahora sea una cuenta específica de MariaDB). Debido a que acaba de instalar MariaDB y aún no realizó aún cambios en la configuración, el espacio de esta contraseña estará en blanco. Por ello, pulse <code>ENTER</code> en la solicitud.</p>

<p>En la siguiente solicitud se pregunta si desea configurar una contraseña <strong>root</strong> de la base de datos. Escriba <code>N</code> y pulse <code>ENTER</code>. En Debian, la cuenta <strong>root</strong> para MariaDB está estrechamente vinculada al mantenimiento del sistema automatizado, por tanto no deberíamos cambiar los métodos de autenticación configurados para esa cuenta. Hacer esto permitiría que una actualización de paquetes dañara el sistema de bases de datos eliminando el acceso a la cuenta administrativa. Más tarde, se explicará la manera configurar de forma opcional una cuenta administrativa adicional para el acceso con contraseña si la autenticación del socket no es apropiada para su caso de uso.</p>

<p>Desde allí, puede pulsar <code>Y</code> y luego <code>ENTER</code> para aceptar los valores predeterminados para todas las preguntas siguientes. Con esto, se eliminarán algunos usuarios anónimos y la base de datos de prueba, se deshabilitarán las credenciales de inicio de sesión remoto de <strong>root</strong> y se cargarán estas nuevas reglas para que MariaDB aplique de inmediato los cambios que realizó.</p>

<p>En las nuevas instalaciones en sistemas Debian, el usuario <strong>root</strong> de MariaDB está configurado para autenticarse usando el complemento <code>unix_socket</code> de forma predeterminada en lugar de una contraseña. Esto proporciona una mayor seguridad y utilidad en muchos casos, pero también puede generar complicaciones cuando necesita otorgar derechos administrativos a un programa externo (por ejemplo, phpMyAdmin).</p>

<p>Debido a que el servidor utiliza la cuenta <strong>root</strong> para tareas como la rotación de registros y el inicio y la deteneción del servidor, es mejor no cambiar los detalles de autenticación <strong>root</strong> de la cuenta. La modificación de las credenciales de la cuenta en <code>/etc/mysql/debian.cnf</code> puede funcionar al principio, pero las actualizaciones de paquetes pueden sobrescribir esos cambios. En vez de modificar la cuenta <strong>root</strong>, los encargados del mantenimiento de paquetes recomiendan crear una cuenta administrativa independiente si necesita configurar un acceso basado en contraseña.</p>

<p>Para hacerlo, crearemos una nueva cuenta llamada <code>admin</code> con las mismas capacidades que la cuenta <strong>root</strong>, pero configurada para la autenticación de contraseñas. Para hacer esto, abra la instrucción de MariaDB desde su terminal:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo mariadb
</li></ul></code></pre>
<p>Ahora, podremos crear un nuevo usuario con privilegios <strong>root</strong> y acceso basado en contraseña. Cambie el nombre de usuario y la contraseña según sus preferencias:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="MariaDB [(none)]&gt;">GRANT ALL ON *.* TO '<span class="highlight">admin</span>'@'localhost' IDENTIFIED BY '<span class="highlight">password</span>' WITH GRANT OPTION;
</li></ul></code></pre>
<p>Vacíe los privilegios para garantizar que se guarden y estén disponibles en la sesión actual:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="MariaDB [(none)]&gt;">FLUSH PRIVILEGES;
</li></ul></code></pre>
<p>Después de esto, cierre el shell de MariaDB:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="MariaDB [(none)]&gt;">exit
</li></ul></code></pre>
<p>Ahora, en cualquier momento que desee acceder a su base de datos como su nuevo usuario administrativo, deberá autenticarse como ese usuario con la contraseña que acaba de configurar usando el siguiente comando:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">mariadb -u <span class="highlight">admin</span> -p
</li></ul></code></pre>
<p>En este momento, el sistema de base de datos está configurado y puede proceder a instalar PHP, el componente final de la pila LAMP.</p>

<h2 id="paso-3-instalar-php">Paso 3: Instalar PHP</h2>

<p>PHP es el componente de su configuración que procesará código para mostrar contenido dinámico. Puede ejecutar secuencias de comandos, establecer conexión con sus bases de datos de MariaDB para obtener información y entregar el contenido procesado a su servidor web para su visualización.</p>

<p>Una vez más, utilice el sistema <code>apt</code> para instalar PHP. Además, incluye algunos paquetes de helper esta vez para que el código de PHP pueda ejecutarse con el servidor Apache y comunicarse con su base de datos de MariaDB:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt install php libapache2-mod-php php-mysql
</li></ul></code></pre>
<p>Con esto, PHP debería instalarse sin problemas. Lo probaremos en un momento.</p>

<p>En la mayoría de los casos, le convendrá modificar la forma en que Apache presenta los archivos cuando se solicita un directorio. Actualmente, si un usuario solicita un directorio del servidor, Apache buscará primero un archivo llamado <code>index.html</code>. Queremos indicar al servidor web que priorice los archivos PHP respecto de otros. Por ello, haga que Apache busque primero un archivo <code>index.php</code>.</p>

<p>Para hacer esto, escriba este comando a fin de abrir el archivo <code>dir.conf</code> en un editor de texto con privilegios root:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo nano /etc/apache2/mods-enabled/dir.conf
</li></ul></code></pre>
<p>Tendrá un aspecto similar a este:</p>
<div class="code-label " title="/etc/apache2/mods-enabled/dir.conf">/etc/apache2/mods-enabled/dir.conf</div><pre class="code-pre "><code langs="">&lt;IfModule mod_dir.c&gt;
    DirectoryIndex index.html index.cgi index.pl <span class="highlight">index.php</span> index.xhtml index.htm
&lt;/IfModule&gt;
</code></pre>
<p>Mueva el archivo de índice PHP (resaltado arriba) a la primera posición después de la especificación <code>DirectoryIndex</code>, como se muestra a continuación:</p>
<div class="code-label " title="/etc/apache2/mods-enabled/dir.conf">/etc/apache2/mods-enabled/dir.conf</div><pre class="code-pre "><code langs="">&lt;IfModule mod_dir.c&gt;
    DirectoryIndex <span class="highlight">index.php</span> index.html index.cgi index.pl index.xhtml index.htm
&lt;/IfModule&gt;
</code></pre>
<p>Cuando termine, guarde y cierre el archivo pulsando <code>CTRL+X</code>. Confirme que desea guardar los cambios escribiendo <code>Y</code> y luego pulse <code>ENTER</code> para verificar la ubicación en la que se guardará el archivo.</p>

<p>Después de esto, reinicie el servidor web Apache para que se reconozcan sus cambios. Hágalo escribiendo lo siguiente:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl restart apache2
</li></ul></code></pre>
<p>También puede verificar el estado del servicio <code>apache2</code> usando <code>systemctl</code>:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl status apache2
</li></ul></code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Sample Output">Sample Output</div>● apache2.service - The Apache HTTP Server
   Loaded: loaded (/lib/systemd/system/apache2.service; enabled; vendor preset: enabled)
   Active: active (running) since Tue 2018-09-04 18:23:03 UTC; 9s ago
  Process: 22209 ExecStop=/usr/sbin/apachectl stop (code=exited, status=0/SUCCESS)
  Process: 22216 ExecStart=/usr/sbin/apachectl start (code=exited, status=0/SUCCESS)
 Main PID: 22221 (apache2)
    Tasks: 6 (limit: 4915)
   CGroup: /system.slice/apache2.service
           ├─22221 /usr/sbin/apache2 -k start
           ├─22222 /usr/sbin/apache2 -k start
           ├─22223 /usr/sbin/apache2 -k start
           ├─22224 /usr/sbin/apache2 -k start
           ├─22225 /usr/sbin/apache2 -k start
           └─22226 /usr/sbin/apache2 -k start
</code></pre>
<p>Para mejorar la funcionalidad de PHP, tendrá la opción de instalar algunos módulos adicionales. Para ver las opciones disponibles para módulos y bibliotecas PHP, canalice los resultados de <code>apt search</code> en <code>less</code>, un localizador que le permite desplazarse por el resultado de otros comandos:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">apt search php- | less
</li></ul></code></pre>
<p>Utilice las teclas de flecha para desplazarse arriba y abajo, y pulse <code>Q</code> para salir.</p>

<p>Como resultado, obtendrá todos los componentes opcionales que puede instalar. Verá una breve descripción de cada uno:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>Sorting...
Full Text Search...
bandwidthd-pgsql/stable 2.0.1+cvs20090917-10 amd64
  Tracks usage of TCP/IP and builds html files with graphs

bluefish/stable 2.2.9-1+b1 amd64
  advanced Gtk+ text editor for web and software development

cacti/stable 0.8.8h+ds1-10 all
  web interface for graphing of monitoring systems

cakephp-scripts/stable 2.8.5-1 all
  rapid application development framework for PHP (scripts)

ganglia-webfrontend/stable 3.6.1-3 all
  cluster monitoring toolkit - web front-end

haserl/stable 0.9.35-2+b1 amd64
  CGI scripting program for embedded environments

kdevelop-php-docs/stable 5.0.3-1 all
  transitional package for kdevelop-php

kdevelop-php-docs-l10n/stable 5.0.3-1 all
  transitional package for kdevelop-php-l10n
&hellip;
:
</code></pre>
<p>En Internet podrá obtener más información sobre lo que hace cada módulo. También puede consultar la descripción extensa del paquete escribiendo lo siguiente:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">apt show <span class="highlight">package_name</span>
</li></ul></code></pre>
<p>Verá muchos resultados; habrá un campo llamado <code>Description</code>, que tendrá una explicación más larga de la funcionalidad que proporciona el módulo.</p>

<p>Por ejemplo, para saber qué hace el módulo <code>php-cli,</code> puede escribir lo siguiente:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">apt show php-cli
</li></ul></code></pre>
<p>Junto con una gran cantidad de información, encontrará algo similar a esto:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>&hellip;
Description: command-line interpreter for the PHP scripting language (default)
 This package provides the /usr/bin/php command interpreter, useful for
 testing PHP scripts from a shell or performing general shell scripting tasks.
 .
 PHP (recursive acronym for PHP: Hypertext Preprocessor) is a widely-used
 open source general-purpose scripting language that is especially suited
 for web development and can be embedded into HTML.
 .
 This package is a dependency package, which depends on Debian's default
 PHP version (currently 7.0).
&hellip;
</code></pre>
<p>Si después de investigar decide que desea instalar un paquete, puede hacerlo usando el comando <code>apt install</code> como lo ha hecho con el otro software.</p>

<p>Si determina que necesita <code>php-cli</code>, puede escribir lo siguiente:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt install php-cli
</li></ul></code></pre>
<p>Si desea instalar más de un módulo, puede hacerlo enumerando cada uno de ellos, separados por un espacio, con el comando <code>apt install</code>, como se muestra a continuación:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt install <span class="highlight">package1</span> <span class="highlight">package2</span> <span class="highlight">...</span>
</li></ul></code></pre>
<p>En este punto, su pila LAMP estará instalada y confgurada. Antes de realizar más cambios o implementar una aplicación, sería útil probar de forma proactiva su configuración PHP en caso de que haya problemas que deban abordarse.</p>

<h2 id="paso-4-probar-el-procesamiento-de-php-en-su-servidor-web">Paso 4: Probar el procesamiento de PHP en su servidor web</h2>

<p>A fin de verificar que su sistema esté configurado de forma adecuada para PHP, cree una secuencia de comandos PHP muy básica llamada <code>info.php</code>. Para que Apache encuentre este archivo y lo presente correctamente, debe guardarse en un directorio muy específico llamado <em>web root</em>.</p>

<p>En Debian 9, este directorio se encuentra en <code>/var/www/html/</code>. Cree el archivo en esa ubicación ejecutando lo siguiente:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo nano /var/www/html/info.php
</li></ul></code></pre>
<p>Con esto se abrirá un archivo vacío. Añada el siguiente texto, que es el código PHP válido, dentro del archivo:</p>
<div class="code-label " title="/var/www/html/info.php">/var/www/html/info.php</div><pre class="code-pre "><code langs="">&lt;?php
phpinfo();
?&gt;
</code></pre>
<p>Cuando termine, guarde y cierre el archivo.</p>

<p>Ahora puede probar si su servidor web puede mostrar correctamente el contenido generado por esta secuencia de comandos PHP. Para probar esto, visite esta página en su navegador web. Necesitará de nuevo la dirección IP pública de su servidor.</p>

<p>La dirección que le convendrá visitar es la siguiente:</p>
<pre class="code-pre "><code langs="">http://<span class="highlight">your_server_ip</span>/info.php
</code></pre>
<p>La página a la que llegue debería tener un aspecto similar a este:</p>

<p><img src="https://assets.digitalocean.com/how-to-install-lamp-debian-9/small_php_info_debian9.png" alt="Información de PHP predeterminada de Debian 9"></p>

<p>En esta página se proporciona información básica sobre su servidor desde la perspectiva de PHP. Es útil para la depuración y para asegurarse de que sus ajustes se apliquen correctamente.</p>

<p>Si puede ver esta página en su navegador, su PHP funcionará como se espera.</p>

<p>Probablemente desee eliminar este archivo tras esta prueba, ya que podría proporcionar información sobre su servidor a usuarios no autorizados. Para hacer esto, ejecute el siguiente comando:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo rm /var/www/html/info.php
</li></ul></code></pre>
<p>Siempre puede recrear esta página si necesita acceder a la información posteriormente.</p>

<h2 id="conclusión">Conclusión</h2>

<p>Ahora que dispone de una pila LAMP instalada, tiene muchas opciones respecto de lo que puede hacer a continuación. Básicamente, instaló una plataforma que le permitirá instalar la mayoría de los tipos de sitios y recursos de software web en su servidor.</p>
