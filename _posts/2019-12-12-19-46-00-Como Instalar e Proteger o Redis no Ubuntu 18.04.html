---
layout: post
title: Como Instalar e Proteger o Redis no Ubuntu 18.04
network: digitalocean
date: December 12, 2019 at 07:46PM
url: https://www.digitalocean.com/community/tutorials/how-to-install-and-secure-redis-on-ubuntu-18-04-pt
image: http://ifttt.com/images/no_image_card.png
tags: docker
feedtitle: DigitalOcean Community Tutorials
feedurl: https://www.digitalocean.com/community/tutorials
author: DigitalOcean
---
<p><em>Uma versão anterior deste tutorial foi escrita por <a href="https://www.digitalocean.com/community/users/jellingwood">Justin Ellingwood.</a></em></p>

<h3 id="introdução">Introdução</h3>

<p><a href="https://redis.io/">O Redis</a> é uma reserva de valores-chave na memória  conhecido pela sua flexibilidade, desempenho e amplo suporte de linguagens. Este tutorial demonstra como instalar, configurar e proteger o Redis em um servidor do Ubuntu 18.04.</p>

<h2 id="pré-requisitos">Pré-requisitos</h2>

<p>Para completar este guia, você precisará ter acesso a um servidor do Ubuntu 18.04 que tenha um usuário não-root com privilégios <code>sudo</code> e um firewall básico configurado. Você pode configurar isso seguindo nosso <a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-18-04">guia de Configuração Inicial de Servidor</a>.</p>

<p>Quando você estiver pronto para começar, logue-se ao seu servidor Ubuntu 18.04 com seu usuário <code>sudo</code> e continue abaixo.</p>

<h2 id="passo-1-—-instalando-e-configurando-o-redis">Passo 1 — Instalando e Configurando o Redis</h2>

<p>Para obter a última versão do Redis, usaremos o <code>apt</code> para instalá-la dos repositórios oficiais do Ubuntu.</p>

<p>Atualize seu cache de pacote local <code>apt</code> e instale o Redis digitando:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo apt update
</li><li class="line" prefix="$">sudo apt install redis-server
</li></ul></code></pre>
<p>Isso irá baixar e instalar o Redis e suas dependências. Em seguida, há uma alteração importante na configuração a ser feita no arquivo de configuração do Redis, que foi gerada automaticamente durante a instalação.</p>

<p>Abra este arquivo com seu editor de texto preferido:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo nano /etc/redis/redis.conf
</li></ul></code></pre>
<p>No arquivo, encontre a diretiva <code>supervised</code>. Esta diretiva permite que você declare um sistema init para gerenciar o Redis como um serviço, fornecendo a você mais controle sobre a sua operação. A diretiva <code>supervised</code> é configurada como <code>no</code> por padrão. Uma vez que você está executando o Ubuntu, que usa o sistema systemd init, altere isso para <code>systemd</code>:</p>
<div class="code-label " title="/etc/redis/redis.conf">/etc/redis/redis.conf</div><pre class="code-pre "><code langs="">. . .

# If you run Redis from upstart or systemd, Redis can interact with your
# supervision tree. Options:
#   supervised no      - no supervision interaction
#   supervised upstart - signal upstart by putting Redis into SIGSTOP mode
#   supervised systemd - signal systemd by writing READY=1 to $NOTIFY_SOCKET
#   supervised auto    - detect upstart or systemd method based on
#                        UPSTART_JOB or NOTIFY_SOCKET environment variables
# Note: these supervision methods only signal "process is ready."
#       They do not enable continuous liveness pings back to your supervisor.
supervised <span class="highlight">systemd</span>

. . .
</code></pre>
<p>Essa é a única alteração que você precisa fazer no arquivo de configuração do Redis neste ponto, então salve e feche-o quando você terminar. Então, reinicie o serviço Redis para refletir as alterações feitas no arquivo de configuração:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl restart redis.service
</li></ul></code></pre>
<p>Com isso, você instalou e configurou o Redis e ele está funcionando na sua máquina. No entanto, antes de você começar a usá-lo, é prudente verificar primeiro se o Redis está funcionando corretamente.</p>

<h2 id="passo-2-—-testando-o-redis">Passo 2 — Testando o Redis</h2>

<p>Como com qualquer software recém-instalado, é uma boa ideia garantir que o Redis esteja funcionando como esperado antes de fazer outras alterações na sua configuração. Vamos analisar várias maneiras de verificar se o Redis está funcionando corretamente neste passo.</p>

<p>Comece por verificar se o serviço Redis está funcionando:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl status redis
</li></ul></code></pre>
<p>Se ele estiver funcionando sem erros, este comando irá produzir resultados semelhantes aos seguintes:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>● redis-server.service - Advanced key-value store
   Loaded: loaded (/lib/systemd/system/redis-server.service; enabled; vendor preset: enabled)
   Active: active (running) since Wed 2018-06-27 18:48:52 UTC; 12s ago
     Docs: http://redis.io/documentation,
           man:redis-server(1)
  Process: 2421 ExecStop=/bin/kill -s TERM $MAINPID (code=exited, status=0/SUCCESS)
  Process: 2424 ExecStart=/usr/bin/redis-server /etc/redis/redis.conf (code=exited, status=0/SUCCESS)
 Main PID: 2445 (redis-server)
    Tasks: 4 (limit: 4704)
   CGroup: /system.slice/redis-server.service
           └─2445 /usr/bin/redis-server 127.0.0.1:6379
. . .
</code></pre>
<p>Aqui, você pode ver que o Redis está funcionando e já está ativo, o que significa que ele está definido para iniciar sempre que o servidor inicializar.</p>

<span class='note'><p>
<strong>Nota:</strong> Esta configuração é desejável para muitos casos de uso comum do Redis. No entanto, se você preferir iniciar o Redis manualmente sempre que seu servidor inicializar, você pode configurar isso com o comando a seguir:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl disable redis
</li></ul></code></pre>
<p></p></span>

<p>Para testar se o Redis está funcionando corretamente, conecte-se ao servidor usando o cliente da linha de comando:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">redis-cli
</li></ul></code></pre>
<p>No prompt que segue, teste a conectividade com o comando <code>ping</code>:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="127.0.0.1:6379&gt;">ping
</li></ul></code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>PONG
</code></pre>
<p>Este resultado confirma que a conexão com o servidor ainda está viva. A seguir, verifique se você é capaz de definir chaves executando:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="127.0.0.1:6379&gt;">set test "It's working!"
</li></ul></code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>OK
</code></pre>
<p>Recupere o valor digitando:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="127.0.0.1:6379&gt;">get test
</li></ul></code></pre>
<p>Supondo que tudo esteja funcionando, você será capaz de recuperar o valor que você armazenou:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>"It's working!"
</code></pre>
<p>Após confirmar que você pode obter o valor, saia do prompt do Redis para voltar ao shell:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="127.0.0.1:6379&gt;">exit
</li></ul></code></pre>
<p>Como um teste final, verificaremos se o Redis é capaz de manter dados mesmo após ter sido interrompido ou reiniciado. Para fazer isso, primeiro reinicie a instância do Redis:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl restart redis
</li></ul></code></pre>
<p>Então, conecte-se com o cliente da linha de comando novamente e confirme se seu valor de teste ainda está disponível:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">redis-cli
</li></ul></code></pre><pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="127.0.0.1:6379&gt;">get test
</li></ul></code></pre>
<p>O valor da sua chave ainda deve estar acessível:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>"It's working!"
</code></pre>
<p>Saia novamente para o shell quando terminar:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="127.0.0.1:6379&gt;">exit
</li></ul></code></pre>
<p>Com isso, sua instalação do Redis está totalmente operacional e pronta para que você a use. No entanto, algumas de suas definições de configurações padrão são inseguras e proporcionam  a  indivíduos maliciosos oportunidades de atacar e obter acesso ao seu servidor e seus dados. Os passos restantes neste tutorial cobrem métodos para mitigar essas vulnerabilidades, como prescrito no <a href="http://redis.io/topics/security">site oficial do Redis</a>. Embora esses passos sejam opcionais e o Redis ainda funcionará se você escolher não segui-los, é <em>fortemente</em> recomendado que você os complete para fortalecer a segurança do seu sistema.</p>

<h2 id="passo-3-—-vinculando-ao-localhost">Passo 3 — Vinculando ao localhost</h2>

<p>Por padrão, o Redis apenas é acessível do <strong>localhost</strong>. No entanto, se você instalou e configurou o Redis seguindo um tutorial diferente deste, você pode ter atualizado o arquivo de configuração para permitir conexões de qualquer lugar. Isso não é tão seguro quanto o vínculo ao <strong>localhost</strong>.</p>

<p>Para corrigir isso, abra o arquivo de configuração do Redis para edição:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo nano /etc/redis/redis.conf
</li></ul></code></pre>
<p>Localize esta linha e certifique-se de que ela esteja descomentada (remova o <code>#</code> se ele existir):</p>
<div class="code-label " title="/etc/redis/redis.conf">/etc/redis/redis.conf</div><pre class="code-pre "><code langs="">bind 127.0.0.1 ::1
</code></pre>
<p>Salve e feche o arquivo quando terminar (pressione <code>CTRL + X</code>, <code>Y</code>, então <code>ENTER</code>).</p>

<p>Então, reinicie o serviço para garantir que o systemd leia suas alterações:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl restart redis
</li></ul></code></pre>
<p>Para verificar se essa alteração entrou em vigor, execute o comando <code>netstat</code> a seguir:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo netstat -lnp | grep redis
</li></ul></code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>tcp        0      0 127.0.0.1:6379          0.0.0.0:*               LISTEN      14222/redis-server  
tcp6       0      0 ::1:6379                :::*                    LISTEN      14222/redis-server  
</code></pre>
<p>Este resultado mostra que o programa <code>redis-server</code> se encontra ligado ao <strong>localhost</strong> (<code>127.0.0.1</code>), refletindo a alteração que você acabou de fazer no arquivo de configuração. Se você ver outro endereço IP na coluna (<code>0.0.0.0</code>, por exemplo), então você deve verificar de novo se você descomentou a linha correta e reiniciar o serviço do Redis novamente.</p>

<p>Agora que sua instalação do Redis apenas está escutando o <strong>localhost</strong>, será mais difícil para indivíduos maliciosos fazerem pedidos ou obter acesso ao seu servidor. No entanto, o Redis atualmente não está definido para exigir que os usuários se autentiquem antes de fazer alterações na sua configuração ou nos dados que ele possui. Para remediar isso, o Redis permite que você exija que os usuários autentiquem-se com uma senha antes de realizarem alterações pelo cliente do Redis (<code>redis-cli</code>).</p>

<h2 id="passo-4-—-configurando-uma-senha-para-o-redis">Passo 4 — Configurando uma Senha para o Redis</h2>

<p>Configurar uma senha para o Redis habilita uma de suas duas características intrínsecas de segurança — o comando <code>auth</code>, que exige que os clientes autentiquem-se para acessar o banco de dados. A senha é configurada diretamente no arquivo de configuração do Redis, <code>/etc/redis/redis.conf</code>, assim abra esse arquivo novamente com seu editor preferido:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo nano /etc/redis/redis.conf
</li></ul></code></pre>
<p>Role até a seção <code>SECURITY</code> e procure uma diretiva comentada que mostre:</p>
<div class="code-label " title="/etc/redis/redis.conf">/etc/redis/redis.conf</div><pre class="code-pre "><code langs=""># requirepass foobared
</code></pre>
<p>Descomente-a removendo o <code>#</code>, e modificando o <code>foobared</code> para uma senha segura.</p>

<span class='note'><p>
<strong>Nota:</strong> Acima da diretiva <code>requirepass</code> no arquivo <code>redis.conf</code>, há um aviso comentado:</p>
<pre class="code-pre "><code langs=""># Warning: since Redis is pretty fast an outside user can try up to
# 150k passwords per second against a good box. This means that you should
# use a very strong password otherwise it will be very easy to break.
#
</code></pre>
<p>Assim, é importante que você especifique um valor muito forte e longo como sua senha. Ao invés de criar uma senha você mesmo, você pode usar o comando <code>openssl</code> para gerar uma aleatória, como no exemplo a seguir. Canalizando o resultado do primeiro comando para o segundo comando <code>openssl</code>, como mostrado aqui, ele removerá quaisquer quebras de linha produzidas pelo primeiro comando:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">openssl rand 60 | openssl base64 -A
</li></ul></code></pre>
<p>Seu resultado deve se parecer com esse:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>RBOJ9cCNoGCKhlEBwQLHri1g+atWgn4Xn4HwNUbtzoVxAYxkiYBi7aufl4MILv1nxBqR4L6NNzI0X6cE
</code></pre>
<p>Após copiar e colar o resultado desse comando como o novo valor para <code>requirepass</code>, ele deve mostrar:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="/etc/redis/redis.conf">/etc/redis/redis.conf</div>requirepass <span class="highlight">RBOJ9cCNoGCKhlEBwQLHri1g+atWgn4Xn4HwNUbtzoVxAYxkiYBi7aufl4MILv1nxBqR4L6NNzI0X6cE</span>
</code></pre>
<p></p></span>

<p>Após configurar a senha, salve e feche o arquivo, então reinicie o Redis:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl restart redis.service
</li></ul></code></pre>
<p>Para testar que a senha funciona, acesse a linha de comando do Redis:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">redis-cli
</li></ul></code></pre>
<p>A seguir encontra-se uma sequência de comandos usada para testar se a senha do Redis funciona. O primeiro comando tenta definir uma chave para um valor antes da autenticação:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="127.0.0.1:6379&gt;">set key1 10
</li></ul></code></pre>
<p>Isso não funcionará porque você não se autenticou, então o Redis retorna um erro:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>(error) NOAUTH Authentication required.
</code></pre>
<p>O próximo comando autentica-se com a senha especificada no arquivo de configuração do Redis:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="127.0.0.1:6379&gt;">auth <span class="highlight">your_redis_password</span>
</li></ul></code></pre>
<p>O Redis reconhece:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>OK
</code></pre>
<p>Após isso, executando o comando anterior novamente terá sucesso:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="127.0.0.1:6379&gt;">set key1 10
</li></ul></code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>OK
</code></pre>
<p><code>get key1</code> consulta o Redis para o valor da nova chave.</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="127.0.0.1:6379&gt;">get key1
</li></ul></code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>"10"
</code></pre>
<p>Após confirmar que você é capaz de executar comandos no cliente Redis após a autenticação, você pode sair do <code>redis-cli</code>:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="127.0.0.1:6379&gt;">quit
</li></ul></code></pre>
<p>A seguir, vamos ver como renomear comandos do Redis que, se inseridos por engano ou por um indivíduo malicioso, podem causar danos graves na sua máquina.</p>

<h2 id="passo-5-—-renomeando-comandos-perigosos">Passo 5 — Renomeando Comandos Perigosos</h2>

<p>A outra característica de segurança construída no Redis envolve renomear ou desativar completamente determinados comandos que são considerados perigosos.</p>

<p>Quando executados por usuários não autorizados, esses comandos podem ser usados para reconfigurar, destruir ou até limpar seus dados. Assim como a senha de autenticação, renomear ou desativar comandos é configurado na mesma seção <code>SECURITY</code> do arquivo <code>/etc/redis/redis.conf</code>.</p>

<p>Alguns comandos que são considerados perigosos incluem: <strong>FLUSHDB</strong>, <strong>FLUSHALL</strong>, <strong>KEYS</strong>, <strong>PEXPIRE</strong>, <strong>DEL</strong>, <strong>CONFIG</strong>, <strong>SHUTDOWN</strong>, <strong>BGREWRITEAOF</strong>, <strong>BGSAVE</strong>, <strong>SAVE</strong>, <strong>SPOP</strong>, <strong>SREM</strong>, <strong>RENAME</strong>, e <strong>DEBUG</strong>. Esta não é uma lista completa, mas renomear ou desativar todos os comandos nessa lista é um bom ponto de partida para melhorar a segurança do seu servidor do Redis.</p>

<p>Se você deve desativar ou renomear um comando depende de suas necessidades específicas ou daquelas do seu site. Se você sabe que nunca usará um comando que possa ser abusado, então você pode desativá-lo. Caso contrário, pode ser do seu melhor interesse renomeá-lo.</p>

<p>Para habilitar ou desativar comandos do Redis, abra novamente o arquivo de configuração:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo nano  /etc/redis/redis.conf
</li></ul></code></pre>
<p><span class='warning'><strong>Aviso:</strong> Os passos a seguir mostrando como desativar e renomear comandos são exemplos. Você deve apenas escolher desativar ou renomear os comandos que fizerem sentido para você. Você pode rever a lista completa de comandos por conta própria e determinar como eles poderiam ser usados de forma errada com o <a href="http://redis.io/commands">redis.io/commands</a>.<br></span></p>

<p>Para desativar um comando, simplesmente renomeie-o para uma string vazia (representado por um par de aspas sem caracteres entre elas), como mostrado abaixo:</p>
<div class="code-label " title="/etc/redis/redis.conf">/etc/redis/redis.conf</div><pre class="code-pre "><code langs="">. . .
# It is also possible to completely kill a command by renaming it into
# an empty string:
#
<span class="highlight">rename-command FLUSHDB ""</span>
<span class="highlight">rename-command FLUSHALL ""</span>
<span class="highlight">rename-command DEBUG ""</span>
. . .
</code></pre>
<p>Para renomear um comando, dê a ele outro nome como mostrado nos exemplos abaixo. Os comandos renomeados devem ser difíceis para que outros possam adivinhar, mas fácil para você lembrar:</p>
<div class="code-label " title="/etc/redis/redis.conf">/etc/redis/redis.conf</div><pre class="code-pre "><code langs="">. . .
# rename-command CONFIG ""
<span class="highlight">rename-command SHUTDOWN SHUTDOWN_MENOT</span>
<span class="highlight">rename-command CONFIG ASC12_CONFIG</span>
. . .
</code></pre>
<p>Salve suas alterações e feche o arquivo.</p>

<p>Após renomear um comando, aplique a alteração reiniciando o Redis:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">sudo systemctl restart redis.service
</li></ul></code></pre>
<p>Para testar o novo comando, acesse a linha de comando do Redis:</p>
<pre class="code-pre command"><code langs=""><ul class="prefixed"><li class="line" prefix="$">redis-cli
</li></ul></code></pre>
<p>Então, autentique-se:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="127.0.0.1:6379&gt;">auth <span class="highlight">your_redis_password</span>
</li></ul></code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>OK
</code></pre>
<p>Vamos supor que você renomeou o comando <code>CONFIG</code> para <code>ASC12_CONFIG</code>, como no exemplo anterior. Primeiro, tente usar o comando original <code>CONFIG</code>. Ele deve falhar, porque você renomeou ele:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="127.0.0.1:6379&gt;">config get requirepass
</li></ul></code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>(error) ERR unknown command 'config'
</code></pre>
<p>Chamar o comando renomeado, no entanto, será bem-sucedido. Não é sensível a maiúsculas e minúsculas:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="127.0.0.1:6379&gt;">asc12_config get requirepass
</li></ul></code></pre><pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>1) "requirepass"
2) "<span class="highlight">your_redis_password</span>"
</code></pre>
<p>Finalmente, você pode sair do <code>redis-cli</code>:</p>
<pre class="code-pre custom_prefix"><code langs=""><ul class="prefixed"><li class="line" prefix="127.0.0.1:6379&gt;">exit
</li></ul></code></pre>
<p>Observe que se você já estiver usando a linha de comando do Redis e então reiniciar o Redis, você precisará autenticar-se novamente. Caso contrário, você receberá este erro se digitar um comando:</p>
<pre class="code-pre "><code langs=""><div class="secondary-code-label " title="Output">Output</div>NOAUTH Authentication required.
</code></pre>
<span class='warning'><p>
A respeito da prática de renomear comandos, há uma declaração preventiva ao final da seção <code>SECURITY</code> no <code>/etc/redis/redis.conf</code> que mostra:</p>

<blockquote>
<p><code>Por favor, note que alterar o nome de comandos que estejam logados no arquivo AOF ou transmitidos a escravos pode causar problemas.</code></p>
</blockquote>

<p><strong>Nota:</strong> <em>O projeto Redis escolhe usar os termos “mestre” e “escravo”, enquanto o DigitalOcean geralmente prefere as alternativas “primário” e “secundário”. Para evitar confusão, escolhemos usar os termos usados na documentação do Redis aqui.</em></p>

<p>Isso significa que se o comando renomeado não estiver no arquivo AOF, ou se ele estiver, mas o arquivo AOF não for transmitido a escravos, então não deve haver problemas.</p>

<p>Então, lembre-se disso quando você estiver tentando renomear comandos. A melhor hora para renomear um comando é quando você não estiver usando a persistência do AOF, ou logo após a instalação, ou seja, antes do seu aplicativo que utiliza o Redis for implantado.</p>

<p>Quando você estiver usando o AOF e lidando com uma instalação mestre-escravo, considere <a href="https://github.com/antirez/redis/issues/2783">essa resposta na página do GitHub do projeto</a>. A seguir está uma resposta à pergunta do autor:</p>

<blockquote>
<p>Os comandos são logados no AOF e reproduzidos para o escravo da mesma forma que eles são enviados, então, se você tentar replicar o AOF em uma instância que não tenha a mesma renomeação, você pode enfrentar inconsistências já que o comando não pode ser executado (igualmente para escravos).</p>
</blockquote>

<p>Assim, a melhor maneira de lidar com renomeações em casos como esse é garantir que os comandos renomeados sejam aplicados a todas as instâncias em instalações mestre-escravo.<br></p></span>

<h2 id="conclusão">Conclusão</h2>

<p>Neste tutorial, você instalou e configurou o Redis, garantiu que sua instalação do Redis está funcionando corretamente, e usou suas características intrínsecas de segurança para torná-lo menos vulnerável a ataques de indivíduos maliciosos.</p>

<p>Lembre-se de que uma vez que alguém estiver logado no seu servidor, é muito fácil contornar as características específicas de segurança do Redis que colocamos. Portanto, a característica mais importante de segurança no seu servidor Redis é seu firewall (que você configurou se seguiu o tutorial pré-requisito <a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-18-04#step-four-%E2%80%94-setting-up-a-basic-firewall">Configuração Inicial do Servidor</a>, uma vez que isso torna extremamente difícil para indivíduos maliciosos pular esta cerca.</p>
